<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<link rel="stylesheet" href="style.css" type="text/css">
<title>viper_cert.html</title>
</head>
<body>
<div class="why3doc">
<pre><span class="comment">(* slight modification of module Sum in why3 library *)</span>
<span class="keyword">module</span> <a name="Sum_">Sum</a>

  <span class="keyword">use</span> real.<a href="real.html#RealInfix_">RealInfix</a>
  <span class="keyword">use</span> int.<a href="int.html#Int_">Int</a>

  <span class="keyword">let</span> <span class="keyword">rec</span> <span class="keyword">ghost</span> <span class="keyword">function</span> <a name="sum_7">sum</a> (f: int -&gt; real) (a b: int) : real
    <span class="keyword">requires</span> {a <a href="int.html#infix%20%3C=_25">&lt;=</a> b}
    <span class="keyword">variant</span> {b <a href="int.html#infix%20-_23">-</a> a}
  = <span class="keyword">if</span> a <a href="int.html#infix%20=_16">=</a> b <span class="keyword">then</span> 0.0 <span class="keyword">else</span> f a <a href="real.html#infix%20+._69">+.</a> sum f (a <a href="int.html#infix%20+_19">+</a> 1) b

<span class="keyword">end</span>

<span class="keyword">theory</span> <a name="Init_">Init</a>

  <span class="keyword">use</span>  int.<a href="int.html#Int_">Int</a>
  <span class="keyword">use</span>  array.<a href="array.html#Array_">Array</a>

  <span class="keyword">function</span> <a name="init_20">init</a> (n: int) (f: int -&gt; real) : <a href="array.html#array_15">array</a> real

  <span class="keyword">axiom</span> <a name="init_spec'lemma_22">init_spec</a>:
    <span class="keyword">forall</span> f n. n <a href="int.html#infix%20%3E=_26">&gt;=</a> 0 -&gt;
      (<span class="keyword">forall</span> i. 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> i <a href="int.html#infix%20%3C_21">&lt;</a> n -&gt; (<a href="#init_20">init</a> n f)[i] = f i) /\
      <a href="array.html#length_17">length</a> (<a href="#init_20">init</a> n f) = n

<span class="keyword">end</span>
<span class="comment">(* all comment references to defitions, lemmas, etc. are from our paper *)</span>
<span class="keyword">theory</span> <a name="VIPRCertificate_">VIPRCertificate</a>

  <span class="keyword">use</span> real.<a href="real.html#RealInfix_">RealInfix</a>
  <span class="keyword">use</span> real.<a href="real.html#FromInt_">FromInt</a>
  <span class="keyword">use</span> <a href="#Sum_">Sum</a>
  <span class="keyword">use</span> int.<a href="int.html#Int_">Int</a>
  <span class="keyword">use</span> array.<a href="array.html#Array_">Array</a>
  <span class="keyword">use</span> set.<a href="set.html#Set_">Set</a>

  <span class="keyword">predicate</span> <a name="is_integer_40">is_integer</a> (x: real) =
    <span class="keyword">exists</span> i: int. x = <a href="real.html#from_int_129">from_int</a> i

  <span class="comment">(* ---------- Type and constants ---------- *)</span>

  <span class="comment">(* Dimensions of the certificate *)</span>
  <span class="keyword">constant</span> <a name="n_46">n</a> : int   <span class="comment">(* number of variables *)</span>
  <span class="keyword">constant</span> <a name="m_47">m</a> : int   <span class="comment">(* number of original constraints *)</span>
  <span class="keyword">constant</span> <a name="d_48">d</a> : int   <span class="comment">(* total number of constraints *)</span>

  <span class="comment">(* Dimension assumptions *)</span>
  <span class="keyword">axiom</span> <a name="H_con'lemma_51">H_con</a> : (0 <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#m_47">m</a>) /\ (<a href="#m_47">m</a> <a href="int.html#infix%20%3C=_25">&lt;=</a> <a href="#d_48">d</a>) <span class="comment">(* there is at least one constaint *)</span>
  <span class="keyword">axiom</span> <a name="H_var'lemma_52">H_var</a> : 0 <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#n_46">n</a> <span class="comment">(* there is at least one variable *)</span>

  <span class="comment">(* Basic types *)</span>
  <span class="keyword">type</span> <a name="sign_55">sign</a> =
    | <a name="Leq_56">Leq</a>
    | <a name="Geq_57">Geq</a>
    | <a name="Eq_58">Eq</a>

  <span class="keyword">function</span> <a name="sign_to_int_60">sign_to_int</a> (s: <a href="#sign_55">sign</a>) : int

  <span class="comment">(* Def. 1 *)</span>
  <span class="keyword">axiom</span> <a name="sign_to_int_def'lemma_63">sign_to_int_def</a>:
  <span class="keyword">forall</span> s: <a href="#sign_55">sign</a>.
    (s = <a href="#Leq_56">Leq</a> -&gt; <a href="#sign_to_int_60">sign_to_int</a> s = -1) /\
    (s = <a href="#Eq_58">Eq</a>  -&gt; <a href="#sign_to_int_60">sign_to_int</a> s =  0) /\
    (s = <a href="#Geq_57">Geq</a> -&gt; <a href="#sign_to_int_60">sign_to_int</a> s =  1)

   <span class="comment">(* Def. 14 *)</span>
  <span class="keyword">type</span> <a name="constraint_70">constraint</a> = {
    <a name="a_71">a</a> : <a href="array.html#array_15">array</a> real;
    <a name="b_72">b</a> : real;
    <a name="s_73">s</a> : <a href="#sign_55">sign</a>
    }

  <span class="keyword">predicate</span> <a name="is_constraint_76">is_constraint</a> (con: <a href="#constraint_70">constraint</a>) = Array.<a href="array.html#length_17">length</a> con.<a href="#a_71">a</a> = <a href="#n_46">n</a>

  <span class="keyword">function</span> <a name="dot_78">dot</a> (a b: <a href="array.html#array_15">array</a> real) : real =
    <a href="#sum_7">sum</a> (<span class="keyword">fun</span> i -&gt; a[i] <a href="real.html#infix%20*._71">*.</a> b[i]) 0 <a href="#n_46">n</a>

  <span class="keyword">predicate</span> <a name="sat_constraint_81">sat_constraint</a> (sol: <a href="array.html#array_15">array</a> real) (con: <a href="#constraint_70">constraint</a>) =
    <span class="keyword">match</span> con.<a href="#s_73">s</a> <span class="keyword">with</span>
    | <a href="#Leq_56">Leq</a> -&gt; <a href="#dot_78">dot</a> con.<a href="#a_71">a</a> sol <a href="real.html#infix%20%3C=._77">&lt;=.</a> con.<a href="#b_72">b</a>
    | <a href="#Geq_57">Geq</a> -&gt; <a href="#dot_78">dot</a> con.<a href="#a_71">a</a> sol <a href="real.html#infix%20%3E=._78">&gt;=.</a> con.<a href="#b_72">b</a>
    | <a href="#Eq_58">Eq</a> -&gt; <a href="#dot_78">dot</a> con.<a href="#a_71">a</a> sol = con.<a href="#b_72">b</a>
    <span class="keyword">end</span>

  <span class="keyword">type</span> <a name="objective_sense_88">objective_sense</a> =
    | <a name="Min_89">Min</a>
    | <a name="Max_90">Max</a>

  <span class="keyword">type</span> <a name="objective_function_92">objective_function</a> = {
    <a name="c_93">c</a> : <a href="array.html#array_15">array</a> real;
    <a name="sense_94">sense</a> : <a href="#objective_sense_88">objective_sense</a>;
    }

  <span class="keyword">predicate</span> <a name="is_objective_function_97">is_objective_function</a> (obj_func: <a href="#objective_function_92">objective_function</a>) = Array.<a href="array.html#length_17">length</a> obj_func.<a href="#c_93">c</a> = <a href="#n_46">n</a>

  <span class="keyword">type</span> <a name="lower_bound_99">lower_bound</a> =
    | <a name="LNone_100">LNone</a>
    | <a name="LNum_101">LNum</a> real

  <span class="keyword">type</span> <a name="upper_bound_103">upper_bound</a> =
    | <a name="UNone_104">UNone</a>
    | <a name="UNum_105">UNum</a> real

  <span class="keyword">type</span> <a name="interval_107">interval</a> = {
    <a name="lb_108">lb</a>: <a href="#lower_bound_99">lower_bound</a>;
    <a name="ub_109">ub</a>: <a href="#upper_bound_103">upper_bound</a>
    }

  <span class="keyword">type</span> <a name="rtp_type_112">rtp_type</a> =
    | <a name="Infeasible_113">Infeasible</a>
    | <a name="Interval_114">Interval</a> <a href="#interval_107">interval</a>

  <span class="keyword">type</span> <a name="reason_117">reason</a> =
    | <a name="Asm_118">Asm</a>
    | <a name="Lin_119">Lin</a>
    | <a name="Rnd_120">Rnd</a>
    | <a name="Uns_121">Uns</a>
    | <a name="Sol_122">Sol</a>

  <span class="keyword">type</span> <a name="reason_data_124">reason_data</a> =
    | <a name="D_none_125">D_none</a>                      <span class="comment">(* for Asm and Sol *)</span>
    | <a name="D_lin_comb_126">D_lin_comb</a> (<a href="array.html#array_15">array</a> real)      <span class="comment">(* for Lin and Rnd: dense array of length d *)</span>
    | <a name="D_uns_127">D_uns</a> (<a href="array.html#array_15">array</a> int)            <span class="comment">(* for Uns: array of 4 indices in [0, d) *)</span>

  <span class="keyword">predicate</span> <a name="in_range_130">in_range</a> (x:int) (ub:int) =
    Int. (0 <a href="int.html#infix%20%3C=_25">&lt;=</a> x) /\ (x <a href="int.html#infix%20%3C_21">&lt;</a> ub)

  <span class="keyword">predicate</span> <a name="valid_reason_data_133">valid_reason_data</a> (r: <a href="#reason_117">reason</a>) (rd: <a href="#reason_data_124">reason_data</a>) =
    ((r = <a href="#Asm_118">Asm</a> \/ r = <a href="#Sol_122">Sol</a>) /\ rd = <a href="#D_none_125">D_none</a>) \/
    ((r = <a href="#Lin_119">Lin</a> \/ r = <a href="#Rnd_120">Rnd</a>) /\ (<span class="keyword">exists</span> arr. rd = <a href="#D_lin_comb_126">D_lin_comb</a> arr /\ Array.<a href="array.html#length_17">length</a> arr = <a href="#d_48">d</a>))
    \/ (r = <a href="#Uns_121">Uns</a> /\ (<span class="keyword">exists</span> arr. rd = <a href="#D_uns_127">D_uns</a> arr /\ Array.<a href="array.html#length_17">length</a> arr = 4
    /\ (<span class="keyword">forall</span> i:int. <a href="#in_range_130">in_range</a> i 4 -&gt; <a href="#in_range_130">in_range</a> arr[i] <a href="#d_48">d</a> )))

  <span class="comment">(* Def. 8 *)</span>
  <span class="keyword">type</span> <a name="derived_constraint_141">derived_constraint</a> = {
    <a name="con_142">con</a>: <a href="#constraint_70">constraint</a>;
    <a name="rsn_143">rsn</a>: <a href="#reason_117">reason</a>;
    <a name="data_144">data</a>: <a href="#reason_data_124">reason_data</a>;
    <a name="a_set_145">a_set</a>: <a href="set.html#set_27">set</a> int; <span class="comment">(*assumption set*)</span>
    }

   <span class="comment">(* predicate for Def. 8 check in paper *)</span>
  <span class="keyword">predicate</span> <a name="is_der_con_149">is_der_con</a> (dc: <a href="#derived_constraint_141">derived_constraint</a>) =
    <a href="#is_constraint_76">is_constraint</a> dc.<a href="#con_142">con</a> /\ <a href="#valid_reason_data_133">valid_reason_data</a> dc.<a href="#rsn_143">rsn</a> dc.<a href="#data_144">data</a> /\
    <span class="keyword">forall</span> i: int. <a href="set.html#mem_33">mem</a> i dc.<a href="#a_set_145">a_set</a> -&gt; (<a href="#m_47">m</a> <a href="int.html#infix%20%3C=_25">&lt;=</a> i) /\ (i <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a>)

  <span class="keyword">lemma</span> <a name="valid_reason_data_Asm'lemma_154">valid_reason_data_Asm</a>:
    <a href="#valid_reason_data_133">valid_reason_data</a> <a href="#Asm_118">Asm</a> <a href="#D_none_125">D_none</a>

  <span class="keyword">lemma</span> <a name="valid_reason_data_does_imply_data_none'lemma_157">valid_reason_data_does_imply_data_none</a>:
  <span class="keyword">forall</span> rsn: <a href="#reason_117">reason</a>, dat: <a href="#reason_data_124">reason_data</a>.
    <a href="#valid_reason_data_133">valid_reason_data</a> rsn dat -&gt; rsn = <a href="#Asm_118">Asm</a> -&gt; dat = <a href="#D_none_125">D_none</a>

  <span class="keyword">type</span> <a name="certificate_162">certificate</a> = {
    <a name="cINT_163">cINT</a>: <a href="set.html#set_27">set</a> int;
    <a name="cOBJ_164">cOBJ</a>: <a href="#objective_function_92">objective_function</a>;
    <a name="cCON_165">cCON</a>: <a href="array.html#array_15">array</a> <a href="#constraint_70">constraint</a>;
    <a name="cRTP_166">cRTP</a>: <a href="#rtp_type_112">rtp_type</a>;
    <a name="cSOL_167">cSOL</a>: <a href="set.html#set_27">set</a> (<a href="array.html#array_15">array</a> real); <span class="comment">(* check that each array has length n below *)</span>
    <a name="cDER_168">cDER</a>: <a href="array.html#array_15">array</a> <a href="#derived_constraint_141">derived_constraint</a>;
    }

  <span class="keyword">predicate</span> <a name="is_asm_index_171">is_asm_index</a> (cert: <a href="#certificate_162">certificate</a>) (i: int) =
    (<a href="#m_47">m</a> <a href="int.html#infix%20%3C=_25">&lt;=</a> i) /\  (i <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a>) /\
    <span class="keyword">let</span> j = (i <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>) <span class="keyword">in</span>
    <a href="#in_range_130">in_range</a> j (<a href="array.html#length_17">length</a> cert.<a href="#cDER_168">cDER</a>) /\
    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[j] <span class="keyword">in</span>
    dc.<a href="#rsn_143">rsn</a> = <a href="#Asm_118">Asm</a>

  <span class="comment">(* Def. 9 check all dimensions and all other requirements *)</span>
  <span class="keyword">predicate</span> <a name="is_cert_179">is_cert</a> (cert: <a href="#certificate_162">certificate</a>) =
    (<span class="keyword">forall</span> i: int. <a href="set.html#mem_33">mem</a> i cert.<a href="#cINT_163">cINT</a> -&gt; <a href="#in_range_130">in_range</a> i <a href="#n_46">n</a>) /\
    (<a href="#is_objective_function_97">is_objective_function</a> cert.<a href="#cOBJ_164">cOBJ</a>) /\
    (<a href="array.html#length_17">length</a> cert.<a href="#cCON_165">cCON</a> = <a href="#m_47">m</a>) /\ (<span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#m_47">m</a> -&gt; <a href="#is_constraint_76">is_constraint</a> cert.<a href="#cCON_165">cCON</a>[i]) /\
    (<span class="keyword">forall</span> sol: (<a href="array.html#array_15">array</a> real). <a href="set.html#mem_33">mem</a> sol cert.<a href="#cSOL_167">cSOL</a> -&gt; <a href="array.html#length_17">length</a> sol = <a href="#n_46">n</a>) /\
    <span class="comment">(* derived constraint predicates *)</span>
    (<a href="array.html#length_17">length</a> cert.<a href="#cDER_168">cDER</a> = (<a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>)) /\ <span class="comment">(* length of DER is d-m *)</span>
    (<span class="keyword">forall</span> idx: int. <a href="#in_range_130">in_range</a> idx (<a href="array.html#length_17">length</a> cert.<a href="#cDER_168">cDER</a>) -&gt; <a href="#is_der_con_149">is_der_con</a> cert.<a href="#cDER_168">cDER</a>[idx]) /\ <span class="comment">(* each one is a derived constraint *)</span>
    (<span class="keyword">forall</span> idx: int. <a href="#in_range_130">in_range</a> idx (<a href="array.html#length_17">length</a> cert.<a href="#cDER_168">cDER</a>) -&gt;
      <span class="keyword">forall</span> i: int. <a href="set.html#mem_33">mem</a> i cert.<a href="#cDER_168">cDER</a>[idx].<a href="#a_set_145">a_set</a> -&gt; <a href="#is_asm_index_171">is_asm_index</a> cert i) <span class="comment">(* all assumptions of each one are assumptions and have smaller index *)</span>

<span class="keyword">end</span>

<span class="keyword">theory</span> <a name="VIPRHelpers_">VIPRHelpers</a>

  <span class="keyword">use</span> <a href="#VIPRCertificate_">VIPRCertificate</a>
  <span class="keyword">use</span> real.<a href="real.html#RealInfix_">RealInfix</a>
  <span class="keyword">use</span> real.<a href="real.html#FromInt_">FromInt</a>
  <span class="keyword">use</span> real.<a href="real.html#Truncate_">Truncate</a>
  <span class="keyword">use</span> int.<a href="int.html#Int_">Int</a>
  <span class="keyword">use</span> array.<a href="array.html#Array_">Array</a>
  <span class="keyword">use</span> set.<a href="set.html#Set_">Set</a>
  <span class="keyword">use</span> <a href="#Sum_">Sum</a>
  <span class="keyword">use</span> <a href="#Init_">Init</a>

  <span class="comment">(* Defining generalied versions of signs and constraints for linear combination constraints *)</span>
  <span class="keyword">type</span> <a name="generalized_sign_205">generalized_sign</a> =
    | <a name="Sign_206">Sign</a> <a href="#sign_55">sign</a>
    | <a name="SNone_207">SNone</a>
  <span class="keyword">type</span> <a name="generalized_constraint_208">generalized_constraint</a> = {
    <a name="lhs_209">lhs</a>: <a href="array.html#array_15">array</a> real;
    <a name="rhs_210">rhs</a>: real;
    <a name="sgn_211">sgn</a>: <a href="#generalized_sign_205">generalized_sign</a>
    }
  <span class="keyword">function</span> <a name="get_constraint_213">get_constraint</a> (cert: <a href="#certificate_162">certificate</a>) (k: int) : <a href="#constraint_70">constraint</a> =
    <span class="keyword">if</span> (k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#m_47">m</a>) <span class="keyword">then</span> cert.<a href="#cCON_165">cCON</a>[k] <span class="keyword">else</span> cert.<a href="#cDER_168">cDER</a>[k <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>].<a href="#con_142">con</a>

   <span class="comment">(* predicate for Def.2 *)</span>
  <span class="keyword">predicate</span> <a name="is_absurdity_217">is_absurdity</a> (con: <a href="#constraint_70">constraint</a>) =
    (<span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#n_46">n</a> -&gt; con.<a href="#a_71">a</a>[i] = 0.0) /\
    <span class="keyword">match</span> con.<a href="#s_73">s</a> <span class="keyword">with</span>
    | <a href="#Geq_57">Geq</a> -&gt;  con.<a href="#b_72">b</a> <a href="real.html#infix%20%3E._80">&gt;.</a> 0.0
    | <a href="#Leq_56">Leq</a> -&gt;  con.<a href="#b_72">b</a> <a href="real.html#infix%20%3C._79">&lt;.</a> 0.0
    | <a href="#Eq_58">Eq</a> -&gt; con.<a href="#b_72">b</a> &lt;&gt; 0.0
    <span class="keyword">end</span>

    <span class="comment">(* predicate for Def.3 *)</span>
  <span class="keyword">predicate</span> <a name="con_dom_con_226">con_dom_con</a> (c1: <a href="#constraint_70">constraint</a>) (c2: <a href="#constraint_70">constraint</a>) =
    <a href="#is_absurdity_217">is_absurdity</a> c1 \/
     (
     (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j <a href="#n_46">n</a> -&gt; c1.<a href="#a_71">a</a>[j] = c2.<a href="#a_71">a</a>[j]) /\
     ((c1.<a href="#s_73">s</a> = <a href="#Eq_58">Eq</a> /\ c2.<a href="#s_73">s</a> = <a href="#Geq_57">Geq</a> /\ c1.<a href="#b_72">b</a> <a href="real.html#infix%20%3E=._78">&gt;=.</a> c2.<a href="#b_72">b</a>) \/
     (c1.<a href="#s_73">s</a> = <a href="#Eq_58">Eq</a> /\ c2.<a href="#s_73">s</a> = <a href="#Eq_58">Eq</a>  /\ c1.<a href="#b_72">b</a> = c2.<a href="#b_72">b</a>) \/
     (c1.<a href="#s_73">s</a> = <a href="#Eq_58">Eq</a> /\ c2.<a href="#s_73">s</a> = <a href="#Leq_56">Leq</a> /\ c1.<a href="#b_72">b</a> <a href="real.html#infix%20%3C=._77">&lt;=.</a> c2.<a href="#b_72">b</a>) \/
     (c1.<a href="#s_73">s</a> = <a href="#Geq_57">Geq</a> /\ c2.<a href="#s_73">s</a> = <a href="#Geq_57">Geq</a> /\ c1.<a href="#b_72">b</a> <a href="real.html#infix%20%3E=._78">&gt;=.</a> c2.<a href="#b_72">b</a>) \/
     (c1.<a href="#s_73">s</a> = <a href="#Leq_56">Leq</a> /\ c2.<a href="#s_73">s</a> = <a href="#Leq_56">Leq</a> /\ c1.<a href="#b_72">b</a> <a href="real.html#infix%20%3C=._77">&lt;=.</a> c2.<a href="#b_72">b</a>))
     )

  <span class="keyword">predicate</span> <a name="gen_con_dom_con_238">gen_con_dom_con</a> (c1: <a href="#generalized_constraint_208">generalized_constraint</a>) (c2: <a href="#constraint_70">constraint</a>) =
    <span class="keyword">match</span> c1.<a href="#sgn_211">sgn</a> <span class="keyword">with</span>
    | <a href="#SNone_207">SNone</a> -&gt; <span class="keyword">false</span>
    | <a href="#Sign_206">Sign</a> sign -&gt; <a href="#con_dom_con_226">con_dom_con</a> { <a href="#a_71">a</a> = c1.<a href="#lhs_209">lhs</a>; <a href="#b_72">b</a> = c1.<a href="#rhs_210">rhs</a>; <a href="#s_73">s</a> = sign } c2
    <span class="keyword">end</span>

   <span class="comment">(* Def. 6 considering nz points, see Def. 7 in paper *)</span>
  <span class="keyword">function</span> <a name="get_lin_comb_246">get_lin_comb</a> <span class="comment">(*Below: length weights = d *)</span>
    (cert: <a href="#certificate_162">certificate</a>) (weights: <a href="array.html#array_15">array</a> real) : <a href="#generalized_constraint_208">generalized_constraint</a> =
    {
      <a href="#lhs_209">lhs</a> = <a href="#init_20">init</a> <a href="#n_46">n</a> (<span class="keyword">fun</span> j -&gt; (<a href="#sum_7">sum</a> (<span class="keyword">fun</span> i -&gt; weights[i] <a href="real.html#infix%20*._71">*.</a> (<a href="#get_constraint_213">get_constraint</a> cert i).<a href="#a_71">a</a>[j]) 0 <a href="#d_48">d</a>));
      <a href="#rhs_210">rhs</a> = <a href="#sum_7">sum</a> (<span class="keyword">fun</span> i -&gt; weights[i] <a href="real.html#infix%20*._71">*.</a> (<a href="#get_constraint_213">get_constraint</a> cert i).<a href="#b_72">b</a>) 0 <a href="#d_48">d</a>;
      <a href="#sgn_211">sgn</a> =
        <span class="keyword">let</span> sgn_prod =
          <span class="keyword">fun</span> i -&gt; weights[i] <a href="real.html#infix%20*._71">*.</a> (<a href="real.html#from_int_129">from_int</a> (<a href="#sign_to_int_60">sign_to_int</a> (<a href="#get_constraint_213">get_constraint</a> cert i).<a href="#s_73">s</a>))
        <span class="keyword">in</span>
        <span class="keyword">let</span> all_nonneg : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a>  /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i <a href="real.html#infix%20%3E=._78">&gt;=.</a> 0.0 <span class="keyword">in</span> <span class="comment">(* indexes non-zero weights *)</span>
        <span class="keyword">let</span> some_pos   : bool = <span class="keyword">exists</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0) /\ sgn_prod i <a href="real.html#infix%20%3E._80">&gt;.</a> 0.0 <span class="keyword">in</span>
        <span class="keyword">let</span> all_zero   : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i = 0.0 <span class="keyword">in</span>
        <span class="keyword">let</span> all_nonpos : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i <a href="real.html#infix%20%3C=._77">&lt;=.</a> 0.0 <span class="keyword">in</span>
        <span class="keyword">let</span> some_neg   : bool = <span class="keyword">exists</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a>  /\ (weights[i] &lt;&gt; 0.0) /\ sgn_prod i <a href="real.html#infix%20%3C._79">&lt;.</a> 0.0 <span class="keyword">in</span>
          <span class="keyword">if</span> all_nonneg /\ some_pos <span class="keyword">then</span> <a href="#Sign_206">Sign</a> <a href="#Geq_57">Geq</a>
          <span class="keyword">else</span> <span class="keyword">if</span> all_zero <span class="keyword">then</span> <a href="#Sign_206">Sign</a> <a href="#Eq_58">Eq</a>
          <span class="keyword">else</span> <span class="keyword">if</span> all_nonpos /\ some_neg <span class="keyword">then</span> <a href="#Sign_206">Sign</a> <a href="#Leq_56">Leq</a>
          <span class="keyword">else</span> <a href="#SNone_207">SNone</a>
    }

  <span class="comment">(* Rnd versions of above, part of Def. 5 *)</span>
  <span class="keyword">predicate</span> <a name="roundable_268">roundable</a> (cert: <a href="#certificate_162">certificate</a>) (con: <a href="#constraint_70">constraint</a>) =
    con.<a href="#s_73">s</a> &lt;&gt; <a href="#Eq_58">Eq</a> /\
    <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#n_46">n</a> -&gt;
      <span class="keyword">if</span> <a href="set.html#mem_33">mem</a> i cert.<a href="#cINT_163">cINT</a> <span class="keyword">then</span> <a href="#is_integer_40">is_integer</a> con.<a href="#a_71">a</a>[i] <span class="keyword">else</span> con.<a href="#a_71">a</a>[i] = 0.0

   <span class="comment">(* part of Def.5 *)</span>
  <span class="keyword">function</span> <a name="rnd_274">rnd</a> (cert: <a href="#certificate_162">certificate</a>) (con: <a href="#constraint_70">constraint</a>) : <a href="#constraint_70">constraint</a> =
    <span class="keyword">if</span> <span class="keyword">not</span> <a href="#roundable_268">roundable</a> cert con <span class="keyword">then</span> con <span class="keyword">else</span>
      <span class="keyword">match</span> con.<a href="#s_73">s</a> <span class="keyword">with</span>
      | <a href="#Geq_57">Geq</a> -&gt; { <a href="#a_71">a</a> = con.<a href="#a_71">a</a>; <a href="#b_72">b</a> = (<a href="real.html#from_int_129">from_int</a> (<a href="real.html#ceil_184">ceil</a> con.<a href="#b_72">b</a>)); <a href="#s_73">s</a> = <a href="#Geq_57">Geq</a> }
      | <a href="#Leq_56">Leq</a> -&gt; { <a href="#a_71">a</a> = con.<a href="#a_71">a</a>; <a href="#b_72">b</a> = (<a href="real.html#from_int_129">from_int</a> (<a href="real.html#floor_183">floor</a> con.<a href="#b_72">b</a>)); <a href="#s_73">s</a> = <a href="#Leq_56">Leq</a> }
      | <a href="#Eq_58">Eq</a> -&gt; con
      <span class="keyword">end</span>

  <span class="keyword">predicate</span> <a name="rnd_con_dom_con_282">rnd_con_dom_con</a> (cert: <a href="#certificate_162">certificate</a>) (c1: <a href="#constraint_70">constraint</a>) (c2: <a href="#constraint_70">constraint</a>) =
    <span class="keyword">if</span> <a href="#roundable_268">roundable</a> cert c1 <span class="keyword">then</span> <a href="#con_dom_con_226">con_dom_con</a> (<a href="#rnd_274">rnd</a> cert c1) c2 <span class="keyword">else</span> <span class="keyword">false</span>

  <span class="keyword">predicate</span> <a name="rnd_gen_con_dom_con_285">rnd_gen_con_dom_con</a> (cert: <a href="#certificate_162">certificate</a>) (c1: <a href="#generalized_constraint_208">generalized_constraint</a>) (c2: <a href="#constraint_70">constraint</a>) =
    <span class="keyword">match</span> c1.<a href="#sgn_211">sgn</a> <span class="keyword">with</span>
    | <a href="#SNone_207">SNone</a> -&gt; <span class="keyword">false</span>
    | <a href="#Sign_206">Sign</a> sign -&gt; <a href="#rnd_con_dom_con_282">rnd_con_dom_con</a> cert { <a href="#a_71">a</a> = c1.<a href="#lhs_209">lhs</a>; <a href="#b_72">b</a> = c1.<a href="#rhs_210">rhs</a>; <a href="#s_73">s</a> = sign } c2
    <span class="keyword">end</span>

   <span class="comment">(* predicate for Def. 4 *)</span>
  <span class="keyword">predicate</span> <a name="is_disjunction_292">is_disjunction</a> (cert: <a href="#certificate_162">certificate</a>) (c1: <a href="#constraint_70">constraint</a>) (c2: <a href="#constraint_70">constraint</a>) =
    (<span class="keyword">forall</span> k: int. <a href="#in_range_130">in_range</a> k <a href="#n_46">n</a> -&gt; c1.<a href="#a_71">a</a>[k] = c2.<a href="#a_71">a</a>[k]) /\ (<span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#n_46">n</a> -&gt;
    <span class="keyword">if</span> <a href="set.html#mem_33">mem</a> i cert.<a href="#cINT_163">cINT</a> <span class="keyword">then</span> <a href="#is_integer_40">is_integer</a> c1.<a href="#a_71">a</a>[i] <span class="keyword">else</span> c1.<a href="#a_71">a</a>[i] = 0.0) /\
    (<a href="#is_integer_40">is_integer</a> c1.<a href="#b_72">b</a> /\ <a href="#is_integer_40">is_integer</a> c2.<a href="#b_72">b</a>) /\
      <span class="keyword">match</span> c1.<a href="#s_73">s</a>, c2.<a href="#s_73">s</a> <span class="keyword">with</span>
      | <a href="#Geq_57">Geq</a>, <a href="#Leq_56">Leq</a> -&gt; c1.<a href="#b_72">b</a> <a href="real.html#infix%20-._70">-.</a> c2.<a href="#b_72">b</a> = 1.0
      | <a href="#Leq_56">Leq</a>, <a href="#Geq_57">Geq</a> -&gt; c2.<a href="#b_72">b</a> <a href="real.html#infix%20-._70">-.</a> c1.<a href="#b_72">b</a> = 1.0
      | _, _ -&gt; <span class="keyword">false</span>
      <span class="keyword">end</span>

  <span class="keyword">predicate</span> <a name="is_asm_of_302">is_asm_of</a> (cert: <a href="#certificate_162">certificate</a>) (j i: int) = <span class="comment">(* is j in A(C_i) *)</span>
    <span class="keyword">if</span> <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ <span class="keyword">not</span> (<a href="#in_range_130">in_range</a> i <a href="#m_47">m</a>) <span class="keyword">then</span> <a href="set.html#mem_33">mem</a> j cert.<a href="#cDER_168">cDER</a>[i <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>].<a href="#a_set_145">a_set</a> <span class="keyword">else</span> <span class="keyword">false</span>

<span class="keyword">end</span>

<span class="keyword">theory</span> <a name="VIPRValidity_">VIPRValidity</a>

  <span class="keyword">use</span> <a href="#VIPRCertificate_">VIPRCertificate</a>
  <span class="keyword">use</span> <a href="#VIPRHelpers_">VIPRHelpers</a>
  <span class="keyword">use</span> real.<a href="real.html#RealInfix_">RealInfix</a>
  <span class="keyword">use</span> real.<a href="real.html#FromInt_">FromInt</a>
  <span class="keyword">use</span> int.<a href="int.html#Int_">Int</a>
  <span class="keyword">use</span> array.<a href="array.html#Array_">Array</a>
  <span class="keyword">use</span> set.<a href="set.html#Set_">Set</a>

  <span class="keyword">predicate</span> <a name="valid_FEAS_317">valid_FEAS</a> (cert: <a href="#certificate_162">certificate</a>) =
    <span class="keyword">forall</span> sol: (<a href="array.html#array_15">array</a> real). <a href="set.html#mem_33">mem</a> sol cert.<a href="#cSOL_167">cSOL</a> -&gt;
      (<span class="keyword">forall</span> j: int. <a href="set.html#mem_33">mem</a> j cert.<a href="#cINT_163">cINT</a> -&gt; <a href="#is_integer_40">is_integer</a> sol[j]) /\
      (<span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#m_47">m</a> -&gt; <a href="#sat_constraint_81">sat_constraint</a> sol cert.<a href="#cCON_165">cCON</a>[i])

  <span class="comment">(* predicate for Def. 11 *)</span>
  <span class="keyword">predicate</span> <a name="valid_SOL_323">valid_SOL</a> (cert: <a href="#certificate_162">certificate</a>) =
    <span class="keyword">match</span> cert.<a href="#cRTP_166">cRTP</a> <span class="keyword">with</span>
    | <a href="#Infeasible_113">Infeasible</a> -&gt; <a href="set.html#is_empty_51">is_empty</a> cert.<a href="#cSOL_167">cSOL</a>
    | <a href="#Interval_114">Interval</a> interval -&gt; <a href="#valid_FEAS_317">valid_FEAS</a> cert /\
      <span class="keyword">match</span> interval.<a href="#ub_109">ub</a> <span class="keyword">with</span>
      | <a href="#UNone_104">UNone</a> -&gt; <span class="keyword">true</span>
      | <a href="#UNum_105">UNum</a> upper -&gt; (cert.<a href="#cOBJ_164">cOBJ</a>.<a href="#sense_94">sense</a> = <a href="#Min_89">Min</a> -&gt;
        <span class="keyword">exists</span> x: <a href="array.html#array_15">array</a> real. <a href="set.html#mem_33">mem</a> x cert.<a href="#cSOL_167">cSOL</a> /\ <a href="#sat_constraint_81">sat_constraint</a> x { <a href="#a_71">a</a> = cert.<a href="#cOBJ_164">cOBJ</a>.<a href="#c_93">c</a>; <a href="#b_72">b</a> = upper; <a href="#s_73">s</a> = <a href="#Leq_56">Leq</a> })
      <span class="keyword">end</span> /\
      <span class="keyword">match</span> interval.<a href="#lb_108">lb</a> <span class="keyword">with</span>
      | <a href="#LNone_100">LNone</a> -&gt; <span class="keyword">true</span>
      | <a href="#LNum_101">LNum</a> lower -&gt; (cert.<a href="#cOBJ_164">cOBJ</a>.<a href="#sense_94">sense</a> = <a href="#Max_90">Max</a> -&gt;
        <span class="keyword">exists</span> x: <a href="array.html#array_15">array</a> real. <a href="set.html#mem_33">mem</a> x cert.<a href="#cSOL_167">cSOL</a> /\ <a href="#sat_constraint_81">sat_constraint</a> x { <a href="#a_71">a</a> = cert.<a href="#cOBJ_164">cOBJ</a>.<a href="#c_93">c</a>; <a href="#b_72">b</a> = lower; <a href="#s_73">s</a> = <a href="#Geq_57">Geq</a> })
      <span class="keyword">end</span>
    <span class="keyword">end</span>

  <span class="comment">(* all validity assumptions here *)</span>
  <span class="keyword">predicate</span> <a name="val_ASM_341">val_ASM</a> (cert: <a href="#certificate_162">certificate</a>) (k: int) =
    <span class="keyword">let</span> k_total = (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) <span class="keyword">in</span>
    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>
    (<span class="keyword">forall</span> i: int. <a href="set.html#mem_33">mem</a> i dc.<a href="#a_set_145">a_set</a> -&gt; ((i <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>) <a href="int.html#infix%20%3C=_25">&lt;=</a> k)) /\
    <span class="keyword">match</span> dc.<a href="#rsn_143">rsn</a>, dc.<a href="#data_144">data</a> <span class="keyword">with</span>
    | <a href="#Asm_118">Asm</a>, <a href="#D_none_125">D_none</a> -&gt; dc.<a href="#a_set_145">a_set</a> = <a href="set.html#add_64">add</a> (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) <a href="set.html#empty_53">empty</a>

    | <a href="#Lin_119">Lin</a>, <a href="#D_lin_comb_126">D_lin_comb</a> weights | <a href="#Rnd_120">Rnd</a>, <a href="#D_lin_comb_126">D_lin_comb</a> weights -&gt;  ( (<span class="keyword">forall</span> j: int. <a href="set.html#mem_33">mem</a> j dc.<a href="#a_set_145">a_set</a> &lt;-&gt; <span class="keyword">exists</span> i: int.
         weights[i] &lt;&gt; 0.0 /\ (<a href="#m_47">m</a> <a href="int.html#infix%20%3C=_25">&lt;=</a> i) /\ (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total) /\ <a href="set.html#mem_33">mem</a> j cert.<a href="#cDER_168">cDER</a>[i <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>].<a href="#a_set_145">a_set</a>) /\
       (<span class="keyword">forall</span> i:int. weights[i] &lt;&gt; 0.0 /\ (<a href="#m_47">m</a> <a href="int.html#infix%20%3C=_25">&lt;=</a> i) /\ (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total) -&gt;
        <span class="keyword">forall</span> j:int. <a href="set.html#mem_33">mem</a> j cert.<a href="#cDER_168">cDER</a>[i <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>].<a href="#a_set_145">a_set</a> -&gt; <a href="set.html#mem_33">mem</a> j dc.<a href="#a_set_145">a_set</a>) )   <span class="comment">(*asumption set of derived constraints is exactly the union of inherited assumptions*)</span>

    | <a href="#Uns_121">Uns</a>, <a href="#D_uns_127">D_uns</a> indices -&gt;
       <span class="keyword">let</span> i1 = indices[0] <span class="keyword">in</span>
       <span class="keyword">let</span> l1 = indices[1] <span class="keyword">in</span>
       <span class="keyword">let</span> i2 = indices[2] <span class="keyword">in</span>
       <span class="keyword">let</span> l2 = indices[3] <span class="keyword">in</span>
       <span class="keyword">forall</span> j: int.
          <a href="#is_asm_of_302">is_asm_of</a> cert j k_total &lt;-&gt; (
            (<a href="#is_asm_of_302">is_asm_of</a> cert j i1 /\ j &lt;&gt; l1) \/
            (<a href="#is_asm_of_302">is_asm_of</a> cert j i2 /\ j &lt;&gt; l2)
          )
    | <a href="#Sol_122">Sol</a>, <a href="#D_none_125">D_none</a> -&gt; <a href="set.html#is_empty_51">is_empty</a> dc.<a href="#a_set_145">a_set</a>
    | _, _ -&gt; <span class="keyword">false</span>
    <span class="keyword">end</span>

    <span class="comment">(* predicate for Def. 10 *)</span>
   <span class="keyword">predicate</span> <a name="valid_DER_k_368">valid_DER_k</a> (cert: <a href="#certificate_162">certificate</a>) (k: int) =
    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>
    <span class="keyword">let</span> k_total = (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) <span class="keyword">in</span>
    <a href="#val_ASM_341">val_ASM</a> cert k /\
    <span class="keyword">match</span> dc.<a href="#rsn_143">rsn</a>, dc.<a href="#data_144">data</a> <span class="keyword">with</span>
    | <a href="#Asm_118">Asm</a>, <a href="#D_none_125">D_none</a> -&gt; <span class="keyword">true</span>
    | <a href="#Lin_119">Lin</a>, <a href="#D_lin_comb_126">D_lin_comb</a> weights -&gt;
         (<span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ weights[i] &lt;&gt; 0.0 -&gt; (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total)) /\
        (<a href="#gen_con_dom_con_238">gen_con_dom_con</a> (<a href="#get_lin_comb_246">get_lin_comb</a> cert weights) dc.<a href="#con_142">con</a>)

     | <a href="#Rnd_120">Rnd</a>, <a href="#D_lin_comb_126">D_lin_comb</a> weights -&gt;
        (<span class="keyword">forall</span> i:int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ weights[i] &lt;&gt; 0.0 -&gt; (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total)) /\
        (<a href="#rnd_gen_con_dom_con_285">rnd_gen_con_dom_con</a> cert (<a href="#get_lin_comb_246">get_lin_comb</a> cert weights) dc.<a href="#con_142">con</a>)

    | <a href="#Uns_121">Uns</a>, <a href="#D_uns_127">D_uns</a> indices -&gt;
        <span class="keyword">let</span> i1 = indices[0] <span class="keyword">in</span>
        <span class="keyword">let</span> l1 = indices[1] <span class="keyword">in</span>
        <span class="keyword">let</span> i2 = indices[2] <span class="keyword">in</span>
        <span class="keyword">let</span> l2 = indices[3] <span class="keyword">in</span>
        <a href="#in_range_130">in_range</a> i1 k_total /\ <a href="#in_range_130">in_range</a> l1 k_total /\ <a href="#in_range_130">in_range</a> i2 k_total /\ <a href="#in_range_130">in_range</a> l2 k_total /\
        <span class="keyword">let</span> ci1 = <a href="#get_constraint_213">get_constraint</a> cert i1 <span class="keyword">in</span>
        <span class="keyword">let</span> cl1 = <a href="#get_constraint_213">get_constraint</a> cert l1 <span class="keyword">in</span>
        <span class="keyword">let</span> ci2 = <a href="#get_constraint_213">get_constraint</a> cert i2 <span class="keyword">in</span>
        <span class="keyword">let</span> cl2 = <a href="#get_constraint_213">get_constraint</a> cert l2 <span class="keyword">in</span>
        <a href="#con_dom_con_226">con_dom_con</a> ci1 dc.<a href="#con_142">con</a> /\
        <a href="#con_dom_con_226">con_dom_con</a> ci2 dc.<a href="#con_142">con</a> /\
        <a href="#is_disjunction_292">is_disjunction</a> cert cl1 cl2

    | <a href="#Sol_122">Sol</a>, <a href="#D_none_125">D_none</a> -&gt;
         ((cert.<a href="#cOBJ_164">cOBJ</a>.<a href="#sense_94">sense</a> = <a href="#Min_89">Min</a> -&gt; <span class="keyword">exists</span> sol: <a href="array.html#array_15">array</a> real. <a href="set.html#mem_33">mem</a> sol cert.<a href="#cSOL_167">cSOL</a> /\
         <a href="#con_dom_con_226">con_dom_con</a> { <a href="#a_71">a</a> = cert.<a href="#cOBJ_164">cOBJ</a>.<a href="#c_93">c</a>; <a href="#b_72">b</a> = <a href="#dot_78">dot</a> cert.<a href="#cOBJ_164">cOBJ</a>.<a href="#c_93">c</a> sol; <a href="#s_73">s</a> = <a href="#Leq_56">Leq</a> } dc.<a href="#con_142">con</a>) /\ (cert.<a href="#cOBJ_164">cOBJ</a>.<a href="#sense_94">sense</a> = <a href="#Max_90">Max</a> -&gt;
         <span class="keyword">exists</span> sol: <a href="array.html#array_15">array</a> real. <a href="set.html#mem_33">mem</a> sol cert.<a href="#cSOL_167">cSOL</a> /\
         <a href="#con_dom_con_226">con_dom_con</a> { <a href="#a_71">a</a> = cert.<a href="#cOBJ_164">cOBJ</a>.<a href="#c_93">c</a>; <a href="#b_72">b</a> = <a href="#dot_78">dot</a> cert.<a href="#cOBJ_164">cOBJ</a>.<a href="#c_93">c</a> sol; <a href="#s_73">s</a> = <a href="#Geq_57">Geq</a> } dc.<a href="#con_142">con</a>))

    | _, _ -&gt; <span class="keyword">false</span>
    <span class="keyword">end</span>

  <span class="comment">(* predicate for Def. 12 *)</span>
  <span class="keyword">predicate</span> <a name="valid_DER_406">valid_DER</a> (cert: <a href="#certificate_162">certificate</a>) =
    (<span class="keyword">forall</span> k: int. <a href="#in_range_130">in_range</a> k (<a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>) -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert k) /\
    <span class="keyword">let</span> d_index = (<a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> 1) <span class="keyword">in</span>
    <span class="keyword">let</span> cd = <a href="#get_constraint_213">get_constraint</a> cert d_index
    <span class="keyword">in</span>
    <span class="keyword">match</span> cert.<a href="#cRTP_166">cRTP</a>, cert.<a href="#cOBJ_164">cOBJ</a>.<a href="#sense_94">sense</a> <span class="keyword">with</span>
    | <a href="#Infeasible_113">Infeasible</a>, _ -&gt; (<span class="keyword">forall</span> j: int. <span class="keyword">not</span> <a href="#is_asm_of_302">is_asm_of</a> cert j d_index) /\ <a href="#is_absurdity_217">is_absurdity</a> cd
    | <a href="#Interval_114">Interval</a> interval, <a href="#Min_89">Min</a> -&gt;
      <span class="keyword">match</span> interval.<a href="#lb_108">lb</a> <span class="keyword">with</span>
      | <a href="#LNone_100">LNone</a> -&gt; <span class="keyword">true</span>
      | <a href="#LNum_101">LNum</a> lower -&gt; <a href="#con_dom_con_226">con_dom_con</a> cd { <a href="#a_71">a</a> = cert.<a href="#cOBJ_164">cOBJ</a>.<a href="#c_93">c</a>; <a href="#b_72">b</a> = lower; <a href="#s_73">s</a> = <a href="#Geq_57">Geq</a> } /\
         <span class="keyword">forall</span> j: int. <span class="keyword">not</span> <a href="#is_asm_of_302">is_asm_of</a> cert j d_index
      <span class="keyword">end</span>
    | <a href="#Interval_114">Interval</a> interval, <a href="#Max_90">Max</a> -&gt;
      <span class="keyword">match</span> interval.<a href="#ub_109">ub</a> <span class="keyword">with</span>
      | <a href="#UNone_104">UNone</a> -&gt; <span class="keyword">true</span>
      | <a href="#UNum_105">UNum</a> upper -&gt; <a href="#con_dom_con_226">con_dom_con</a> cd { <a href="#a_71">a</a> = cert.<a href="#cOBJ_164">cOBJ</a>.<a href="#c_93">c</a>; <a href="#b_72">b</a> = upper; <a href="#s_73">s</a> = <a href="#Leq_56">Leq</a> } /\
         <span class="keyword">forall</span> j: int. <span class="keyword">not</span> <a href="#is_asm_of_302">is_asm_of</a> cert j d_index
      <span class="keyword">end</span>
    <span class="keyword">end</span>

  <span class="comment">(* predicate for Def. 13 *)</span>
  <span class="keyword">predicate</span> <a name="valid_428">valid</a> (cert: <a href="#certificate_162">certificate</a>) = <a href="#valid_SOL_323">valid_SOL</a> cert /\ <a href="#valid_DER_406">valid_DER</a> cert

<span class="keyword">end</span>

<span class="keyword">theory</span> <a name="VIPRPredicate_">VIPRPredicate</a>

  <span class="keyword">use</span> <a href="#VIPRCertificate_">VIPRCertificate</a>
  <span class="keyword">use</span> <a href="#VIPRHelpers_">VIPRHelpers</a>
  <span class="keyword">use</span> real.<a href="real.html#RealInfix_">RealInfix</a>
  <span class="keyword">use</span> real.<a href="real.html#FromInt_">FromInt</a>
  <span class="keyword">use</span> real.<a href="real.html#Truncate_">Truncate</a>
  <span class="keyword">use</span> <a href="#Sum_">Sum</a>
  <span class="keyword">use</span> int.<a href="int.html#Int_">Int</a>
  <span class="keyword">use</span> array.<a href="array.html#Array_">Array</a>
  <span class="keyword">use</span> set.<a href="set.html#Set_">Set</a>
  <span class="keyword">use</span> <a href="#Init_">Init</a>

   <span class="comment">(* predicate for Def. 15 *)</span>
  <span class="keyword">predicate</span> <a name="p_447">p</a> (cert: <a href="#certificate_162">certificate</a>) =
    <span class="keyword">match</span> cert.<a href="#cOBJ_164">cOBJ</a>.<a href="#sense_94">sense</a> <span class="keyword">with</span>
    | <a href="#Min_89">Min</a> -&gt; <span class="keyword">true</span>
    | <a href="#Max_90">Max</a> -&gt; <span class="keyword">false</span>
    <span class="keyword">end</span>

  <span class="comment">(* predicate for Def. 16 *)</span>
  <span class="keyword">predicate</span> <a name="r_454">r</a> (cert: <a href="#certificate_162">certificate</a>) =
    <span class="keyword">match</span> cert.<a href="#cRTP_166">cRTP</a> <span class="keyword">with</span>
    | <a href="#Infeasible_113">Infeasible</a> -&gt; <span class="keyword">false</span>
    | <a href="#Interval_114">Interval</a> _ -&gt; <span class="keyword">true</span>
    <span class="keyword">end</span>

  <span class="comment">(* predicate for Def. 17 *)</span>
  <span class="keyword">predicate</span> <a name="pub_461">pub</a> (cert: <a href="#certificate_162">certificate</a>) =
  (<span class="keyword">exists</span> i: <a href="#interval_107">interval</a>. cert.<a href="#cRTP_166">cRTP</a> = <a href="#Interval_114">Interval</a> i /\
    (<span class="keyword">exists</span> r: real. i.<a href="#ub_109">ub</a> = <a href="#UNum_105">UNum</a> r))

   <span class="comment">(* part of Def. 17 *)</span>
  <span class="keyword">function</span> <a name="u_466">u</a> (cert: <a href="#certificate_162">certificate</a>) : real =
    <span class="keyword">match</span> cert.<a href="#cRTP_166">cRTP</a> <span class="keyword">with</span>
    | <a href="#Interval_114">Interval</a> i -&gt;
      <span class="keyword">match</span> i.<a href="#ub_109">ub</a> <span class="keyword">with</span>
      | <a href="#UNone_104">UNone</a> -&gt; 0.0
      | <a href="#UNum_105">UNum</a> x -&gt; x
      <span class="keyword">end</span>
    | <a href="#Infeasible_113">Infeasible</a> -&gt; 0.0
    <span class="keyword">end</span>

    <span class="comment">(* predicate for Def. 17 *)</span>
  <span class="keyword">predicate</span> <a name="plb_477">plb</a> (cert: <a href="#certificate_162">certificate</a>) =
    (<span class="keyword">exists</span> i: <a href="#interval_107">interval</a>. cert.<a href="#cRTP_166">cRTP</a> = <a href="#Interval_114">Interval</a> i /\
    (<span class="keyword">exists</span> r: real. i.<a href="#lb_108">lb</a> = <a href="#LNum_101">LNum</a> r))

    <span class="comment">(* part of Def. 17 *)</span>
  <span class="keyword">function</span> <a name="l_482">l</a> (cert: <a href="#certificate_162">certificate</a>) : real =
    <span class="keyword">match</span> cert.<a href="#cRTP_166">cRTP</a> <span class="keyword">with</span>
    | <a href="#Interval_114">Interval</a> i -&gt;
      <span class="keyword">match</span> i.<a href="#lb_108">lb</a> <span class="keyword">with</span>
      | <a href="#LNone_100">LNone</a> -&gt; 0.0
      | <a href="#LNum_101">LNum</a> x -&gt; x
      <span class="keyword">end</span>
    | <a href="#Infeasible_113">Infeasible</a> -&gt; 0.0
    <span class="keyword">end</span>

  <span class="comment">(* predicate for Def. 18 *)</span>
  <span class="keyword">predicate</span> <a name="phi_FEAS_493">phi_FEAS</a> (cert: <a href="#certificate_162">certificate</a>) =
    <span class="keyword">forall</span> sol: (<a href="array.html#array_15">array</a> real). <a href="set.html#mem_33">mem</a> sol cert.<a href="#cSOL_167">cSOL</a> -&gt;
      (<span class="keyword">forall</span> j: int. <a href="set.html#mem_33">mem</a> j cert.<a href="#cINT_163">cINT</a> -&gt; <a href="#is_integer_40">is_integer</a> sol[j]) /\
      (<span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#m_47">m</a> -&gt;
        ((0 <a href="int.html#infix%20%3C=_25">&lt;=</a> (<a href="#sign_to_int_60">sign_to_int</a> cert.<a href="#cCON_165">cCON</a>[i].<a href="#s_73">s</a>)) -&gt; <a href="#dot_78">dot</a> cert.<a href="#cCON_165">cCON</a>[i].<a href="#a_71">a</a> sol <a href="real.html#infix%20%3E=._78">&gt;=.</a> cert.<a href="#cCON_165">cCON</a>[i].<a href="#b_72">b</a>) /\
        (((<a href="#sign_to_int_60">sign_to_int</a> cert.<a href="#cCON_165">cCON</a>[i].<a href="#s_73">s</a>) <a href="int.html#infix%20%3C=_25">&lt;=</a> 0) -&gt; <a href="#dot_78">dot</a> cert.<a href="#cCON_165">cCON</a>[i].<a href="#a_71">a</a> sol <a href="real.html#infix%20%3C=._77">&lt;=.</a> cert.<a href="#cCON_165">cCON</a>[i].<a href="#b_72">b</a>)
      )

  <span class="comment">(* predicate for Def. 19 *)</span>
  <span class="keyword">predicate</span> <a name="phi_SOL_502">phi_SOL</a> (cert: <a href="#certificate_162">certificate</a>) =
    <span class="keyword">if</span> <span class="keyword">not</span> <a href="#r_454">r</a> cert <span class="keyword">then</span> <a href="set.html#is_empty_51">is_empty</a> cert.<a href="#cSOL_167">cSOL</a> <span class="keyword">else</span>
    (<a href="#phi_FEAS_493">phi_FEAS</a> cert /\ (<span class="keyword">if</span> <a href="#p_447">p</a> cert <span class="keyword">then</span>
    (<a href="#pub_461">pub</a> cert -&gt;
      <span class="keyword">exists</span> sol: <a href="array.html#array_15">array</a> real. <a href="set.html#mem_33">mem</a> sol cert.<a href="#cSOL_167">cSOL</a> /\ <a href="#sat_constraint_81">sat_constraint</a> sol { <a href="#a_71">a</a> = cert.<a href="#cOBJ_164">cOBJ</a>.<a href="#c_93">c</a>; <a href="#b_72">b</a> = <a href="#u_466">u</a> cert; <a href="#s_73">s</a> = <a href="#Leq_56">Leq</a> }
    ) <span class="keyword">else</span>
    (<a href="#plb_477">plb</a> cert -&gt;
      <span class="keyword">exists</span> sol: <a href="array.html#array_15">array</a> real. <a href="set.html#mem_33">mem</a> sol cert.<a href="#cSOL_167">cSOL</a> /\ <a href="#sat_constraint_81">sat_constraint</a> sol { <a href="#a_71">a</a> = cert.<a href="#cOBJ_164">cOBJ</a>.<a href="#c_93">c</a>; <a href="#b_72">b</a> = <a href="#l_482">l</a> cert; <a href="#s_73">s</a> = <a href="#Geq_57">Geq</a> }
    )))

  <span class="comment">(* predicate for Def. 20 *)</span>
 <span class="keyword">predicate</span> <a name="phi_ASM_513">phi_ASM</a> (cert: <a href="#certificate_162">certificate</a>) (k: int) =
    <span class="keyword">let</span> k_total = (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) <span class="keyword">in</span>
    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>
    (<span class="keyword">forall</span> j: int. ((<a href="#is_asm_index_171">is_asm_index</a> cert j /\  (k_total <a href="int.html#infix%20%3C_21">&lt;</a> j)) -&gt; <span class="keyword">not</span> <a href="#is_asm_of_302">is_asm_of</a> cert j k_total)) /\
    <span class="keyword">match</span> dc.<a href="#rsn_143">rsn</a>, dc.<a href="#data_144">data</a> <span class="keyword">with</span>
    | <a href="#Asm_118">Asm</a>, <a href="#D_none_125">D_none</a> -&gt; <a href="#is_asm_of_302">is_asm_of</a> cert k_total k_total /\  <span class="comment">(* Def. 21 *)</span>
        <span class="keyword">forall</span> j: int.
          ((<a href="#is_asm_index_171">is_asm_index</a> cert j /\ (j <a href="int.html#infix%20%3C_21">&lt;</a> k_total)) -&gt; <span class="keyword">not</span> <a href="#is_asm_of_302">is_asm_of</a> cert j k_total)
    | <a href="#Lin_119">Lin</a>, <a href="#D_lin_comb_126">D_lin_comb</a> weights | <a href="#Rnd_120">Rnd</a>, <a href="#D_lin_comb_126">D_lin_comb</a> weights -&gt;  <span class="keyword">forall</span> j: int. ((<a href="#is_asm_index_171">is_asm_index</a> cert j /\ (j <a href="int.html#infix%20%3C_21">&lt;</a> k_total)) -&gt;
          (<a href="#is_asm_of_302">is_asm_of</a> cert j k_total =
          <span class="keyword">exists</span> i: int.
            (weights[i] &lt;&gt; 0.0 /\ (j <a href="int.html#infix%20%3C=_25">&lt;=</a> i) /\ (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total) /\ <a href="#is_asm_of_302">is_asm_of</a> cert j i)))
    | <a href="#Uns_121">Uns</a>, <a href="#D_uns_127">D_uns</a> indices -&gt;
        <span class="keyword">let</span> i1 = indices[0] <span class="keyword">in</span>
        <span class="keyword">let</span> l1 = indices[1] <span class="keyword">in</span>
        <span class="keyword">let</span> i2 = indices[2] <span class="keyword">in</span>
        <span class="keyword">let</span> l2 = indices[3] <span class="keyword">in</span>
        <span class="keyword">forall</span> j: int. ((<a href="#is_asm_index_171">is_asm_index</a> cert j /\ (j <a href="int.html#infix%20%3C_21">&lt;</a> k_total)) -&gt;
          ((<a href="#is_asm_of_302">is_asm_of</a> cert j k_total) = ((<a href="#is_asm_of_302">is_asm_of</a> cert j i1 /\ j &lt;&gt; l1) \/ (<a href="#is_asm_of_302">is_asm_of</a> cert j i2 /\ j &lt;&gt; l2))))
    | <a href="#Sol_122">Sol</a>, <a href="#D_none_125">D_none</a> -&gt;
        <span class="keyword">forall</span> j: int.
          ((<a href="#is_asm_index_171">is_asm_index</a> cert j /\ (j <a href="int.html#infix%20%3C_21">&lt;</a> k_total)) -&gt; <span class="keyword">not</span> <a href="#is_asm_of_302">is_asm_of</a> cert j k_total)
    | _, _ -&gt; <span class="keyword">false</span>
    <span class="keyword">end</span>

   <span class="comment">(* predicate for Def. 23 *)</span>
  <span class="keyword">predicate</span> <a name="phi_DOM_expanded_539">phi_DOM_expanded</a>
    (a1 a2: <a href="array.html#array_15">array</a> real) (b1 b2: real) (eq1 eq2 geq1 geq2 leq1 leq2: bool) =
    (
    (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j <a href="#n_46">n</a> -&gt; a1[j] = 0.0) /\
    (<span class="keyword">if</span> eq1 <span class="keyword">then</span> b1 &lt;&gt; 0.0 <span class="keyword">else</span>
      <span class="keyword">if</span> geq1 <span class="keyword">then</span> b1 <a href="real.html#infix%20%3E._80">&gt;.</a> 0.0 <span class="keyword">else</span>
        <span class="keyword">if</span> leq1 <span class="keyword">then</span> b1 <a href="real.html#infix%20%3C._79">&lt;.</a> 0.0 <span class="keyword">else</span> <span class="keyword">false</span>)
    )
    \/
    (
    (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j <a href="#n_46">n</a> -&gt; a1[j] = a2[j]) /\
    (<span class="keyword">if</span> eq2 <span class="keyword">then</span> eq1 /\ b1 = b2 <span class="keyword">else</span>
      <span class="keyword">if</span> geq2 <span class="keyword">then</span> geq1 /\ b1 <a href="real.html#infix%20%3E=._78">&gt;=.</a> b2 <span class="keyword">else</span>
        <span class="keyword">if</span> leq2 <span class="keyword">then</span> leq1 /\ b1 <a href="real.html#infix%20%3C=._77">&lt;=.</a> b2 <span class="keyword">else</span> <span class="keyword">false</span>)
    )

  <span class="keyword">predicate</span> <a name="phi_DOM_constr_555">phi_DOM_constr</a> (c1 c2 : <a href="#constraint_70">constraint</a>) =
    <a href="#phi_DOM_expanded_539">phi_DOM_expanded</a>
      c1.<a href="#a_71">a</a> c2.<a href="#a_71">a</a>
      c1.<a href="#b_72">b</a> c2.<a href="#b_72">b</a>
      ((<a href="#sign_to_int_60">sign_to_int</a> c1.<a href="#s_73">s</a>) = 0) ((<a href="#sign_to_int_60">sign_to_int</a> c2.<a href="#s_73">s</a>) = 0)
      ((<a href="#sign_to_int_60">sign_to_int</a> c1.<a href="#s_73">s</a>) <a href="int.html#infix%20%3E=_26">&gt;=</a> 0) ((<a href="#sign_to_int_60">sign_to_int</a> c2.<a href="#s_73">s</a>) <a href="int.html#infix%20%3E=_26">&gt;=</a> 0)
      ((<a href="#sign_to_int_60">sign_to_int</a> c1.<a href="#s_73">s</a>) <a href="int.html#infix%20%3C=_25">&lt;=</a> 0) ((<a href="#sign_to_int_60">sign_to_int</a> c2.<a href="#s_73">s</a>) <a href="int.html#infix%20%3C=_25">&lt;=</a> 0)

    <span class="comment">(* predicate for Def. 25 *)</span>
  <span class="keyword">predicate</span> <a name="phi_RND_564">phi_RND</a> (cert: <a href="#certificate_162">certificate</a>) (a: <a href="array.html#array_15">array</a> real) (eq: bool) =
    (<span class="keyword">forall</span> j: int. <a href="set.html#mem_33">mem</a> j cert.<a href="#cINT_163">cINT</a> -&gt; <a href="#is_integer_40">is_integer</a> a[j]) /\
    (<span class="keyword">forall</span> j: int. (<a href="#in_range_130">in_range</a> j <a href="#n_46">n</a> /\ <span class="keyword">not</span> <a href="set.html#mem_33">mem</a> j cert.<a href="#cINT_163">cINT</a>) -&gt; a[j] = 0.0) /\
    <span class="keyword">not</span> eq

    <span class="comment">(* predicate for Def. 27 *)</span>
  <span class="keyword">predicate</span> <a name="phi_DIS_571">phi_DIS</a> (cert: <a href="#certificate_162">certificate</a>) (ci cj: <a href="#constraint_70">constraint</a>) =
    (<span class="keyword">forall</span> k: int. <a href="#in_range_130">in_range</a> k <a href="#n_46">n</a> -&gt; ci.<a href="#a_71">a</a>[k] = cj.<a href="#a_71">a</a>[k]) /\
    (<span class="keyword">forall</span> k: int. <a href="set.html#mem_33">mem</a> k cert.<a href="#cINT_163">cINT</a> -&gt; <a href="#is_integer_40">is_integer</a> ci.<a href="#a_71">a</a>[k]) /\
    (<span class="keyword">forall</span> k: int. (<a href="#in_range_130">in_range</a> k <a href="#n_46">n</a> /\ <span class="keyword">not</span> <a href="set.html#mem_33">mem</a> k cert.<a href="#cINT_163">cINT</a>) -&gt; (ci.<a href="#a_71">a</a>[k] = 0.0)) /\
    (<a href="#is_integer_40">is_integer</a> ci.<a href="#b_72">b</a>) /\ (<a href="#is_integer_40">is_integer</a> cj.<a href="#b_72">b</a>) /\
    (ci.<a href="#s_73">s</a> &lt;&gt; <a href="#Eq_58">Eq</a> /\ cj.<a href="#s_73">s</a> &lt;&gt; <a href="#Eq_58">Eq</a> /\ ci.<a href="#s_73">s</a> &lt;&gt; cj.<a href="#s_73">s</a>) /\
    (<span class="keyword">if</span> ci.<a href="#s_73">s</a> = <a href="#Geq_57">Geq</a> <span class="keyword">then</span> ci.<a href="#b_72">b</a> = cj.<a href="#b_72">b</a> <a href="real.html#infix%20+._69">+.</a> 1.0 <span class="keyword">else</span> ci.<a href="#b_72">b</a> = cj.<a href="#b_72">b</a> <a href="real.html#infix%20-._70">-.</a> 1.0)

  <span class="keyword">predicate</span> <a name="phi_DER_k_580">phi_DER_k</a> (cert: <a href="#certificate_162">certificate</a>) (k: int) =
    <span class="keyword">let</span> k_total = (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) <span class="keyword">in</span>
    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>
    <a href="#phi_ASM_513">phi_ASM</a> cert k /\
    <span class="keyword">match</span> dc.<a href="#rsn_143">rsn</a>, dc.<a href="#data_144">data</a> <span class="keyword">with</span>
    | <a href="#Asm_118">Asm</a>, <a href="#D_none_125">D_none</a> -&gt; <span class="keyword">true</span>

    | <a href="#Lin_119">Lin</a>, <a href="#D_lin_comb_126">D_lin_comb</a> weights -&gt; <span class="comment">(* Def. 24 *)</span>
        <span class="keyword">let</span> sgn_prod =
        <span class="keyword">fun</span> i -&gt; weights[i] <a href="real.html#infix%20*._71">*.</a> (<a href="real.html#from_int_129">from_int</a> (<a href="#sign_to_int_60">sign_to_int</a> (<a href="#get_constraint_213">get_constraint</a> cert i).<a href="#s_73">s</a>)) <span class="keyword">in</span>
        <span class="keyword">let</span> all_nonneg : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i <a href="real.html#infix%20%3E=._78">&gt;=.</a> 0.0 <span class="keyword">in</span>
        <span class="keyword">let</span> all_zero   : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i = 0.0 <span class="keyword">in</span>
        <span class="keyword">let</span> all_nonpos : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i <a href="real.html#infix%20%3C=._77">&lt;=.</a> 0.0 <span class="keyword">in</span>
        <span class="keyword">let</span> gen_con : <a href="#generalized_constraint_208">generalized_constraint</a> = <a href="#get_lin_comb_246">get_lin_comb</a> cert weights <span class="keyword">in</span>
        <span class="comment">(* phi_PRV  Def. 22 *)</span>
        (<span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ weights[i] &lt;&gt; 0.0 -&gt; (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total)) /\
        <a href="#phi_DOM_expanded_539">phi_DOM_expanded</a> gen_con.<a href="#lhs_209">lhs</a> dc.<a href="#con_142">con</a>.<a href="#a_71">a</a> gen_con.<a href="#rhs_210">rhs</a> dc.<a href="#con_142">con</a>.<a href="#b_72">b</a> all_zero (dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Eq_58">Eq</a>) all_nonneg (dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Geq_57">Geq</a>) all_nonpos (dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Leq_56">Leq</a>)

    | <a href="#Rnd_120">Rnd</a>, <a href="#D_lin_comb_126">D_lin_comb</a> weights -&gt; <span class="comment">(* Def. 26 *)</span>
        <span class="keyword">let</span> sgn_prod =
        <span class="keyword">fun</span> i -&gt; weights[i] <a href="real.html#infix%20*._71">*.</a> (<a href="real.html#from_int_129">from_int</a> (<a href="#sign_to_int_60">sign_to_int</a> (<a href="#get_constraint_213">get_constraint</a> cert i).<a href="#s_73">s</a>)) <span class="keyword">in</span>
        <span class="keyword">let</span> all_nonneg : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i <a href="real.html#infix%20%3E=._78">&gt;=.</a> 0.0 <span class="keyword">in</span>
        <span class="keyword">let</span> all_zero   : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i = 0.0 <span class="keyword">in</span>
        <span class="keyword">let</span> all_nonpos : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i <a href="real.html#infix%20%3C=._77">&lt;=.</a> 0.0 <span class="keyword">in</span>
        <span class="keyword">let</span> gen_con : <a href="#generalized_constraint_208">generalized_constraint</a> = <a href="#get_lin_comb_246">get_lin_comb</a> cert weights <span class="keyword">in</span>
        (<span class="keyword">forall</span> i:int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ weights[i] &lt;&gt; 0.0 -&gt; (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total)) /\
        <a href="#phi_RND_564">phi_RND</a> cert gen_con.<a href="#lhs_209">lhs</a> all_zero /\
        (
        (
        (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j <a href="#n_46">n</a> -&gt; gen_con.<a href="#lhs_209">lhs</a>[j] = 0.0) /\ <span class="comment">(* is absurdity *)</span>
        (<span class="keyword">if</span> all_nonneg <span class="keyword">then</span> gen_con.<a href="#rhs_210">rhs</a> <a href="real.html#infix%20%3E._80">&gt;.</a> 0.0 <span class="keyword">else</span>
          <span class="keyword">if</span> all_nonpos <span class="keyword">then</span> gen_con.<a href="#rhs_210">rhs</a> <a href="real.html#infix%20%3C._79">&lt;.</a> 0.0 <span class="keyword">else</span> <span class="keyword">false</span>)
        )
        \/
        (
        (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j <a href="#n_46">n</a> -&gt; gen_con.<a href="#lhs_209">lhs</a>[j] = dc.<a href="#con_142">con</a>.<a href="#a_71">a</a>[j]) /\ <span class="comment">(*domination part*)</span>
        (<span class="keyword">if</span> dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Eq_58">Eq</a> <span class="keyword">then</span> <span class="keyword">false</span> <span class="keyword">else</span>
          <span class="keyword">if</span> dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Geq_57">Geq</a> <span class="keyword">then</span> (all_nonneg /\ (<a href="real.html#from_int_129">from_int</a> (<a href="real.html#ceil_184">ceil</a> gen_con.<a href="#rhs_210">rhs</a>)) <a href="real.html#infix%20%3E=._78">&gt;=.</a> dc.<a href="#con_142">con</a>.<a href="#b_72">b</a>) <span class="keyword">else</span>
             (all_nonpos /\ (<a href="real.html#from_int_129">from_int</a> (<a href="real.html#floor_183">floor</a> gen_con.<a href="#rhs_210">rhs</a>)) <a href="real.html#infix%20%3C=._77">&lt;=.</a> dc.<a href="#con_142">con</a>.<a href="#b_72">b</a>))
        )
        )

    | <a href="#Uns_121">Uns</a>, <a href="#D_uns_127">D_uns</a> indices -&gt; <span class="comment">(* Def. 28 *)</span>
        <span class="keyword">let</span> i1 = indices[0] <span class="keyword">in</span>
        <span class="keyword">let</span> l1 = indices[1] <span class="keyword">in</span>
        <span class="keyword">let</span> i2 = indices[2] <span class="keyword">in</span>
        <span class="keyword">let</span> l2 = indices[3] <span class="keyword">in</span>
        (i1 <a href="int.html#infix%20%3C_21">&lt;</a> k_total) /\ (i2 <a href="int.html#infix%20%3C_21">&lt;</a> k_total) /\ (l1 <a href="int.html#infix%20%3C_21">&lt;</a> k_total) /\ (l2 <a href="int.html#infix%20%3C_21">&lt;</a> k_total) /\
        <span class="keyword">let</span> ci1 = <a href="#get_constraint_213">get_constraint</a> cert i1 <span class="keyword">in</span>
        <span class="keyword">let</span> cl1 = <a href="#get_constraint_213">get_constraint</a> cert l1 <span class="keyword">in</span>
        <span class="keyword">let</span> ci2 = <a href="#get_constraint_213">get_constraint</a> cert i2 <span class="keyword">in</span>
        <span class="keyword">let</span> cl2 = <a href="#get_constraint_213">get_constraint</a> cert l2 <span class="keyword">in</span>
        <a href="#phi_DOM_constr_555">phi_DOM_constr</a> ci1 dc.<a href="#con_142">con</a> /\ <a href="#phi_DOM_constr_555">phi_DOM_constr</a> ci2 dc.<a href="#con_142">con</a> /\ <a href="#phi_DIS_571">phi_DIS</a> cert cl1 cl2
    | <a href="#Sol_122">Sol</a>, <a href="#D_none_125">D_none</a> -&gt; <span class="comment">(* Def. 29 *)</span>
        <span class="keyword">if</span> <a href="#p_447">p</a> cert <span class="keyword">then</span>
          <span class="keyword">exists</span> sol: <a href="array.html#array_15">array</a> real. <a href="set.html#mem_33">mem</a> sol cert.<a href="#cSOL_167">cSOL</a> /\ <a href="#phi_DOM_constr_555">phi_DOM_constr</a> { <a href="#a_71">a</a> = cert.<a href="#cOBJ_164">cOBJ</a>.<a href="#c_93">c</a>; <a href="#b_72">b</a> = <a href="#dot_78">dot</a> cert.<a href="#cOBJ_164">cOBJ</a>.<a href="#c_93">c</a> sol; <a href="#s_73">s</a> = <a href="#Leq_56">Leq</a> } dc.<a href="#con_142">con</a>
        <span class="keyword">else</span>
          <span class="keyword">exists</span> sol: <a href="array.html#array_15">array</a> real. <a href="set.html#mem_33">mem</a> sol cert.<a href="#cSOL_167">cSOL</a> /\ <a href="#phi_DOM_constr_555">phi_DOM_constr</a> { <a href="#a_71">a</a> = cert.<a href="#cOBJ_164">cOBJ</a>.<a href="#c_93">c</a>; <a href="#b_72">b</a> = <a href="#dot_78">dot</a> cert.<a href="#cOBJ_164">cOBJ</a>.<a href="#c_93">c</a> sol; <a href="#s_73">s</a> = <a href="#Geq_57">Geq</a> } dc.<a href="#con_142">con</a>
    | _, _ -&gt; <span class="keyword">false</span>
    <span class="keyword">end</span>

  <span class="comment">(* predicate for Def. 30 *)</span>
  <span class="keyword">predicate</span> <a name="phi_DER_643">phi_DER</a> (cert: <a href="#certificate_162">certificate</a>) =
    <span class="keyword">let</span> d_index = (<a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> 1) <span class="keyword">in</span>
    <span class="keyword">let</span> cd = <a href="#get_constraint_213">get_constraint</a> cert d_index
    <span class="keyword">in</span>
    (<span class="keyword">forall</span> k: int. 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a> -&gt; <a href="#phi_DER_k_580">phi_DER_k</a> cert k) /\
    <span class="keyword">if</span> <span class="keyword">not</span> (<a href="#r_454">r</a> cert) <span class="keyword">then</span> (<a href="#phi_DOM_constr_555">phi_DOM_constr</a> cd { <a href="#a_71">a</a> = <a href="array.html#make_52">make</a> <a href="#n_46">n</a> 0.0; <a href="#b_72">b</a> = 1.0; <a href="#s_73">s</a> = <a href="#Geq_57">Geq</a> }
    /\ (<span class="keyword">forall</span> j:int. <a href="#is_asm_index_171">is_asm_index</a> cert j -&gt; <span class="keyword">not</span> <a href="#is_asm_of_302">is_asm_of</a> cert j d_index)) <span class="keyword">else</span>
      (
      (
      (<a href="#p_447">p</a> cert /\ <a href="#plb_477">plb</a> cert) -&gt;
        (
        <a href="#phi_DOM_constr_555">phi_DOM_constr</a> cd { <a href="#a_71">a</a> = cert.<a href="#cOBJ_164">cOBJ</a>.<a href="#c_93">c</a>; <a href="#b_72">b</a> = (<a href="#l_482">l</a> cert); <a href="#s_73">s</a> = <a href="#Geq_57">Geq</a> } /\
        (<span class="keyword">forall</span> j:int. <a href="#is_asm_index_171">is_asm_index</a> cert j -&gt; <span class="keyword">not</span> <a href="#is_asm_of_302">is_asm_of</a> cert j d_index)
        )
      ) /\
      (
      (<span class="keyword">not</span> <a href="#p_447">p</a> cert /\ <a href="#pub_461">pub</a> cert) -&gt;
        (
        <a href="#phi_DOM_constr_555">phi_DOM_constr</a> cd { <a href="#a_71">a</a> = cert.<a href="#cOBJ_164">cOBJ</a>.<a href="#c_93">c</a>; <a href="#b_72">b</a> = (<a href="#u_466">u</a> cert); <a href="#s_73">s</a> = <a href="#Leq_56">Leq</a> } /\
        (<span class="keyword">forall</span> j:int. <a href="#is_asm_index_171">is_asm_index</a> cert j -&gt; <span class="keyword">not</span> <a href="#is_asm_of_302">is_asm_of</a> cert j d_index)
        )
      )
      )

  <span class="keyword">predicate</span> <a name="phi_667">phi</a> (cert: <a href="#certificate_162">certificate</a>) = <a href="#phi_SOL_502">phi_SOL</a> cert /\ <a href="#phi_DER_643">phi_DER</a> cert

<span class="keyword">end</span>

<span class="keyword">theory</span> <a name="Main_">Main</a>

  <span class="keyword">use</span> <a href="#VIPRCertificate_">VIPRCertificate</a>
  <span class="keyword">use</span> <a href="#VIPRHelpers_">VIPRHelpers</a>
  <span class="keyword">use</span> <a href="#VIPRValidity_">VIPRValidity</a>
  <span class="keyword">use</span> <a href="#VIPRPredicate_">VIPRPredicate</a>
  <span class="keyword">use</span> array.<a href="array.html#Array_">Array</a>
  <span class="keyword">use</span> set.<a href="set.html#Set_">Set</a>
  <span class="keyword">use</span> real.<a href="real.html#RealInfix_">RealInfix</a>
  <span class="keyword">use</span> real.<a href="real.html#FromInt_">FromInt</a>
  <span class="keyword">use</span> real.<a href="real.html#Truncate_">Truncate</a>
  <span class="keyword">use</span> <a href="#Sum_">Sum</a>
  <span class="keyword">use</span> <a href="#Init_">Init</a>
  <span class="keyword">use</span> int.<a href="int.html#Int_">Int</a>

  <span class="comment">(*######################################### Lemma 1 ########################################*)</span>

  <span class="keyword">lemma</span> <a name="LemmaFEAS'lemma_691">LemmaFEAS</a>: <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>. <a href="#is_cert_179">is_cert</a> cert -&gt; (<a href="#valid_FEAS_317">valid_FEAS</a> cert &lt;-&gt; <a href="#phi_FEAS_493">phi_FEAS</a> cert)

  <span class="comment">(*###########################################################################################*)</span>

                               <span class="comment">(*helper lemmas*)</span>
  <span class="keyword">lemma</span> <a name="u_matches_ub_when_interval'lemma_696">u_matches_ub_when_interval</a>:
    <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, i: <a href="#interval_107">interval</a>, ub_val: real.
      <span class="keyword">not</span> cert.<a href="#cRTP_166">cRTP</a> = <a href="#Interval_114">Interval</a> i \/ (i.<a href="#ub_109">ub</a> = <a href="#UNum_105">UNum</a> ub_val -&gt;
      <a href="#u_466">u</a> cert = ub_val)

  <span class="keyword">lemma</span> <a name="pub_equiv_unum'lemma_701">pub_equiv_unum</a>:
    <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>.
       <span class="keyword">not</span> <a href="#pub_461">pub</a> cert \/ (<span class="keyword">exists</span> i: <a href="#interval_107">interval</a>.
        cert.<a href="#cRTP_166">cRTP</a> = <a href="#Interval_114">Interval</a> i /\ i.<a href="#ub_109">ub</a> = <a href="#UNum_105">UNum</a> (<a href="#u_466">u</a> cert))

  <span class="keyword">lemma</span> <a name="l_matches_lb_when_interval'lemma_706">l_matches_lb_when_interval</a>:
    <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, i: <a href="#interval_107">interval</a>, lb_val: real.
      <span class="keyword">not</span> cert.<a href="#cRTP_166">cRTP</a> = <a href="#Interval_114">Interval</a> i \/ (i.<a href="#lb_108">lb</a> = <a href="#LNum_101">LNum</a> lb_val -&gt;
      <a href="#l_482">l</a> cert = lb_val)

  <span class="keyword">lemma</span> <a name="plb_equiv_lnum'lemma_711">plb_equiv_lnum</a>:
    <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>.
      <a href="#plb_477">plb</a> cert -&gt;
      <span class="keyword">exists</span> i: <a href="#interval_107">interval</a>.
        cert.<a href="#cRTP_166">cRTP</a> = <a href="#Interval_114">Interval</a> i /\ i.<a href="#lb_108">lb</a> = <a href="#LNum_101">LNum</a> (<a href="#l_482">l</a> cert)

  <span class="keyword">lemma</span> <a name="r_false_iff_infeasible'lemma_717">r_false_iff_infeasible</a>:
    <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>.
      cert.<a href="#cRTP_166">cRTP</a> = <a href="#Infeasible_113">Infeasible</a> -&gt; <span class="keyword">not</span> (<a href="#r_454">r</a> cert)

 <span class="comment">(*######################################## Lemma 2  ######################################*)</span>

  <span class="keyword">lemma</span> <a name="LemmaSOL'lemma_723">LemmaSOL</a>: <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>. <a href="#is_cert_179">is_cert</a> cert -&gt; (<a href="#valid_SOL_323">valid_SOL</a> cert &lt;-&gt; <a href="#phi_SOL_502">phi_SOL</a> cert)

 <span class="comment">(*########################################################################################*)</span>

                                  <span class="comment">(*helper lemmas*)</span>
  <span class="keyword">lemma</span> <a name="singleton_membership_characterization'lemma_728">singleton_membership_characterization</a>:
  <span class="keyword">forall</span> s: <a href="set.html#set_27">set</a> int, x: int.
    <a href="set.html#mem_33">mem</a> x s /\
    (<span class="keyword">forall</span> j: int. j &lt;&gt; x -&gt; <span class="keyword">not</span> (<a href="set.html#mem_33">mem</a> j s)) &lt;-&gt;
    s = <a href="set.html#add_64">add</a> x <a href="set.html#empty_53">empty</a>

  <span class="keyword">lemma</span> <a name="singleton_mem_iff'lemma_734">singleton_mem_iff</a>:
  <span class="keyword">forall</span> x y: int. <a href="set.html#mem_33">mem</a> x (<a href="set.html#add_64">add</a> y <a href="set.html#empty_53">empty</a>) &lt;-&gt; x = y

  <span class="keyword">lemma</span> <a name="is_asm_of_singleton'lemma_737">is_asm_of_singleton</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k: int.
    <a href="#is_cert_179">is_cert</a> cert -&gt; 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a> -&gt;
    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>
    dc.<a href="#rsn_143">rsn</a> = <a href="#Asm_118">Asm</a> -&gt; dc.<a href="#a_set_145">a_set</a> = <a href="set.html#add_64">add</a> (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) <a href="set.html#empty_53">empty</a> -&gt;
    <span class="keyword">forall</span> j: int.
      <a href="#is_asm_of_302">is_asm_of</a> cert j (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) &lt;-&gt; j = k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>

  <span class="keyword">lemma</span> <a name="is_asm_index_rsn'lemma_745">is_asm_index_rsn</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, j: int.
    <a href="#is_cert_179">is_cert</a> cert -&gt; <a href="#is_asm_index_171">is_asm_index</a> cert j -&gt; cert.<a href="#cDER_168">cDER</a>[j <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>].<a href="#rsn_143">rsn</a> = <a href="#Asm_118">Asm</a>

  <span class="keyword">lemma</span> <a name="set_extensionality_singleton'lemma_749">set_extensionality_singleton</a>:
  <span class="keyword">forall</span> s: <a href="set.html#set_27">set</a> int, x: int.
    (<a href="set.html#mem_33">mem</a> x s /\ <span class="keyword">forall</span> y: int. y &lt;&gt; x -&gt; <span class="keyword">not</span> <a href="set.html#mem_33">mem</a> y s) -&gt; s = <a href="set.html#add_64">add</a> x <a href="set.html#empty_53">empty</a>

  <span class="keyword">lemma</span> <a name="is_asm_of_iff_mem'lemma_753">is_asm_of_iff_mem</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k j: int.
    <a href="#is_cert_179">is_cert</a> cert -&gt; 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a> -&gt; j <a href="int.html#infix%20%3E=_26">&gt;=</a> 0 -&gt;
    <a href="#is_asm_of_302">is_asm_of</a> cert j (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) &lt;-&gt; <a href="set.html#mem_33">mem</a> j cert.<a href="#cDER_168">cDER</a>[k].<a href="#a_set_145">a_set</a>

  <span class="keyword">lemma</span> <a name="a_set_singleton_iff_asm_of_form'lemma_758">a_set_singleton_iff_asm_of_form</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k: int.
    <a href="#is_cert_179">is_cert</a> cert -&gt; 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a> -&gt;
    (cert.<a href="#cDER_168">cDER</a>[k].<a href="#a_set_145">a_set</a> = <a href="set.html#add_64">add</a> (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) <a href="set.html#empty_53">empty</a> &lt;-&gt;
     <a href="#is_asm_of_302">is_asm_of</a> cert (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) /\
     (<span class="keyword">forall</span> j: int.
        j &lt;&gt; (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) -&gt; <span class="keyword">not</span> (<a href="#is_asm_of_302">is_asm_of</a> cert j (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>))))

  <span class="keyword">lemma</span> <a name="asm_data_none'lemma_766">asm_data_none</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k: int.
    <a href="#is_cert_179">is_cert</a> cert -&gt; 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a> -&gt;
    cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Asm_118">Asm</a> -&gt;
    cert.<a href="#cDER_168">cDER</a>[k].<a href="#data_144">data</a> = <a href="#D_none_125">D_none</a>

  <span class="keyword">lemma</span> <a name="OtherASM_Helper'lemma_772">OtherASM_Helper</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k:int.
    <a href="#is_cert_179">is_cert</a> cert /\ (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j)
    -&gt; (<span class="keyword">forall</span> idx: int. <a href="#in_range_130">in_range</a> idx k -&gt; <span class="keyword">forall</span> j:int. <a href="set.html#mem_33">mem</a> j cert.<a href="#cDER_168">cDER</a>[idx].<a href="#a_set_145">a_set</a> -&gt; (j <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>) <a href="int.html#infix%20%3C=_25">&lt;=</a> idx)

 <span class="comment">(*####################################### Lemma 3 #######################################*)</span>

  <span class="keyword">lemma</span> <a name="LemmaASM'lemma_779">LemmaASM</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k: int.
    <a href="#is_cert_179">is_cert</a> cert -&gt; 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a> -&gt;
    cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Asm_118">Asm</a> -&gt;
    <a href="#valid_DER_k_368">valid_DER_k</a> cert k &lt;-&gt; <a href="#phi_DER_k_580">phi_DER_k</a> cert k

 <span class="comment">(*#######################################################################################*)</span>
 <span class="comment">(* Lemma 4 and Lemma 5 are not formalized explicitly but subsumed in Lemma 7 and Lemma 9 *)</span>
 <span class="comment">(*###################################### Lemma 6 ########################################*)</span>

  <span class="keyword">lemma</span> <a name="LemmaDOM'lemma_789">LemmaDOM</a>:
  <span class="keyword">forall</span> c1 c2: <a href="#constraint_70">constraint</a>.
    (<a href="#is_constraint_76">is_constraint</a> c1 /\ <a href="#is_constraint_76">is_constraint</a> c2) -&gt;
    (<a href="#con_dom_con_226">con_dom_con</a> c1 c2 &lt;-&gt; <a href="#phi_DOM_constr_555">phi_DOM_constr</a> c1 c2)

 <span class="comment">(*#######################################################################################*)</span>

                                <span class="comment">(*helper lemmas*)</span>
  <span class="keyword">lemma</span> <a name="Lin_Next_Check'lemma_797">Lin_Next_Check</a>:
  <span class="keyword">forall</span> cert:<a href="#certificate_162">certificate</a>, k:int, weights: <a href="array.html#array_15">array</a> real.
    <span class="keyword">let</span> k_total = (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) <span class="keyword">in</span>
    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>
    <span class="keyword">let</span> sgn_prod =
    <span class="keyword">fun</span> i -&gt; weights[i] <a href="real.html#infix%20*._71">*.</a> (<a href="real.html#from_int_129">from_int</a> (<a href="#sign_to_int_60">sign_to_int</a> (<a href="#get_constraint_213">get_constraint</a> cert i).<a href="#s_73">s</a>)) <span class="keyword">in</span>

        <span class="keyword">let</span> all_nonneg : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i <a href="real.html#infix%20%3E=._78">&gt;=.</a> 0.0 <span class="keyword">in</span>
        <span class="keyword">let</span> all_zero   : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i = 0.0 <span class="keyword">in</span>
        <span class="keyword">let</span> all_nonpos : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i <a href="real.html#infix%20%3C=._77">&lt;=.</a> 0.0 <span class="keyword">in</span>
        <span class="keyword">let</span> gen_con : <a href="#generalized_constraint_208">generalized_constraint</a> = <a href="#get_lin_comb_246">get_lin_comb</a> cert weights <span class="keyword">in</span>

        <a href="#is_cert_179">is_cert</a> cert /\ cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Lin_119">Lin</a> /\ dc.<a href="#data_144">data</a> = <a href="#D_lin_comb_126">D_lin_comb</a> weights /\ (0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>)
        /\ (<span class="keyword">forall</span> i:int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ weights[i] &lt;&gt; 0.0 -&gt; (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total)) /\
        <a href="#gen_con_dom_con_238">gen_con_dom_con</a> gen_con dc.<a href="#con_142">con</a> -&gt; <a href="#phi_DOM_expanded_539">phi_DOM_expanded</a>
          gen_con.<a href="#lhs_209">lhs</a> dc.<a href="#con_142">con</a>.<a href="#a_71">a</a> gen_con.<a href="#rhs_210">rhs</a> dc.<a href="#con_142">con</a>.<a href="#b_72">b</a> all_zero
          (dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Eq_58">Eq</a>)
          all_nonneg
          (dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Geq_57">Geq</a>)
          all_nonpos
          (dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Leq_56">Leq</a>)

  <span class="keyword">lemma</span> <a name="Lin_intermed_valid_der'lemma_820">Lin_intermed_valid_der</a>:
  <span class="keyword">forall</span> cert:<a href="#certificate_162">certificate</a>, k:int, weights: <a href="array.html#array_15">array</a> real.
    <span class="keyword">let</span> k_total = (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) <span class="keyword">in</span>
    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>
    <span class="keyword">let</span> gen_con : <a href="#generalized_constraint_208">generalized_constraint</a> = <a href="#get_lin_comb_246">get_lin_comb</a> cert weights <span class="keyword">in</span>

    <a href="#is_cert_179">is_cert</a> cert  /\ cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Lin_119">Lin</a> /\ dc.<a href="#data_144">data</a> = <a href="#D_lin_comb_126">D_lin_comb</a> weights /\ (0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>)
    /\ (<span class="keyword">forall</span> i:int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ weights[i] &lt;&gt; 0.0 -&gt; (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total))
    /\ <a href="#valid_DER_k_368">valid_DER_k</a> cert k -&gt; <a href="#gen_con_dom_con_238">gen_con_dom_con</a> gen_con dc.<a href="#con_142">con</a>

  <span class="keyword">lemma</span> <a name="Lin_Next_Check_valid_der_and'lemma_831">Lin_Next_Check_valid_der_and</a>:
  <span class="keyword">forall</span> cert:<a href="#certificate_162">certificate</a>, k:int, weights: <a href="array.html#array_15">array</a> real.
   <span class="keyword">let</span> k_total = (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) <span class="keyword">in</span>
    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>
    <span class="keyword">let</span> sgn_prod =
    <span class="keyword">fun</span> i -&gt; weights[i] <a href="real.html#infix%20*._71">*.</a> (<a href="real.html#from_int_129">from_int</a> (<a href="#sign_to_int_60">sign_to_int</a> (<a href="#get_constraint_213">get_constraint</a> cert i).<a href="#s_73">s</a>)) <span class="keyword">in</span>

        <span class="keyword">let</span> all_nonneg : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i <a href="real.html#infix%20%3E=._78">&gt;=.</a> 0.0 <span class="keyword">in</span>
        <span class="keyword">let</span> all_zero   : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i = 0.0 <span class="keyword">in</span>
        <span class="keyword">let</span> all_nonpos : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i <a href="real.html#infix%20%3C=._77">&lt;=.</a> 0.0 <span class="keyword">in</span>
        <span class="keyword">let</span> gen_con : <a href="#generalized_constraint_208">generalized_constraint</a> = <a href="#get_lin_comb_246">get_lin_comb</a> cert weights <span class="keyword">in</span>

        <a href="#is_cert_179">is_cert</a> cert /\ cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Lin_119">Lin</a> /\ dc.<a href="#data_144">data</a> = <a href="#D_lin_comb_126">D_lin_comb</a> weights /\ (0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>)
        /\ (<span class="keyword">forall</span> i:int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ weights[i] &lt;&gt; 0.0 -&gt; (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total))
        /\ <a href="#valid_DER_k_368">valid_DER_k</a> cert k -&gt; <a href="#gen_con_dom_con_238">gen_con_dom_con</a> gen_con dc.<a href="#con_142">con</a>  -&gt; <a href="#phi_DOM_expanded_539">phi_DOM_expanded</a>
            gen_con.<a href="#lhs_209">lhs</a> dc.<a href="#con_142">con</a>.<a href="#a_71">a</a> gen_con.<a href="#rhs_210">rhs</a> dc.<a href="#con_142">con</a>.<a href="#b_72">b</a> all_zero
            (dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Eq_58">Eq</a>)
            all_nonneg
            (dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Geq_57">Geq</a>)
            all_nonpos
            (dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Leq_56">Leq</a>)

  <span class="keyword">lemma</span> <a name="Lin_Next_Check_valid_der_and_DOM'lemma_854">Lin_Next_Check_valid_der_and_DOM</a>:
  <span class="keyword">forall</span> cert:<a href="#certificate_162">certificate</a>, k:int, weights: <a href="array.html#array_15">array</a> real.
    <span class="keyword">let</span> k_total = (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) <span class="keyword">in</span>
    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>
    <span class="keyword">let</span> sgn_prod =
    <span class="keyword">fun</span> i -&gt; weights[i] <a href="real.html#infix%20*._71">*.</a> (<a href="real.html#from_int_129">from_int</a> (<a href="#sign_to_int_60">sign_to_int</a> (<a href="#get_constraint_213">get_constraint</a> cert i).<a href="#s_73">s</a>)) <span class="keyword">in</span>

        <span class="keyword">let</span> all_nonneg : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i <a href="real.html#infix%20%3E=._78">&gt;=.</a> 0.0 <span class="keyword">in</span>
        <span class="keyword">let</span> all_zero   : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i = 0.0 <span class="keyword">in</span>
        <span class="keyword">let</span> all_nonpos : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i <a href="real.html#infix%20%3C=._77">&lt;=.</a> 0.0 <span class="keyword">in</span>
        <span class="keyword">let</span> gen_con : <a href="#generalized_constraint_208">generalized_constraint</a> = <a href="#get_lin_comb_246">get_lin_comb</a> cert weights <span class="keyword">in</span>

        <a href="#is_cert_179">is_cert</a> cert  /\ cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Lin_119">Lin</a>
        /\ dc.<a href="#data_144">data</a> = <a href="#D_lin_comb_126">D_lin_comb</a> weights /\ (0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>) /\ (<span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ weights[i] &lt;&gt; 0.0 -&gt; (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total))
        /\ <a href="#valid_DER_k_368">valid_DER_k</a> cert k -&gt; <a href="#phi_DOM_expanded_539">phi_DOM_expanded</a>
            gen_con.<a href="#lhs_209">lhs</a> dc.<a href="#con_142">con</a>.<a href="#a_71">a</a> gen_con.<a href="#rhs_210">rhs</a> dc.<a href="#con_142">con</a>.<a href="#b_72">b</a> all_zero
            (dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Eq_58">Eq</a>)
            all_nonneg
            (dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Geq_57">Geq</a>)
            all_nonpos
            (dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Leq_56">Leq</a>)

  <span class="keyword">lemma</span> <a name="LemmaLINhelp'lemma_877">LemmaLINhelp</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k: int, weights: <a href="array.html#array_15">array</a> real.
    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>
    <span class="keyword">let</span> sgn_prod =
    <span class="keyword">fun</span> i -&gt; weights[i] <a href="real.html#infix%20*._71">*.</a> (<a href="real.html#from_int_129">from_int</a> (<a href="#sign_to_int_60">sign_to_int</a> (<a href="#get_constraint_213">get_constraint</a> cert i).<a href="#s_73">s</a>)) <span class="keyword">in</span>

        <span class="keyword">let</span> all_nonneg : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0)  -&gt; sgn_prod i <a href="real.html#infix%20%3E=._78">&gt;=.</a> 0.0 <span class="keyword">in</span>
        <span class="keyword">let</span> all_zero   : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0)  -&gt; sgn_prod i = 0.0 <span class="keyword">in</span>
        <span class="keyword">let</span> all_nonpos : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0)  -&gt; sgn_prod i <a href="real.html#infix%20%3C=._77">&lt;=.</a> 0.0 <span class="keyword">in</span>
        <span class="keyword">let</span> gen_con : <a href="#generalized_constraint_208">generalized_constraint</a> = <a href="#get_lin_comb_246">get_lin_comb</a> cert weights <span class="keyword">in</span>

        <a href="#is_cert_179">is_cert</a> cert  -&gt; 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a> -&gt; (cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Lin_119">Lin</a> /\ dc.<a href="#data_144">data</a> = <a href="#D_lin_comb_126">D_lin_comb</a> weights) -&gt;
        (<span class="keyword">forall</span> j: int. 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> j <a href="int.html#infix%20%3C_21">&lt;</a> k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j) -&gt;
        <a href="#valid_DER_k_368">valid_DER_k</a> cert k -&gt; (<a href="#phi_DOM_expanded_539">phi_DOM_expanded</a>
          gen_con.<a href="#lhs_209">lhs</a> dc.<a href="#con_142">con</a>.<a href="#a_71">a</a> gen_con.<a href="#rhs_210">rhs</a> dc.<a href="#con_142">con</a>.<a href="#b_72">b</a> all_zero
          (dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Eq_58">Eq</a>)
          all_nonneg
          (dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Geq_57">Geq</a>)
          all_nonpos
          (dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Leq_56">Leq</a>))

  <span class="keyword">lemma</span> <a name="OtherASM_Helper_Other_Other_X'lemma_899">OtherASM_Helper_Other_Other_X</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k:int.

    <a href="#is_cert_179">is_cert</a> cert /\ <a href="#in_range_130">in_range</a> k (<a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>) /\ (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j) /\ <a href="#valid_DER_k_368">valid_DER_k</a> cert k -&gt;
    (<span class="keyword">forall</span> j: int. <a href="set.html#mem_33">mem</a> j cert.<a href="#cDER_168">cDER</a>[k].<a href="#a_set_145">a_set</a> -&gt; (j <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>) <a href="int.html#infix%20%3C=_25">&lt;=</a> k)

  <span class="keyword">lemma</span> <a name="OtherASM_Helper_Other_Other'lemma_906">OtherASM_Helper_Other_Other</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k:int.
    <span class="keyword">let</span> k_total = (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) <span class="keyword">in</span>
    <a href="#is_cert_179">is_cert</a> cert /\ <a href="#valid_DER_k_368">valid_DER_k</a> cert k /\ <a href="#in_range_130">in_range</a> k (<a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>)
    -&gt; (<span class="keyword">forall</span> j: int. ((<a href="#is_asm_index_171">is_asm_index</a> cert j /\ (k_total <a href="int.html#infix%20%3C_21">&lt;</a> j)) -&gt; <span class="keyword">not</span> <a href="#is_asm_of_302">is_asm_of</a> cert j k_total))

  <span class="keyword">lemma</span> <a name="OtherASM_Helper_Other'lemma_913">OtherASM_Helper_Other</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k:int.
    <a href="#is_cert_179">is_cert</a> cert /\ (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j k -&gt; <a href="#phi_DER_k_580">phi_DER_k</a> cert j) /\ <a href="#in_range_130">in_range</a> k (<a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>)
    -&gt; (<span class="keyword">forall</span> idx: int. <a href="#in_range_130">in_range</a> idx k -&gt; <span class="keyword">forall</span> j:int. <a href="set.html#mem_33">mem</a> j cert.<a href="#cDER_168">cDER</a>[idx].<a href="#a_set_145">a_set</a> -&gt; (j <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>) <a href="int.html#infix%20%3C=_25">&lt;=</a> idx)

  <span class="keyword">lemma</span> <a name="One_Direction'lemma_919">One_Direction</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k:int, weights: <a href="array.html#array_15">array</a> real.

    <span class="keyword">let</span> k_total = (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) <span class="keyword">in</span>
    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>

        <a href="#is_cert_179">is_cert</a> cert /\ (cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Lin_119">Lin</a> \/ cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Rnd_120">Rnd</a>) /\ dc.<a href="#data_144">data</a> = <a href="#D_lin_comb_126">D_lin_comb</a> weights
        /\ <a href="#in_range_130">in_range</a> k (<a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>)
        /\ (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j) /\ (<span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ weights[i] &lt;&gt; 0.0 -&gt; (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total)) -&gt;
        ( (<span class="keyword">forall</span> j: int.<a href="set.html#mem_33">mem</a> j dc.<a href="#a_set_145">a_set</a> &lt;-&gt; <span class="keyword">exists</span> i:int. weights[i] &lt;&gt; 0.0 /\ (<a href="#m_47">m</a> <a href="int.html#infix%20%3C=_25">&lt;=</a> i) /\ (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total) /\
         <a href="set.html#mem_33">mem</a> j cert.<a href="#cDER_168">cDER</a>[i <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>].<a href="#a_set_145">a_set</a>)
        /\
        (<span class="keyword">forall</span> i:int. weights[i] &lt;&gt; 0.0 -&gt;
        <a href="set.html#subset_42">subset</a> cert.<a href="#cDER_168">cDER</a>[i <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>].<a href="#a_set_145">a_set</a> dc.<a href="#a_set_145">a_set</a>) ) -&gt; <span class="keyword">forall</span> j: int. ((<a href="#is_asm_index_171">is_asm_index</a> cert j /\ (j <a href="int.html#infix%20%3C_21">&lt;</a> k_total)) -&gt;
          (<a href="#is_asm_of_302">is_asm_of</a> cert j k_total =
          <span class="keyword">exists</span> i: int.
            (weights[i] &lt;&gt; 0.0 /\ (j <a href="int.html#infix%20%3C=_25">&lt;=</a> i) /\ (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total) /\ <a href="#is_asm_of_302">is_asm_of</a> cert j i)))

  <span class="keyword">lemma</span> <a name="Other_Direction'lemma_939">Other_Direction</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k:int, weights: <a href="array.html#array_15">array</a> real.

    <span class="keyword">let</span> k_total = (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) <span class="keyword">in</span>
    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>

        <a href="#is_cert_179">is_cert</a> cert /\ (cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Lin_119">Lin</a> \/ cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Rnd_120">Rnd</a>)
        /\ dc.<a href="#data_144">data</a> = <a href="#D_lin_comb_126">D_lin_comb</a> weights  /\ <a href="#in_range_130">in_range</a> k (<a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>)
        /\ (<span class="keyword">forall</span> j. ((<a href="#is_asm_index_171">is_asm_index</a> cert j /\ k_total <a href="int.html#infix%20%3C_21">&lt;</a> j) -&gt; <span class="keyword">not</span> <a href="#is_asm_of_302">is_asm_of</a> cert j k_total))
        /\ (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j)
        /\ (<span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ weights[i] &lt;&gt; 0.0 -&gt; (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total)) -&gt;
        (<span class="keyword">forall</span> j: int. ((<a href="#is_asm_index_171">is_asm_index</a> cert j /\ (j <a href="int.html#infix%20%3C_21">&lt;</a> k_total)) -&gt;
          (<a href="#is_asm_of_302">is_asm_of</a> cert j k_total =
          <span class="keyword">exists</span> i: int.
            (weights[i] &lt;&gt; 0.0 /\ (j <a href="int.html#infix%20%3C=_25">&lt;=</a> i) /\ (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total) /\ <a href="#is_asm_of_302">is_asm_of</a> cert j i))))  -&gt;
        ( (<span class="keyword">forall</span> j:int. <a href="set.html#mem_33">mem</a> j dc.<a href="#a_set_145">a_set</a> &lt;-&gt; <span class="keyword">exists</span> i:int. weights[i] &lt;&gt; 0.0 /\ (<a href="#m_47">m</a> <a href="int.html#infix%20%3C=_25">&lt;=</a> i) /\ (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total) /\
         <a href="set.html#mem_33">mem</a> j cert.<a href="#cDER_168">cDER</a>[i <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>].<a href="#a_set_145">a_set</a>)
        /\
        (<span class="keyword">forall</span> i:int. weights[i] &lt;&gt; 0.0 /\ (<a href="#m_47">m</a> <a href="int.html#infix%20%3C=_25">&lt;=</a> i) /\ (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total) -&gt;
        <span class="keyword">forall</span> j:int. <a href="set.html#mem_33">mem</a> j cert.<a href="#cDER_168">cDER</a>[i <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>].<a href="#a_set_145">a_set</a> -&gt; <a href="set.html#mem_33">mem</a> j dc.<a href="#a_set_145">a_set</a>) )

  <span class="keyword">lemma</span> <a name="LemmaLIN_oneway'lemma_961">LemmaLIN_oneway</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k: int.
    <a href="#is_cert_179">is_cert</a> cert -&gt; 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a> -&gt;
    cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Lin_119">Lin</a> -&gt;
    (<span class="keyword">forall</span> j: int. 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> j <a href="int.html#infix%20%3C_21">&lt;</a> k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j) -&gt;
    <a href="#valid_DER_k_368">valid_DER_k</a> cert k -&gt; <a href="#phi_DER_k_580">phi_DER_k</a> cert k

  <span class="keyword">lemma</span> <a name="LemmaLin_otherway'lemma_969">LemmaLin_otherway</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k: int.
    <a href="#is_cert_179">is_cert</a> cert -&gt; 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a> -&gt;
    cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Lin_119">Lin</a> -&gt;
    (<span class="keyword">forall</span> j: int. 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> j <a href="int.html#infix%20%3C_21">&lt;</a> k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j) -&gt;
    <a href="#phi_DER_k_580">phi_DER_k</a> cert k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert k

<span class="comment">(*######################################## Lemma 7 ###############################################*)</span>

  <span class="keyword">lemma</span> <a name="LemmaLin'lemma_979">LemmaLin</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k: int.
    <a href="#is_cert_179">is_cert</a> cert -&gt; 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a> -&gt;
    cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Lin_119">Lin</a> -&gt;
    (<span class="keyword">forall</span> j: int. 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> j <a href="int.html#infix%20%3C_21">&lt;</a> k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j) -&gt;
    <a href="#phi_DER_k_580">phi_DER_k</a> cert k &lt;-&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert k

 <span class="comment">(*######################################## Lemma 8 ###############################################*)</span>

  <span class="keyword">lemma</span> <a name="LemmaRND_Predicate'lemma_988">LemmaRND_Predicate</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, con: <a href="#constraint_70">constraint</a>.
    <a href="#is_cert_179">is_cert</a> cert -&gt; <a href="#phi_RND_564">phi_RND</a> cert con.<a href="#a_71">a</a> (con.<a href="#s_73">s</a> = <a href="#Eq_58">Eq</a>) &lt;-&gt; <a href="#roundable_268">roundable</a> cert con

  <span class="comment">(*################################################################################################*)</span>

                                        <span class="comment">(*helper lemmas*)</span>
  <span class="keyword">lemma</span> <a name="LemmaRND_OneWay_Next_Check'lemma_995">LemmaRND_OneWay_Next_Check</a>:
  <span class="keyword">forall</span> cert:<a href="#certificate_162">certificate</a>, k:int, weights: <a href="array.html#array_15">array</a> real.

   <span class="keyword">let</span> k_total = (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) <span class="keyword">in</span>
    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>
    <span class="keyword">let</span> sgn_prod =
    <span class="keyword">fun</span> i -&gt; weights[i] <a href="real.html#infix%20*._71">*.</a> (<a href="real.html#from_int_129">from_int</a> (<a href="#sign_to_int_60">sign_to_int</a> (<a href="#get_constraint_213">get_constraint</a> cert i).<a href="#s_73">s</a>)) <span class="keyword">in</span>

        <span class="keyword">let</span> all_zero   : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i = 0.0 <span class="keyword">in</span>

    <span class="keyword">let</span> gen_con : <a href="#generalized_constraint_208">generalized_constraint</a> = <a href="#get_lin_comb_246">get_lin_comb</a> cert weights <span class="keyword">in</span>

        <a href="#is_cert_179">is_cert</a> cert /\ cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Rnd_120">Rnd</a> /\ dc.<a href="#data_144">data</a> = <a href="#D_lin_comb_126">D_lin_comb</a> weights /\ (0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>)
        /\ (<span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ weights[i] &lt;&gt; 0.0 -&gt; (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total)) /\
        (<a href="#rnd_gen_con_dom_con_285">rnd_gen_con_dom_con</a> cert (<a href="#get_lin_comb_246">get_lin_comb</a> cert weights) dc.<a href="#con_142">con</a>) -&gt; <a href="#phi_RND_564">phi_RND</a> cert gen_con.<a href="#lhs_209">lhs</a> all_zero

  <span class="keyword">lemma</span> <a name="LemmaRND_OneWay_Big_Check'lemma_1012">LemmaRND_OneWay_Big_Check</a>:
  <span class="keyword">forall</span> cert:<a href="#certificate_162">certificate</a>, k:int, weights: <a href="array.html#array_15">array</a> real.

    <span class="keyword">let</span> k_total = (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) <span class="keyword">in</span>
    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>
    <span class="keyword">let</span> sgn_prod =
    <span class="keyword">fun</span> i -&gt; weights[i] <a href="real.html#infix%20*._71">*.</a> (<a href="real.html#from_int_129">from_int</a> (<a href="#sign_to_int_60">sign_to_int</a> (<a href="#get_constraint_213">get_constraint</a> cert i).<a href="#s_73">s</a>)) <span class="keyword">in</span>

        <span class="keyword">let</span> all_nonneg : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i <a href="real.html#infix%20%3E=._78">&gt;=.</a> 0.0 <span class="keyword">in</span>
        <span class="keyword">let</span> all_nonpos : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0)  -&gt; sgn_prod i <a href="real.html#infix%20%3C=._77">&lt;=.</a> 0.0 <span class="keyword">in</span>

    <span class="keyword">let</span> gen_con : <a href="#generalized_constraint_208">generalized_constraint</a> = <a href="#get_lin_comb_246">get_lin_comb</a> cert weights <span class="keyword">in</span>

        <a href="#is_cert_179">is_cert</a> cert /\ cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Rnd_120">Rnd</a> /\ dc.<a href="#data_144">data</a> = <a href="#D_lin_comb_126">D_lin_comb</a> weights /\ (0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>)
        /\ (<span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ weights[i] &lt;&gt; 0.0 -&gt; (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total)) /\
        (<a href="#rnd_gen_con_dom_con_285">rnd_gen_con_dom_con</a> cert (<a href="#get_lin_comb_246">get_lin_comb</a> cert weights) dc.<a href="#con_142">con</a>) -&gt;
        (
        (
        (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j <a href="#n_46">n</a> -&gt; gen_con.<a href="#lhs_209">lhs</a>[j] = 0.0) /\
        (<span class="keyword">if</span> all_nonneg <span class="keyword">then</span> gen_con.<a href="#rhs_210">rhs</a> <a href="real.html#infix%20%3E._80">&gt;.</a> 0.0 <span class="keyword">else</span>
          <span class="keyword">if</span> all_nonpos <span class="keyword">then</span> gen_con.<a href="#rhs_210">rhs</a> <a href="real.html#infix%20%3C._79">&lt;.</a> 0.0 <span class="keyword">else</span> <span class="keyword">false</span>)
        )
        \/
        (
        (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j <a href="#n_46">n</a> -&gt; gen_con.<a href="#lhs_209">lhs</a>[j] = dc.<a href="#con_142">con</a>.<a href="#a_71">a</a>[j]) /\
        (<span class="keyword">if</span> dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Eq_58">Eq</a> <span class="keyword">then</span> <span class="keyword">false</span> <span class="keyword">else</span>
          <span class="keyword">if</span> dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Geq_57">Geq</a> <span class="keyword">then</span> (all_nonneg /\ (<a href="real.html#from_int_129">from_int</a> (<a href="real.html#ceil_184">ceil</a> gen_con.<a href="#rhs_210">rhs</a>)) <a href="real.html#infix%20%3E=._78">&gt;=.</a> dc.<a href="#con_142">con</a>.<a href="#b_72">b</a>) <span class="keyword">else</span>
             (all_nonpos /\ (<a href="real.html#from_int_129">from_int</a> (<a href="real.html#floor_183">floor</a> gen_con.<a href="#rhs_210">rhs</a>)) <a href="real.html#infix%20%3C=._77">&lt;=.</a> dc.<a href="#con_142">con</a>.<a href="#b_72">b</a>))
        )
        )

  <span class="keyword">lemma</span> <a name="LemmaRND_OneWay_All_Together_Unfold'lemma_1044">LemmaRND_OneWay_All_Together_Unfold</a>:
  <span class="keyword">forall</span> cert:<a href="#certificate_162">certificate</a>, k:int, weights: <a href="array.html#array_15">array</a> real.

    <span class="keyword">let</span> k_total = (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) <span class="keyword">in</span>
    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>
    <span class="keyword">let</span> sgn_prod =
    <span class="keyword">fun</span> i -&gt; weights[i] <a href="real.html#infix%20*._71">*.</a> (<a href="real.html#from_int_129">from_int</a> (<a href="#sign_to_int_60">sign_to_int</a> (<a href="#get_constraint_213">get_constraint</a> cert i).<a href="#s_73">s</a>)) <span class="keyword">in</span>

        <span class="keyword">let</span> all_nonneg : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i <a href="real.html#infix%20%3E=._78">&gt;=.</a> 0.0 <span class="keyword">in</span>
        <span class="keyword">let</span> all_zero   : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i = 0.0 <span class="keyword">in</span>
        <span class="keyword">let</span> all_nonpos : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i <a href="real.html#infix%20%3C=._77">&lt;=.</a> 0.0 <span class="keyword">in</span>

    <span class="keyword">let</span> gen_con : <a href="#generalized_constraint_208">generalized_constraint</a> = <a href="#get_lin_comb_246">get_lin_comb</a> cert weights <span class="keyword">in</span>

        <a href="#is_cert_179">is_cert</a> cert /\ cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Rnd_120">Rnd</a>
       /\ dc.<a href="#data_144">data</a> = <a href="#D_lin_comb_126">D_lin_comb</a> weights /\ (0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>)
       /\ (<span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ weights[i] &lt;&gt; 0.0 -&gt; (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total)) /\
        (<a href="#rnd_gen_con_dom_con_285">rnd_gen_con_dom_con</a> cert (<a href="#get_lin_comb_246">get_lin_comb</a> cert weights) dc.<a href="#con_142">con</a>) -&gt;
        (
        (
        (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j <a href="#n_46">n</a> -&gt; gen_con.<a href="#lhs_209">lhs</a>[j] = 0.0) /\
        (<span class="keyword">if</span> all_nonneg <span class="keyword">then</span> gen_con.<a href="#rhs_210">rhs</a> <a href="real.html#infix%20%3E._80">&gt;.</a> 0.0 <span class="keyword">else</span>
          <span class="keyword">if</span> all_nonpos <span class="keyword">then</span> gen_con.<a href="#rhs_210">rhs</a> <a href="real.html#infix%20%3C._79">&lt;.</a> 0.0 <span class="keyword">else</span> <span class="keyword">false</span>)
        )
        \/
        (
        (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j <a href="#n_46">n</a> -&gt; gen_con.<a href="#lhs_209">lhs</a>[j] = dc.<a href="#con_142">con</a>.<a href="#a_71">a</a>[j]) /\
        (<span class="keyword">if</span> dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Eq_58">Eq</a> <span class="keyword">then</span> <span class="keyword">false</span> <span class="keyword">else</span>
          <span class="keyword">if</span> dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Geq_57">Geq</a> <span class="keyword">then</span> (all_nonneg /\ (<a href="real.html#from_int_129">from_int</a> (<a href="real.html#ceil_184">ceil</a> gen_con.<a href="#rhs_210">rhs</a>)) <a href="real.html#infix%20%3E=._78">&gt;=.</a> dc.<a href="#con_142">con</a>.<a href="#b_72">b</a>) <span class="keyword">else</span>
             (all_nonpos /\ (<a href="real.html#from_int_129">from_int</a> (<a href="real.html#floor_183">floor</a> gen_con.<a href="#rhs_210">rhs</a>)) <a href="real.html#infix%20%3C=._77">&lt;=.</a> dc.<a href="#con_142">con</a>.<a href="#b_72">b</a>))
        )
        ) /\ <a href="#phi_RND_564">phi_RND</a> cert gen_con.<a href="#lhs_209">lhs</a> all_zero

  <span class="keyword">lemma</span> <a name="One_Direction_Val'lemma_1078">One_Direction_Val</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k:int, weights: <a href="array.html#array_15">array</a> real.

    <span class="keyword">let</span> k_total = (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) <span class="keyword">in</span>
    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>

        <a href="#is_cert_179">is_cert</a> cert /\ (cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Lin_119">Lin</a> \/ cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Rnd_120">Rnd</a>) /\ dc.<a href="#data_144">data</a> = <a href="#D_lin_comb_126">D_lin_comb</a> weights
        /\ <a href="#in_range_130">in_range</a> k (<a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>)
        /\ (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j) /\ <a href="#val_ASM_341">val_ASM</a> cert k -&gt;
        (<span class="keyword">forall</span> j: int. (<a href="#is_asm_index_171">is_asm_index</a> cert j /\ (j <a href="int.html#infix%20%3C_21">&lt;</a> k_total)) -&gt;
        (<a href="#is_asm_of_302">is_asm_of</a> cert j k_total &lt;-&gt;  <span class="keyword">exists</span> i: int.
        (weights[i] &lt;&gt; 0.0 /\ (j <a href="int.html#infix%20%3C=_25">&lt;=</a> i) /\ (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total) /\ <a href="#is_asm_of_302">is_asm_of</a> cert j i)))

  <span class="keyword">lemma</span> <a name="One_Direction_Val_Phi'lemma_1091">One_Direction_Val_Phi</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k:int, weights: <a href="array.html#array_15">array</a> real.

    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>

        <a href="#is_cert_179">is_cert</a> cert /\ (cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Lin_119">Lin</a> \/ cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Rnd_120">Rnd</a>) /\ dc.<a href="#data_144">data</a> = <a href="#D_lin_comb_126">D_lin_comb</a> weights
        /\ <a href="#in_range_130">in_range</a> k (<a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>)
        /\ (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j) /\ <a href="#val_ASM_341">val_ASM</a> cert k -&gt;
        <a href="#phi_ASM_513">phi_ASM</a> cert k

  <span class="keyword">lemma</span> <a name="LemmaRND_OneWay_Phi_ASM'lemma_1101">LemmaRND_OneWay_Phi_ASM</a>:
  <span class="keyword">forall</span> cert:<a href="#certificate_162">certificate</a>, k:int, weights: <a href="array.html#array_15">array</a> real.

    <span class="keyword">let</span> k_total = (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) <span class="keyword">in</span>
    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>

        <a href="#is_cert_179">is_cert</a> cert /\ cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Rnd_120">Rnd</a> /\ dc.<a href="#data_144">data</a> = <a href="#D_lin_comb_126">D_lin_comb</a> weights /\ (0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>)
        /\ (<span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ weights[i] &lt;&gt; 0.0 -&gt; (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total)) /\ (<span class="keyword">forall</span> j: int. 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> j <a href="int.html#infix%20%3C_21">&lt;</a> k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j)
        /\ <a href="#valid_DER_k_368">valid_DER_k</a> cert k -&gt; <a href="#phi_ASM_513">phi_ASM</a> cert k

  <span class="keyword">lemma</span> <a name="LemmaRND_OneWay_All_Together_Unfold_ALL'lemma_1111">LemmaRND_OneWay_All_Together_Unfold_ALL</a>:
  <span class="keyword">forall</span> cert:<a href="#certificate_162">certificate</a>, k:int, weights: <a href="array.html#array_15">array</a> real.

    <span class="keyword">let</span> k_total = (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) <span class="keyword">in</span>
    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>
    <span class="keyword">let</span> sgn_prod =
    <span class="keyword">fun</span> i -&gt; weights[i] <a href="real.html#infix%20*._71">*.</a> (<a href="real.html#from_int_129">from_int</a> (<a href="#sign_to_int_60">sign_to_int</a> (<a href="#get_constraint_213">get_constraint</a> cert i).<a href="#s_73">s</a>)) <span class="keyword">in</span>

        <span class="keyword">let</span> all_nonneg : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i <a href="real.html#infix%20%3E=._78">&gt;=.</a> 0.0 <span class="keyword">in</span>
        <span class="keyword">let</span> all_zero   : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i = 0.0 <span class="keyword">in</span>
        <span class="keyword">let</span> all_nonpos : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i <a href="real.html#infix%20%3C=._77">&lt;=.</a> 0.0 <span class="keyword">in</span>

    <span class="keyword">let</span> gen_con : <a href="#generalized_constraint_208">generalized_constraint</a> = <a href="#get_lin_comb_246">get_lin_comb</a> cert weights <span class="keyword">in</span>

        <a href="#is_cert_179">is_cert</a> cert /\ cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Rnd_120">Rnd</a> /\ dc.<a href="#data_144">data</a> = <a href="#D_lin_comb_126">D_lin_comb</a> weights /\ (0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>)
        /\ (<span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ weights[i] &lt;&gt; 0.0 -&gt; (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total)) /\ (<span class="keyword">forall</span> j: int. 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> j <a href="int.html#infix%20%3C_21">&lt;</a> k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j)
        /\ (<a href="#rnd_gen_con_dom_con_285">rnd_gen_con_dom_con</a> cert (<a href="#get_lin_comb_246">get_lin_comb</a> cert weights) dc.<a href="#con_142">con</a>) /\ <a href="#valid_DER_k_368">valid_DER_k</a> cert k -&gt;
        (
        (
        (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j <a href="#n_46">n</a> -&gt; gen_con.<a href="#lhs_209">lhs</a>[j] = 0.0) /\
        (<span class="keyword">if</span> all_nonneg <span class="keyword">then</span> gen_con.<a href="#rhs_210">rhs</a> <a href="real.html#infix%20%3E._80">&gt;.</a> 0.0 <span class="keyword">else</span>
          <span class="keyword">if</span> all_nonpos <span class="keyword">then</span> gen_con.<a href="#rhs_210">rhs</a> <a href="real.html#infix%20%3C._79">&lt;.</a> 0.0 <span class="keyword">else</span> <span class="keyword">false</span>)
        )
        \/
        (
        (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j <a href="#n_46">n</a> -&gt; gen_con.<a href="#lhs_209">lhs</a>[j] = dc.<a href="#con_142">con</a>.<a href="#a_71">a</a>[j]) /\
        (<span class="keyword">if</span> dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Eq_58">Eq</a> <span class="keyword">then</span> <span class="keyword">false</span> <span class="keyword">else</span>
          <span class="keyword">if</span> dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Geq_57">Geq</a> <span class="keyword">then</span> (all_nonneg /\ (<a href="real.html#from_int_129">from_int</a> (<a href="real.html#ceil_184">ceil</a> gen_con.<a href="#rhs_210">rhs</a>)) <a href="real.html#infix%20%3E=._78">&gt;=.</a> dc.<a href="#con_142">con</a>.<a href="#b_72">b</a>) <span class="keyword">else</span>
             (all_nonpos /\ (<a href="real.html#from_int_129">from_int</a> (<a href="real.html#floor_183">floor</a> gen_con.<a href="#rhs_210">rhs</a>)) <a href="real.html#infix%20%3C=._77">&lt;=.</a> dc.<a href="#con_142">con</a>.<a href="#b_72">b</a>))
        )
        ) /\ <a href="#phi_RND_564">phi_RND</a> cert gen_con.<a href="#lhs_209">lhs</a> all_zero /\ <a href="#phi_ASM_513">phi_ASM</a> cert k

  <span class="keyword">lemma</span> <a name="LemmaRND_OneWay_All_Together_Unfold_ALL_val'lemma_1145">LemmaRND_OneWay_All_Together_Unfold_ALL_val</a>:
  <span class="keyword">forall</span> cert:<a href="#certificate_162">certificate</a>, k:int, weights: <a href="array.html#array_15">array</a> real.

    <span class="keyword">let</span> k_total = (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) <span class="keyword">in</span>
    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>
    <span class="keyword">let</span> sgn_prod =
    <span class="keyword">fun</span> i -&gt; weights[i] <a href="real.html#infix%20*._71">*.</a> (<a href="real.html#from_int_129">from_int</a> (<a href="#sign_to_int_60">sign_to_int</a> (<a href="#get_constraint_213">get_constraint</a> cert i).<a href="#s_73">s</a>)) <span class="keyword">in</span>

        <span class="keyword">let</span> all_nonneg : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i <a href="real.html#infix%20%3E=._78">&gt;=.</a> 0.0 <span class="keyword">in</span>
        <span class="keyword">let</span> all_zero   : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a>  /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i = 0.0 <span class="keyword">in</span>
        <span class="keyword">let</span> all_nonpos : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i <a href="real.html#infix%20%3C=._77">&lt;=.</a> 0.0 <span class="keyword">in</span>

    <span class="keyword">let</span> gen_con : <a href="#generalized_constraint_208">generalized_constraint</a> = <a href="#get_lin_comb_246">get_lin_comb</a> cert weights <span class="keyword">in</span>

        <a href="#is_cert_179">is_cert</a> cert /\ cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Rnd_120">Rnd</a>
        /\ dc.<a href="#data_144">data</a> = <a href="#D_lin_comb_126">D_lin_comb</a> weights /\ (0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>) /\ (<span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ weights[i] &lt;&gt; 0.0 -&gt; (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total))
        /\ (<span class="keyword">forall</span> j: int. 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> j <a href="int.html#infix%20%3C_21">&lt;</a> k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j) /\<a href="#valid_DER_k_368">valid_DER_k</a> cert k -&gt;
        (
        (
        (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j <a href="#n_46">n</a> -&gt; gen_con.<a href="#lhs_209">lhs</a>[j] = 0.0) /\
        (<span class="keyword">if</span> all_nonneg <span class="keyword">then</span> gen_con.<a href="#rhs_210">rhs</a> <a href="real.html#infix%20%3E._80">&gt;.</a> 0.0 <span class="keyword">else</span>
          <span class="keyword">if</span> all_nonpos <span class="keyword">then</span> gen_con.<a href="#rhs_210">rhs</a> <a href="real.html#infix%20%3C._79">&lt;.</a> 0.0 <span class="keyword">else</span> <span class="keyword">false</span>)
        )
        \/
        (
        (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j <a href="#n_46">n</a> -&gt; gen_con.<a href="#lhs_209">lhs</a>[j] = dc.<a href="#con_142">con</a>.<a href="#a_71">a</a>[j]) /\
        (<span class="keyword">if</span> dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Eq_58">Eq</a> <span class="keyword">then</span> <span class="keyword">false</span> <span class="keyword">else</span>
          <span class="keyword">if</span> dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Geq_57">Geq</a> <span class="keyword">then</span> (all_nonneg /\ (<a href="real.html#from_int_129">from_int</a> (<a href="real.html#ceil_184">ceil</a> gen_con.<a href="#rhs_210">rhs</a>)) <a href="real.html#infix%20%3E=._78">&gt;=.</a> dc.<a href="#con_142">con</a>.<a href="#b_72">b</a>) <span class="keyword">else</span>
             (all_nonpos /\ (<a href="real.html#from_int_129">from_int</a> (<a href="real.html#floor_183">floor</a> gen_con.<a href="#rhs_210">rhs</a>)) <a href="real.html#infix%20%3C=._77">&lt;=.</a> dc.<a href="#con_142">con</a>.<a href="#b_72">b</a>))
        )
        ) /\ <a href="#phi_RND_564">phi_RND</a> cert gen_con.<a href="#lhs_209">lhs</a> all_zero /\ <a href="#phi_ASM_513">phi_ASM</a> cert k

  <span class="keyword">lemma</span> <a name="LemmaRND_OneWay_All_Together_Unfold_ALL_val_help'lemma_1179">LemmaRND_OneWay_All_Together_Unfold_ALL_val_help</a>:
  <span class="keyword">forall</span> cert:<a href="#certificate_162">certificate</a>, k:int, weights: <a href="array.html#array_15">array</a> real.

    <span class="keyword">let</span> k_total = (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) <span class="keyword">in</span>
    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>
    <span class="keyword">let</span> sgn_prod =
    <span class="keyword">fun</span> i -&gt; weights[i] <a href="real.html#infix%20*._71">*.</a> (<a href="real.html#from_int_129">from_int</a> (<a href="#sign_to_int_60">sign_to_int</a> (<a href="#get_constraint_213">get_constraint</a> cert i).<a href="#s_73">s</a>)) <span class="keyword">in</span>

        <span class="keyword">let</span> all_nonneg : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0)  -&gt; sgn_prod i <a href="real.html#infix%20%3E=._78">&gt;=.</a> 0.0 <span class="keyword">in</span>
        <span class="keyword">let</span> all_zero   : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0)  -&gt; sgn_prod i = 0.0 <span class="keyword">in</span>
        <span class="keyword">let</span> all_nonpos : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0)  -&gt; sgn_prod i <a href="real.html#infix%20%3C=._77">&lt;=.</a> 0.0 <span class="keyword">in</span>

    <span class="keyword">let</span> gen_con : <a href="#generalized_constraint_208">generalized_constraint</a> = <a href="#get_lin_comb_246">get_lin_comb</a> cert weights <span class="keyword">in</span>
        <a href="#is_cert_179">is_cert</a> cert /\ cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Rnd_120">Rnd</a>
        /\ dc.<a href="#data_144">data</a> = <a href="#D_lin_comb_126">D_lin_comb</a> weights  /\ (<span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ weights[i] &lt;&gt; 0.0 -&gt; (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total)) /\
        (
        (
        (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j <a href="#n_46">n</a> -&gt; gen_con.<a href="#lhs_209">lhs</a>[j] = 0.0) /\
        (<span class="keyword">if</span> all_nonneg <span class="keyword">then</span> gen_con.<a href="#rhs_210">rhs</a> <a href="real.html#infix%20%3E._80">&gt;.</a> 0.0 <span class="keyword">else</span>
          <span class="keyword">if</span> all_nonpos <span class="keyword">then</span> gen_con.<a href="#rhs_210">rhs</a> <a href="real.html#infix%20%3C._79">&lt;.</a> 0.0 <span class="keyword">else</span> <span class="keyword">false</span>)
        )
        \/
        (
        (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j <a href="#n_46">n</a> -&gt; gen_con.<a href="#lhs_209">lhs</a>[j] = dc.<a href="#con_142">con</a>.<a href="#a_71">a</a>[j]) /\
        (<span class="keyword">if</span> dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Eq_58">Eq</a> <span class="keyword">then</span> <span class="keyword">false</span> <span class="keyword">else</span>
          <span class="keyword">if</span> dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Geq_57">Geq</a> <span class="keyword">then</span> (all_nonneg /\ (<a href="real.html#from_int_129">from_int</a> (<a href="real.html#ceil_184">ceil</a> gen_con.<a href="#rhs_210">rhs</a>)) <a href="real.html#infix%20%3E=._78">&gt;=.</a> dc.<a href="#con_142">con</a>.<a href="#b_72">b</a>) <span class="keyword">else</span>
             (all_nonpos /\ (<a href="real.html#from_int_129">from_int</a> (<a href="real.html#floor_183">floor</a> gen_con.<a href="#rhs_210">rhs</a>)) <a href="real.html#infix%20%3C=._77">&lt;=.</a> dc.<a href="#con_142">con</a>.<a href="#b_72">b</a>))
        )
        ) /\ <a href="#phi_RND_564">phi_RND</a> cert gen_con.<a href="#lhs_209">lhs</a> all_zero /\ <a href="#phi_ASM_513">phi_ASM</a> cert k -&gt; <a href="#phi_DER_k_580">phi_DER_k</a> cert k

  <span class="keyword">lemma</span> <a name="LemmaRND_OneWay_All_Together_Unfold_ALL_val_help_help'lemma_1212">LemmaRND_OneWay_All_Together_Unfold_ALL_val_help_help</a>:
  <span class="keyword">forall</span> cert:<a href="#certificate_162">certificate</a>, k:int, weights: <a href="array.html#array_15">array</a> real.

    <span class="keyword">let</span> k_total = (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) <span class="keyword">in</span>
    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>

        <a href="#is_cert_179">is_cert</a> cert /\ cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Rnd_120">Rnd</a>  /\ dc.<a href="#data_144">data</a> = <a href="#D_lin_comb_126">D_lin_comb</a> weights /\ (0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>)
        /\ (<span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ weights[i] &lt;&gt; 0.0 -&gt; (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total))
        /\ (<span class="keyword">forall</span> j: int. 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> j <a href="int.html#infix%20%3C_21">&lt;</a> k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j)
        /\ <a href="#valid_DER_k_368">valid_DER_k</a> cert k -&gt;  <a href="#phi_DER_k_580">phi_DER_k</a> cert k

  <span class="keyword">lemma</span> <a name="LemmaRND_OneWay'lemma_1225">LemmaRND_OneWay</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k: int.
    <a href="#is_cert_179">is_cert</a> cert -&gt; 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a> -&gt;
    cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Rnd_120">Rnd</a> -&gt;
    (<span class="keyword">forall</span> j: int. 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> j <a href="int.html#infix%20%3C_21">&lt;</a> k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j) -&gt;
    <a href="#valid_DER_k_368">valid_DER_k</a> cert k -&gt; <a href="#phi_DER_k_580">phi_DER_k</a> cert k

  <span class="keyword">lemma</span> <a name="Other_Direction_Phi'lemma_1234">Other_Direction_Phi</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k:int, weights: <a href="array.html#array_15">array</a> real.

    <span class="keyword">let</span> k_total = (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) <span class="keyword">in</span>
    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>

        <a href="#is_cert_179">is_cert</a> cert /\ (cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Lin_119">Lin</a> \/ cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Rnd_120">Rnd</a>)
        /\ dc.<a href="#data_144">data</a> = <a href="#D_lin_comb_126">D_lin_comb</a> weights  /\ <a href="#in_range_130">in_range</a> k (<a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>)
        /\ (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j)
        /\ (<span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ weights[i] &lt;&gt; 0.0 -&gt; (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total)) /\ <a href="#phi_ASM_513">phi_ASM</a> cert k -&gt;
        ( (<span class="keyword">forall</span> j: int. <a href="set.html#mem_33">mem</a> j dc.<a href="#a_set_145">a_set</a> &lt;-&gt; <span class="keyword">exists</span> i:int. weights[i] &lt;&gt; 0.0 /\ (<a href="#m_47">m</a> <a href="int.html#infix%20%3C=_25">&lt;=</a> i) /\ (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total) /\
         <a href="set.html#mem_33">mem</a> j cert.<a href="#cDER_168">cDER</a>[i <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>].<a href="#a_set_145">a_set</a>)
        /\
        (<span class="keyword">forall</span> i: int. weights[i] &lt;&gt; 0.0 /\ (<a href="#m_47">m</a> <a href="int.html#infix%20%3C=_25">&lt;=</a> i) /\ (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total) -&gt;
        <span class="keyword">forall</span> j: int. <a href="set.html#mem_33">mem</a> j cert.<a href="#cDER_168">cDER</a>[i <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>].<a href="#a_set_145">a_set</a> -&gt; <a href="set.html#mem_33">mem</a> j dc.<a href="#a_set_145">a_set</a>) )

  <span class="keyword">lemma</span> <a name="Other_Direction_Phi_Val'lemma_1252">Other_Direction_Phi_Val</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k:int, weights: <a href="array.html#array_15">array</a> real.

    <span class="keyword">let</span> k_total = (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) <span class="keyword">in</span>
    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>

        <a href="#is_cert_179">is_cert</a> cert /\ (cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Lin_119">Lin</a> \/ cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Rnd_120">Rnd</a>)
        /\ dc.<a href="#data_144">data</a> = <a href="#D_lin_comb_126">D_lin_comb</a> weights  /\ <a href="#in_range_130">in_range</a> k (<a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>)
        /\ (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j)
        /\ (<span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ weights[i] &lt;&gt; 0.0 -&gt; (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total)) /\ <a href="#phi_ASM_513">phi_ASM</a> cert k -&gt;
        <a href="#val_ASM_341">val_ASM</a> cert k

  <span class="keyword">lemma</span> <a name="LemmaRND_OtherWay_Next_Check'lemma_1266">LemmaRND_OtherWay_Next_Check</a>:
  <span class="keyword">forall</span> cert:<a href="#certificate_162">certificate</a>, k:int, weights: <a href="array.html#array_15">array</a> real.

    <span class="keyword">let</span> k_total = (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) <span class="keyword">in</span>
    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>
    <span class="keyword">let</span> sgn_prod =
    <span class="keyword">fun</span> i -&gt; weights[i] <a href="real.html#infix%20*._71">*.</a> (<a href="real.html#from_int_129">from_int</a> (<a href="#sign_to_int_60">sign_to_int</a> (<a href="#get_constraint_213">get_constraint</a> cert i).<a href="#s_73">s</a>)) <span class="keyword">in</span>

        <span class="keyword">let</span> all_nonneg : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a>  /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i <a href="real.html#infix%20%3E=._78">&gt;=.</a> 0.0 <span class="keyword">in</span>
        <span class="keyword">let</span> all_zero   : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a>  /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i = 0.0 <span class="keyword">in</span>
        <span class="keyword">let</span> all_nonpos : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a>  /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i <a href="real.html#infix%20%3C=._77">&lt;=.</a> 0.0 <span class="keyword">in</span>

    <span class="keyword">let</span> gen_con : <a href="#generalized_constraint_208">generalized_constraint</a> = <a href="#get_lin_comb_246">get_lin_comb</a> cert weights <span class="keyword">in</span>

        <a href="#is_cert_179">is_cert</a> cert /\ <a href="#phi_ASM_513">phi_ASM</a> cert k /\ cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Rnd_120">Rnd</a>  /\ dc.<a href="#data_144">data</a> = <a href="#D_lin_comb_126">D_lin_comb</a> weights /\ (0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>)
        /\ (<span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ weights[i] &lt;&gt; 0.0 -&gt; (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total)) /\
        <a href="#phi_RND_564">phi_RND</a> cert gen_con.<a href="#lhs_209">lhs</a> all_zero /\
        (<span class="keyword">forall</span> j: int. 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> j <a href="int.html#infix%20%3C_21">&lt;</a> k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j) /\
        (
        (
        (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j <a href="#n_46">n</a> -&gt; gen_con.<a href="#lhs_209">lhs</a>[j] = 0.0) /\
        (<span class="keyword">if</span> all_nonneg <span class="keyword">then</span> gen_con.<a href="#rhs_210">rhs</a> <a href="real.html#infix%20%3E._80">&gt;.</a> 0.0 <span class="keyword">else</span>
          <span class="keyword">if</span> all_nonpos <span class="keyword">then</span> gen_con.<a href="#rhs_210">rhs</a> <a href="real.html#infix%20%3C._79">&lt;.</a> 0.0 <span class="keyword">else</span> <span class="keyword">false</span>)
        )
        \/
        (
        (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j <a href="#n_46">n</a> -&gt; gen_con.<a href="#lhs_209">lhs</a>[j] = dc.<a href="#con_142">con</a>.<a href="#a_71">a</a>[j]) /\
        (<span class="keyword">if</span> dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Eq_58">Eq</a> <span class="keyword">then</span> <span class="keyword">false</span> <span class="keyword">else</span>
          <span class="keyword">if</span> dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Geq_57">Geq</a> <span class="keyword">then</span> (all_nonneg /\ (<a href="real.html#from_int_129">from_int</a> (<a href="real.html#ceil_184">ceil</a> gen_con.<a href="#rhs_210">rhs</a>)) <a href="real.html#infix%20%3E=._78">&gt;=.</a> dc.<a href="#con_142">con</a>.<a href="#b_72">b</a>) <span class="keyword">else</span>
             (all_nonpos /\ (<a href="real.html#from_int_129">from_int</a> (<a href="real.html#floor_183">floor</a> gen_con.<a href="#rhs_210">rhs</a>)) <a href="real.html#infix%20%3C=._77">&lt;=.</a> dc.<a href="#con_142">con</a>.<a href="#b_72">b</a>))
        )
        ) -&gt; <a href="#val_ASM_341">val_ASM</a> cert k

  <span class="keyword">lemma</span> <a name="LemmaRND_OtherWay_Next_Check_Next_Next'lemma_1302">LemmaRND_OtherWay_Next_Check_Next_Next</a>:
  <span class="keyword">forall</span> cert:<a href="#certificate_162">certificate</a>, k:int, weights: <a href="array.html#array_15">array</a> real.

    <span class="keyword">let</span> k_total = (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) <span class="keyword">in</span>
    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>
    <span class="keyword">let</span> sgn_prod =
        <span class="keyword">fun</span> i -&gt; weights[i] <a href="real.html#infix%20*._71">*.</a> (<a href="real.html#from_int_129">from_int</a> (<a href="#sign_to_int_60">sign_to_int</a> (<a href="#get_constraint_213">get_constraint</a> cert i).<a href="#s_73">s</a>)) <span class="keyword">in</span>

            <span class="keyword">let</span> all_nonneg : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i <a href="real.html#infix%20%3E=._78">&gt;=.</a> 0.0 <span class="keyword">in</span>
            <span class="keyword">let</span> all_zero   : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i = 0.0 <span class="keyword">in</span>
            <span class="keyword">let</span> all_nonpos : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i <a href="real.html#infix%20%3C=._77">&lt;=.</a> 0.0 <span class="keyword">in</span>

        <span class="keyword">let</span> gen_con : <a href="#generalized_constraint_208">generalized_constraint</a> = <a href="#get_lin_comb_246">get_lin_comb</a> cert weights <span class="keyword">in</span>

        <a href="#is_cert_179">is_cert</a> cert /\ <a href="#phi_ASM_513">phi_ASM</a> cert k /\ cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Rnd_120">Rnd</a>  /\ dc.<a href="#data_144">data</a> = <a href="#D_lin_comb_126">D_lin_comb</a> weights /\ (0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>)
        /\ (<span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ weights[i] &lt;&gt; 0.0 -&gt; (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total)) /\
        <a href="#phi_RND_564">phi_RND</a> cert gen_con.<a href="#lhs_209">lhs</a> all_zero /\
        (
        (
        (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j <a href="#n_46">n</a> -&gt; gen_con.<a href="#lhs_209">lhs</a>[j] = 0.0) /\
        (<span class="keyword">if</span> all_nonneg <span class="keyword">then</span> gen_con.<a href="#rhs_210">rhs</a> <a href="real.html#infix%20%3E._80">&gt;.</a> 0.0 <span class="keyword">else</span>
          <span class="keyword">if</span> all_nonpos <span class="keyword">then</span> gen_con.<a href="#rhs_210">rhs</a> <a href="real.html#infix%20%3C._79">&lt;.</a> 0.0 <span class="keyword">else</span> <span class="keyword">false</span>)
        )
        \/
        (
        (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j <a href="#n_46">n</a> -&gt; gen_con.<a href="#lhs_209">lhs</a>[j] = dc.<a href="#con_142">con</a>.<a href="#a_71">a</a>[j]) /\
        (<span class="keyword">if</span> dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Eq_58">Eq</a> <span class="keyword">then</span> <span class="keyword">false</span> <span class="keyword">else</span>
          <span class="keyword">if</span> dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Geq_57">Geq</a> <span class="keyword">then</span> (all_nonneg /\ (<a href="real.html#from_int_129">from_int</a> (<a href="real.html#ceil_184">ceil</a> gen_con.<a href="#rhs_210">rhs</a>)) <a href="real.html#infix%20%3E=._78">&gt;=.</a> dc.<a href="#con_142">con</a>.<a href="#b_72">b</a>) <span class="keyword">else</span>
             (all_nonpos /\ (<a href="real.html#from_int_129">from_int</a> (<a href="real.html#floor_183">floor</a> gen_con.<a href="#rhs_210">rhs</a>)) <a href="real.html#infix%20%3C=._77">&lt;=.</a> dc.<a href="#con_142">con</a>.<a href="#b_72">b</a>))
        )
        ) -&gt; (<a href="#rnd_gen_con_dom_con_285">rnd_gen_con_dom_con</a> cert (<a href="#get_lin_comb_246">get_lin_comb</a> cert weights) dc.<a href="#con_142">con</a>)

  <span class="keyword">lemma</span> <a name="LemmaRND_OtherWay_Next_Check_Next'lemma_1336">LemmaRND_OtherWay_Next_Check_Next</a>:
  <span class="keyword">forall</span> cert:<a href="#certificate_162">certificate</a>, k:int, weights: <a href="array.html#array_15">array</a> real.

     <span class="keyword">let</span> k_total = (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) <span class="keyword">in</span>
     <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>

     <span class="keyword">let</span> sgn_prod =
        <span class="keyword">fun</span> i -&gt; weights[i] <a href="real.html#infix%20*._71">*.</a> (<a href="real.html#from_int_129">from_int</a> (<a href="#sign_to_int_60">sign_to_int</a> (<a href="#get_constraint_213">get_constraint</a> cert i).<a href="#s_73">s</a>)) <span class="keyword">in</span>

            <span class="keyword">let</span> all_nonneg : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i <a href="real.html#infix%20%3E=._78">&gt;=.</a> 0.0 <span class="keyword">in</span>
            <span class="keyword">let</span> all_zero   : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i = 0.0 <span class="keyword">in</span>
            <span class="keyword">let</span> all_nonpos : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i <a href="real.html#infix%20%3C=._77">&lt;=.</a> 0.0 <span class="keyword">in</span>

        <span class="keyword">let</span> gen_con : <a href="#generalized_constraint_208">generalized_constraint</a> = <a href="#get_lin_comb_246">get_lin_comb</a> cert weights <span class="keyword">in</span>

        <a href="#is_cert_179">is_cert</a> cert /\ <a href="#phi_ASM_513">phi_ASM</a> cert k /\ cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Rnd_120">Rnd</a>  /\ dc.<a href="#data_144">data</a> = <a href="#D_lin_comb_126">D_lin_comb</a> weights /\ (0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>)
        /\ (<span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ weights[i] &lt;&gt; 0.0 -&gt; (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total)) /\
        <a href="#phi_RND_564">phi_RND</a> cert gen_con.<a href="#lhs_209">lhs</a> all_zero /\ (<span class="keyword">forall</span> j: int. 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> j <a href="int.html#infix%20%3C_21">&lt;</a> k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j) /\
        (
        (
        (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j <a href="#n_46">n</a> -&gt; gen_con.<a href="#lhs_209">lhs</a>[j] = 0.0) /\
        (<span class="keyword">if</span> all_nonneg <span class="keyword">then</span> gen_con.<a href="#rhs_210">rhs</a> <a href="real.html#infix%20%3E._80">&gt;.</a> 0.0 <span class="keyword">else</span>
          <span class="keyword">if</span> all_nonpos <span class="keyword">then</span> gen_con.<a href="#rhs_210">rhs</a> <a href="real.html#infix%20%3C._79">&lt;.</a> 0.0 <span class="keyword">else</span> <span class="keyword">false</span>)
        )
        \/
        (
        (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j <a href="#n_46">n</a> -&gt; gen_con.<a href="#lhs_209">lhs</a>[j] = dc.<a href="#con_142">con</a>.<a href="#a_71">a</a>[j]) /\
        (<span class="keyword">if</span> dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Eq_58">Eq</a> <span class="keyword">then</span> <span class="keyword">false</span> <span class="keyword">else</span>
          <span class="keyword">if</span> dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Geq_57">Geq</a> <span class="keyword">then</span> (all_nonneg /\ (<a href="real.html#from_int_129">from_int</a> (<a href="real.html#ceil_184">ceil</a> gen_con.<a href="#rhs_210">rhs</a>)) <a href="real.html#infix%20%3E=._78">&gt;=.</a> dc.<a href="#con_142">con</a>.<a href="#b_72">b</a>) <span class="keyword">else</span>
             (all_nonpos /\ (<a href="real.html#from_int_129">from_int</a> (<a href="real.html#floor_183">floor</a> gen_con.<a href="#rhs_210">rhs</a>)) <a href="real.html#infix%20%3C=._77">&lt;=.</a> dc.<a href="#con_142">con</a>.<a href="#b_72">b</a>))
        )
        ) -&gt; (<a href="#rnd_gen_con_dom_con_285">rnd_gen_con_dom_con</a> cert (<a href="#get_lin_comb_246">get_lin_comb</a> cert weights) dc.<a href="#con_142">con</a>) /\ <a href="#val_ASM_341">val_ASM</a> cert k

  <span class="keyword">lemma</span> <a name="LemmaRND_OtherWay_Next_Check_Next_extra'lemma_1371">LemmaRND_OtherWay_Next_Check_Next_extra</a>:
  <span class="keyword">forall</span> cert:<a href="#certificate_162">certificate</a>, k:int, weights: <a href="array.html#array_15">array</a> real.

    <span class="keyword">let</span> k_total = (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) <span class="keyword">in</span>
    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>
    <span class="keyword">let</span> sgn_prod =
    <span class="keyword">fun</span> i -&gt; weights[i] <a href="real.html#infix%20*._71">*.</a> (<a href="real.html#from_int_129">from_int</a> (<a href="#sign_to_int_60">sign_to_int</a> (<a href="#get_constraint_213">get_constraint</a> cert i).<a href="#s_73">s</a>)) <span class="keyword">in</span>

        <span class="keyword">let</span> all_nonneg : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i <a href="real.html#infix%20%3E=._78">&gt;=.</a> 0.0 <span class="keyword">in</span>
        <span class="keyword">let</span> all_zero   : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0)  -&gt; sgn_prod i = 0.0 <span class="keyword">in</span>
        <span class="keyword">let</span> all_nonpos : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i <a href="real.html#infix%20%3C=._77">&lt;=.</a> 0.0 <span class="keyword">in</span>

    <span class="keyword">let</span> gen_con : <a href="#generalized_constraint_208">generalized_constraint</a> = <a href="#get_lin_comb_246">get_lin_comb</a> cert weights <span class="keyword">in</span>

        <a href="#is_cert_179">is_cert</a> cert /\ <a href="#phi_ASM_513">phi_ASM</a> cert k /\ cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Rnd_120">Rnd</a>  /\ dc.<a href="#data_144">data</a> = <a href="#D_lin_comb_126">D_lin_comb</a> weights /\ (0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>)
        /\ <a href="#phi_DER_k_580">phi_DER_k</a> cert k -&gt; (<span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ weights[i] &lt;&gt; 0.0 -&gt; (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total)) /\
        <a href="#phi_RND_564">phi_RND</a> cert gen_con.<a href="#lhs_209">lhs</a> all_zero /\
        (
        (
        (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j <a href="#n_46">n</a> -&gt; gen_con.<a href="#lhs_209">lhs</a>[j] = 0.0) /\
        (<span class="keyword">if</span> all_nonneg <span class="keyword">then</span> gen_con.<a href="#rhs_210">rhs</a> <a href="real.html#infix%20%3E._80">&gt;.</a> 0.0 <span class="keyword">else</span>
          <span class="keyword">if</span> all_nonpos <span class="keyword">then</span> gen_con.<a href="#rhs_210">rhs</a> <a href="real.html#infix%20%3C._79">&lt;.</a> 0.0 <span class="keyword">else</span> <span class="keyword">false</span>)
        )
        \/
        (
        (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j <a href="#n_46">n</a> -&gt; gen_con.<a href="#lhs_209">lhs</a>[j] = dc.<a href="#con_142">con</a>.<a href="#a_71">a</a>[j]) /\
        (<span class="keyword">if</span> dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Eq_58">Eq</a> <span class="keyword">then</span> <span class="keyword">false</span> <span class="keyword">else</span>
          <span class="keyword">if</span> dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Geq_57">Geq</a> <span class="keyword">then</span> (all_nonneg /\ (<a href="real.html#from_int_129">from_int</a> (<a href="real.html#ceil_184">ceil</a> gen_con.<a href="#rhs_210">rhs</a>)) <a href="real.html#infix%20%3E=._78">&gt;=.</a> dc.<a href="#con_142">con</a>.<a href="#b_72">b</a>) <span class="keyword">else</span>
             (all_nonpos /\ (<a href="real.html#from_int_129">from_int</a> (<a href="real.html#floor_183">floor</a> gen_con.<a href="#rhs_210">rhs</a>)) <a href="real.html#infix%20%3C=._77">&lt;=.</a> dc.<a href="#con_142">con</a>.<a href="#b_72">b</a>))
        )
        )

  <span class="keyword">lemma</span> <a name="LemmaRND_OtherWay_Next_Check_Next_extra_extra'lemma_1405">LemmaRND_OtherWay_Next_Check_Next_extra_extra</a>:
  <span class="keyword">forall</span> cert:<a href="#certificate_162">certificate</a>, k:int, weights: <a href="array.html#array_15">array</a> real.

    <span class="keyword">let</span> k_total = (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) <span class="keyword">in</span>
    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>
    <span class="keyword">let</span> sgn_prod =
    <span class="keyword">fun</span> i -&gt; weights[i] <a href="real.html#infix%20*._71">*.</a> (<a href="real.html#from_int_129">from_int</a> (<a href="#sign_to_int_60">sign_to_int</a> (<a href="#get_constraint_213">get_constraint</a> cert i).<a href="#s_73">s</a>)) <span class="keyword">in</span>

        <span class="keyword">let</span> all_nonneg : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i <a href="real.html#infix%20%3E=._78">&gt;=.</a> 0.0 <span class="keyword">in</span>
        <span class="keyword">let</span> all_zero   : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i = 0.0 <span class="keyword">in</span>
        <span class="keyword">let</span> all_nonpos : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i <a href="real.html#infix%20%3C=._77">&lt;=.</a> 0.0 <span class="keyword">in</span>

    <span class="keyword">let</span> gen_con : <a href="#generalized_constraint_208">generalized_constraint</a> = <a href="#get_lin_comb_246">get_lin_comb</a> cert weights <span class="keyword">in</span>

        <a href="#is_cert_179">is_cert</a> cert /\ cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Rnd_120">Rnd</a>  /\ dc.<a href="#data_144">data</a> = <a href="#D_lin_comb_126">D_lin_comb</a> weights /\ (0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>) /\
         (<span class="keyword">forall</span> j: int. 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> j <a href="int.html#infix%20%3C_21">&lt;</a> k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j) /\
         <a href="#phi_DER_k_580">phi_DER_k</a> cert k -&gt; (<span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ weights[i] &lt;&gt; 0.0 -&gt; (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total)) /\
        <a href="#phi_RND_564">phi_RND</a> cert gen_con.<a href="#lhs_209">lhs</a> all_zero /\
        (
        (
        (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j <a href="#n_46">n</a> -&gt; gen_con.<a href="#lhs_209">lhs</a>[j] = 0.0) /\
        (<span class="keyword">if</span> all_nonneg <span class="keyword">then</span> gen_con.<a href="#rhs_210">rhs</a> <a href="real.html#infix%20%3E._80">&gt;.</a> 0.0 <span class="keyword">else</span>
          <span class="keyword">if</span> all_nonpos <span class="keyword">then</span> gen_con.<a href="#rhs_210">rhs</a> <a href="real.html#infix%20%3C._79">&lt;.</a> 0.0 <span class="keyword">else</span> <span class="keyword">false</span>)
        )
        \/
        (
        (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j <a href="#n_46">n</a> -&gt; gen_con.<a href="#lhs_209">lhs</a>[j] = dc.<a href="#con_142">con</a>.<a href="#a_71">a</a>[j]) /\
        (<span class="keyword">if</span> dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Eq_58">Eq</a> <span class="keyword">then</span> <span class="keyword">false</span> <span class="keyword">else</span>
          <span class="keyword">if</span> dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Geq_57">Geq</a> <span class="keyword">then</span> (all_nonneg /\ (<a href="real.html#from_int_129">from_int</a> (<a href="real.html#ceil_184">ceil</a> gen_con.<a href="#rhs_210">rhs</a>)) <a href="real.html#infix%20%3E=._78">&gt;=.</a> dc.<a href="#con_142">con</a>.<a href="#b_72">b</a>) <span class="keyword">else</span>
             (all_nonpos /\ (<a href="real.html#from_int_129">from_int</a> (<a href="real.html#floor_183">floor</a> gen_con.<a href="#rhs_210">rhs</a>)) <a href="real.html#infix%20%3C=._77">&lt;=.</a> dc.<a href="#con_142">con</a>.<a href="#b_72">b</a>))
        )
        ) /\ <a href="#phi_ASM_513">phi_ASM</a> cert k

  <span class="keyword">lemma</span> <a name="LemmaRND_OtherWay_Next_Check_Next_phi'lemma_1440">LemmaRND_OtherWay_Next_Check_Next_phi</a>:
  <span class="keyword">forall</span> cert:<a href="#certificate_162">certificate</a>, k:int, weights: <a href="array.html#array_15">array</a> real.

    <span class="keyword">let</span> k_total = (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) <span class="keyword">in</span>
    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>

        <a href="#is_cert_179">is_cert</a> cert /\ cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Rnd_120">Rnd</a>  /\ dc.<a href="#data_144">data</a> = <a href="#D_lin_comb_126">D_lin_comb</a> weights /\ (0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>)
        /\ (<span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ weights[i] &lt;&gt; 0.0 -&gt; (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total))
        /\ (<span class="keyword">forall</span> j: int. 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> j <a href="int.html#infix%20%3C_21">&lt;</a> k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j) /\ <a href="#phi_DER_k_580">phi_DER_k</a> cert k
         -&gt; (<span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ weights[i] &lt;&gt; 0.0 -&gt; (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total)) /\
         (<a href="#rnd_gen_con_dom_con_285">rnd_gen_con_dom_con</a> cert (<a href="#get_lin_comb_246">get_lin_comb</a> cert weights) dc.<a href="#con_142">con</a>) /\ <a href="#val_ASM_341">val_ASM</a> cert k

  <span class="keyword">lemma</span> <a name="LemmaRND_OtherWay_Next_Check_Next_Phi_Val'lemma_1454">LemmaRND_OtherWay_Next_Check_Next_Phi_Val</a>:
  <span class="keyword">forall</span> cert:<a href="#certificate_162">certificate</a>, k:int, weights: <a href="array.html#array_15">array</a> real.

    <span class="keyword">let</span> k_total = (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) <span class="keyword">in</span>
    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>

        <a href="#is_cert_179">is_cert</a> cert /\ cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Rnd_120">Rnd</a>  /\ dc.<a href="#data_144">data</a> = <a href="#D_lin_comb_126">D_lin_comb</a> weights /\ (0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>)
        /\ (<span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ weights[i] &lt;&gt; 0.0 -&gt; (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total))
        /\ (<span class="keyword">forall</span> j: int. 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> j <a href="int.html#infix%20%3C_21">&lt;</a> k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j) /\
        <a href="#phi_DER_k_580">phi_DER_k</a> cert k
         -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert k

  <span class="keyword">lemma</span> <a name="LemmaRND_OtherWay_Next_Check_Next_Phi_Val_Fin'lemma_1467">LemmaRND_OtherWay_Next_Check_Next_Phi_Val_Fin</a>:
  <span class="keyword">forall</span> cert:<a href="#certificate_162">certificate</a>, k:int, weights: <a href="array.html#array_15">array</a> real.

    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>

        <a href="#is_cert_179">is_cert</a> cert /\ cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Rnd_120">Rnd</a>  /\ dc.<a href="#data_144">data</a> = <a href="#D_lin_comb_126">D_lin_comb</a> weights /\ (0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>)
        /\ (<span class="keyword">forall</span> j: int. 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> j <a href="int.html#infix%20%3C_21">&lt;</a> k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j) -&gt; <a href="#phi_DER_k_580">phi_DER_k</a> cert k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert k

  <span class="keyword">lemma</span> <a name="LemmaRND_OtherWay'lemma_1476">LemmaRND_OtherWay</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k: int.
    <a href="#is_cert_179">is_cert</a> cert -&gt; 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a> -&gt; cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Rnd_120">Rnd</a> -&gt;
    (<span class="keyword">forall</span> j: int. 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> j <a href="int.html#infix%20%3C_21">&lt;</a> k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j) -&gt;
    <a href="#phi_DER_k_580">phi_DER_k</a> cert k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert k

  <span class="comment">(*############################################## Lemma 9 ########################################################*)</span>

   <span class="keyword">lemma</span> <a name="LemmaRND'lemma_1484">LemmaRND</a>:
    <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k: int.
    <a href="#is_cert_179">is_cert</a> cert -&gt; 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a> -&gt;
    cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Rnd_120">Rnd</a> -&gt;
   (<span class="keyword">forall</span> j: int. 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> j <a href="int.html#infix%20%3C_21">&lt;</a> k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j) -&gt;
    <a href="#valid_DER_k_368">valid_DER_k</a> cert k &lt;-&gt; <a href="#phi_DER_k_580">phi_DER_k</a> cert k

  <span class="comment">(*################################################################################################################*)</span>

                                          <span class="comment">(*helper lemmas*)</span>
  <span class="keyword">lemma</span> <a name="LemmaDIS_Oneway'lemma_1494">LemmaDIS_Oneway</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, c1 c2: <a href="#constraint_70">constraint</a>.
    <a href="#is_cert_179">is_cert</a> cert -&gt; (<a href="#is_disjunction_292">is_disjunction</a> cert c1 c2 -&gt; <a href="#phi_DIS_571">phi_DIS</a> cert c1 c2)

  <span class="keyword">lemma</span> <a name="LemmaDIS_Otherway'lemma_1498">LemmaDIS_Otherway</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, c1 c2: <a href="#constraint_70">constraint</a>.
     <a href="#is_cert_179">is_cert</a> cert -&gt; (<a href="#phi_DIS_571">phi_DIS</a> cert c1 c2 -&gt; <a href="#is_disjunction_292">is_disjunction</a> cert c1 c2)

 <span class="comment">(*############################################ Lemma 10 ############################################################*)</span>

  <span class="keyword">lemma</span> <a name="LemmaDIS'lemma_1504">LemmaDIS</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, c1 c2: <a href="#constraint_70">constraint</a>.
    <a href="#is_cert_179">is_cert</a> cert -&gt; (<a href="#is_disjunction_292">is_disjunction</a> cert c1 c2 &lt;-&gt; <a href="#phi_DIS_571">phi_DIS</a> cert c1 c2)

 <span class="comment">(*##################################################################################################################*)</span>

                                          <span class="comment">(*helper lemmas*)</span>
  <span class="keyword">lemma</span> <a name="LemmaUNS_OneWay_ASM'lemma_1511">LemmaUNS_OneWay_ASM</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k: int.
    <a href="#is_cert_179">is_cert</a> cert -&gt; 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a> -&gt;
    cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Uns_121">Uns</a> -&gt;
    (<span class="keyword">forall</span> j: int. 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> j <a href="int.html#infix%20%3C_21">&lt;</a> k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j) -&gt;
    <a href="#valid_DER_k_368">valid_DER_k</a> cert k -&gt; <a href="#phi_ASM_513">phi_ASM</a> cert k

  <span class="keyword">lemma</span> <a name="LemmaUNS_One_Direction'lemma_1519">LemmaUNS_One_Direction</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k: int.
    <a href="#is_cert_179">is_cert</a> cert -&gt; 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a> -&gt;
    cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Uns_121">Uns</a> -&gt;
    (<span class="keyword">forall</span> j: int. 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> j <a href="int.html#infix%20%3C_21">&lt;</a> k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j) -&gt;
    <a href="#valid_DER_k_368">valid_DER_k</a> cert k -&gt; <a href="#phi_DER_k_580">phi_DER_k</a> cert k

  <span class="keyword">lemma</span> <a name="OtherASM_Helper_Other_Help_another'lemma_1526">OtherASM_Helper_Other_Help_another</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k:int, indices: <a href="array.html#array_15">array</a> int.
    <span class="keyword">let</span> k_total = (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) <span class="keyword">in</span>
    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>
    <a href="#is_cert_179">is_cert</a> cert /\  cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Uns_121">Uns</a> /\ dc.<a href="#data_144">data</a> = <a href="#D_uns_127">D_uns</a> indices
    /\ (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j)
    /\ <a href="#in_range_130">in_range</a> k (<a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>) /\ <a href="#phi_DER_k_580">phi_DER_k</a> cert k
    -&gt;
       <span class="keyword">let</span> i1 = indices[0] <span class="keyword">in</span>
       <span class="keyword">let</span> l1 = indices[1] <span class="keyword">in</span>
       <span class="keyword">let</span> i2 = indices[2] <span class="keyword">in</span>
       <span class="keyword">let</span> l2 = indices[3] <span class="keyword">in</span>
       <span class="keyword">forall</span> j: int.
          <a href="#is_asm_of_302">is_asm_of</a> cert j k_total &lt;-&gt; (
            (<a href="#is_asm_of_302">is_asm_of</a> cert j i1 /\ j &lt;&gt; l1) \/
            (<a href="#is_asm_of_302">is_asm_of</a> cert j i2 /\ j &lt;&gt; l2)
          )

  <span class="keyword">lemma</span> <a name="OtherASM_Helper_Other_Help_another_x'lemma_1545">OtherASM_Helper_Other_Help_another_x</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k:int, indices: <a href="array.html#array_15">array</a> int.
    <span class="keyword">let</span> k_total = (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) <span class="keyword">in</span>
    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>
    <a href="#is_cert_179">is_cert</a> cert /\  cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Uns_121">Uns</a> /\ dc.<a href="#data_144">data</a> = <a href="#D_uns_127">D_uns</a> indices
    /\ (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j)
    /\ <a href="#in_range_130">in_range</a> k (<a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>) /\ <a href="#phi_DER_k_580">phi_DER_k</a> cert k
    -&gt;
       <span class="keyword">let</span> i1 = indices[0] <span class="keyword">in</span>
       <span class="keyword">let</span> l1 = indices[1] <span class="keyword">in</span>
       <span class="keyword">let</span> i2 = indices[2] <span class="keyword">in</span>
       <span class="keyword">let</span> l2 = indices[3] <span class="keyword">in</span>
       <span class="keyword">forall</span> j: int.
          <a href="#is_asm_of_302">is_asm_of</a> cert j k_total &lt;-&gt; (
            (<a href="#is_asm_of_302">is_asm_of</a> cert j i1 /\ j &lt;&gt; l1) \/
            (<a href="#is_asm_of_302">is_asm_of</a> cert j i2 /\ j &lt;&gt; l2)
          )
        /\   (<span class="keyword">forall</span> i: int. <a href="set.html#mem_33">mem</a> i dc.<a href="#a_set_145">a_set</a> -&gt; (i <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>) <a href="int.html#infix%20%3C=_25">&lt;=</a> k)

  <span class="keyword">lemma</span> <a name="OtherASM_Helper_Other_Help_another_fin_x'lemma_1564">OtherASM_Helper_Other_Help_another_fin_x</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k:int, indices: <a href="array.html#array_15">array</a> int.

    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>
    <a href="#is_cert_179">is_cert</a> cert /\  cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Uns_121">Uns</a> /\ dc.<a href="#data_144">data</a> = <a href="#D_uns_127">D_uns</a> indices
    /\ (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j)
    /\ <a href="#in_range_130">in_range</a> k (<a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>) /\ <a href="#phi_DER_k_580">phi_DER_k</a> cert k
    -&gt;
      <a href="#val_ASM_341">val_ASM</a> cert k

  <span class="keyword">lemma</span> <a name="OtherASM_Helper_Other_Help_another_fin'lemma_1574">OtherASM_Helper_Other_Help_another_fin</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k:int, indices: <a href="array.html#array_15">array</a> int.

     <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>
     <a href="#is_cert_179">is_cert</a> cert /\  cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Uns_121">Uns</a> /\ dc.<a href="#data_144">data</a> = <a href="#D_uns_127">D_uns</a> indices
     /\ (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j)
     /\ <a href="#in_range_130">in_range</a> k (<a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>) /\ <a href="#phi_DER_k_580">phi_DER_k</a> cert k
     -&gt;
      <a href="#valid_DER_k_368">valid_DER_k</a> cert k

  <span class="keyword">lemma</span> <a name="LemmaUNS_Other_Direction'lemma_1586">LemmaUNS_Other_Direction</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k: int.
    <a href="#is_cert_179">is_cert</a> cert -&gt; 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a> -&gt;
    cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Uns_121">Uns</a> -&gt;
    (<span class="keyword">forall</span> j: int. 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> j <a href="int.html#infix%20%3C_21">&lt;</a> k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j) -&gt;
     <a href="#phi_DER_k_580">phi_DER_k</a> cert k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert k

 <span class="comment">(*############################################# Lemma 11 ###########################################################*)</span>

  <span class="keyword">lemma</span> <a name="LemmaUNS'lemma_1596">LemmaUNS</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k: int.
    <a href="#is_cert_179">is_cert</a> cert -&gt; 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a> -&gt;
    cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Uns_121">Uns</a> -&gt;
    (<span class="keyword">forall</span> j: int. 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> j <a href="int.html#infix%20%3C_21">&lt;</a> k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j) -&gt;
    <a href="#valid_DER_k_368">valid_DER_k</a> cert k &lt;-&gt; <a href="#phi_DER_k_580">phi_DER_k</a> cert k

 <span class="comment">(*##################################################################################################################*)</span>

                                          <span class="comment">(*helper lemmas*)</span>

  <span class="keyword">lemma</span> <a name="LemmaSol_One_Direction_ASM'lemma_1607">LemmaSol_One_Direction_ASM</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k: int.
    <a href="#is_cert_179">is_cert</a> cert -&gt; 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a> -&gt;
    cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Sol_122">Sol</a> -&gt;
    (<span class="keyword">forall</span> j: int. 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> j <a href="int.html#infix%20%3C_21">&lt;</a> k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j) -&gt;
    <a href="#valid_DER_k_368">valid_DER_k</a> cert k -&gt; <a href="#phi_ASM_513">phi_ASM</a> cert k

  <span class="keyword">lemma</span> <a name="LemmaSol_OneDir_Helper'lemma_1616">LemmaSol_OneDir_Helper</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k: int.

     <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>

         <a href="#is_cert_179">is_cert</a> cert -&gt; 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a> -&gt;
         cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Sol_122">Sol</a> -&gt;
         (<span class="keyword">forall</span> j: int. 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> j <a href="int.html#infix%20%3C_21">&lt;</a> k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j) -&gt;
         ( (cert.<a href="#cOBJ_164">cOBJ</a>.<a href="#sense_94">sense</a> = <a href="#Min_89">Min</a> -&gt;
         <span class="keyword">exists</span> sol: <a href="array.html#array_15">array</a> real. <a href="set.html#mem_33">mem</a> sol cert.<a href="#cSOL_167">cSOL</a> /\ <a href="#con_dom_con_226">con_dom_con</a> { <a href="#a_71">a</a> = cert.<a href="#cOBJ_164">cOBJ</a>.<a href="#c_93">c</a>; <a href="#b_72">b</a> = <a href="#dot_78">dot</a> cert.<a href="#cOBJ_164">cOBJ</a>.<a href="#c_93">c</a> sol; <a href="#s_73">s</a> = <a href="#Leq_56">Leq</a> } dc.<a href="#con_142">con</a>)
         /\ (cert.<a href="#cOBJ_164">cOBJ</a>.<a href="#sense_94">sense</a> = <a href="#Max_90">Max</a> -&gt;
         <span class="keyword">exists</span> sol: <a href="array.html#array_15">array</a> real. <a href="set.html#mem_33">mem</a> sol cert.<a href="#cSOL_167">cSOL</a> /\ <a href="#con_dom_con_226">con_dom_con</a> { <a href="#a_71">a</a> = cert.<a href="#cOBJ_164">cOBJ</a>.<a href="#c_93">c</a>; <a href="#b_72">b</a> = <a href="#dot_78">dot</a> cert.<a href="#cOBJ_164">cOBJ</a>.<a href="#c_93">c</a> sol; <a href="#s_73">s</a> = <a href="#Geq_57">Geq</a> } dc.<a href="#con_142">con</a>)
         ) -&gt;
         <span class="keyword">if</span> <a href="#p_447">p</a> cert <span class="keyword">then</span>
           <span class="keyword">exists</span> sol: <a href="array.html#array_15">array</a> real. <a href="set.html#mem_33">mem</a> sol cert.<a href="#cSOL_167">cSOL</a> /\ <a href="#phi_DOM_constr_555">phi_DOM_constr</a> { <a href="#a_71">a</a> = cert.<a href="#cOBJ_164">cOBJ</a>.<a href="#c_93">c</a>; <a href="#b_72">b</a> = <a href="#dot_78">dot</a> cert.<a href="#cOBJ_164">cOBJ</a>.<a href="#c_93">c</a> sol; <a href="#s_73">s</a> = <a href="#Leq_56">Leq</a> } dc.<a href="#con_142">con</a>
         <span class="keyword">else</span>
           <span class="keyword">exists</span> sol: <a href="array.html#array_15">array</a> real. <a href="set.html#mem_33">mem</a> sol cert.<a href="#cSOL_167">cSOL</a> /\ <a href="#phi_DOM_constr_555">phi_DOM_constr</a> { <a href="#a_71">a</a> = cert.<a href="#cOBJ_164">cOBJ</a>.<a href="#c_93">c</a>; <a href="#b_72">b</a> = <a href="#dot_78">dot</a> cert.<a href="#cOBJ_164">cOBJ</a>.<a href="#c_93">c</a> sol; <a href="#s_73">s</a> = <a href="#Geq_57">Geq</a> } dc.<a href="#con_142">con</a>

  <span class="keyword">lemma</span> <a name="LemmaSol_OneDir_Helper_OtherWay'lemma_1636">LemmaSol_OneDir_Helper_OtherWay</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k: int.

     <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>

         <a href="#is_cert_179">is_cert</a> cert -&gt; 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a> -&gt;
         cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Sol_122">Sol</a> -&gt;
         (<span class="keyword">forall</span> j: int. 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> j <a href="int.html#infix%20%3C_21">&lt;</a> k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j) -&gt;
         (<span class="keyword">if</span> <a href="#p_447">p</a> cert <span class="keyword">then</span>
            <span class="keyword">exists</span> sol: <a href="array.html#array_15">array</a> real. <a href="set.html#mem_33">mem</a> sol cert.<a href="#cSOL_167">cSOL</a> /\ <a href="#phi_DOM_constr_555">phi_DOM_constr</a> { <a href="#a_71">a</a> = cert.<a href="#cOBJ_164">cOBJ</a>.<a href="#c_93">c</a>; <a href="#b_72">b</a> = <a href="#dot_78">dot</a> cert.<a href="#cOBJ_164">cOBJ</a>.<a href="#c_93">c</a> sol; <a href="#s_73">s</a> = <a href="#Leq_56">Leq</a> } dc.<a href="#con_142">con</a>
          <span class="keyword">else</span>
            <span class="keyword">exists</span> sol: <a href="array.html#array_15">array</a> real. <a href="set.html#mem_33">mem</a> sol cert.<a href="#cSOL_167">cSOL</a> /\ <a href="#phi_DOM_constr_555">phi_DOM_constr</a> { <a href="#a_71">a</a> = cert.<a href="#cOBJ_164">cOBJ</a>.<a href="#c_93">c</a>; <a href="#b_72">b</a> = <a href="#dot_78">dot</a> cert.<a href="#cOBJ_164">cOBJ</a>.<a href="#c_93">c</a> sol; <a href="#s_73">s</a> = <a href="#Geq_57">Geq</a> } dc.<a href="#con_142">con</a>)
          -&gt; <span class="keyword">exists</span> sol: <a href="array.html#array_15">array</a> real. <a href="set.html#mem_33">mem</a> sol cert.<a href="#cSOL_167">cSOL</a> /\
          ((cert.<a href="#cOBJ_164">cOBJ</a>.<a href="#sense_94">sense</a> = <a href="#Min_89">Min</a> -&gt; <a href="#con_dom_con_226">con_dom_con</a> { <a href="#a_71">a</a> = cert.<a href="#cOBJ_164">cOBJ</a>.<a href="#c_93">c</a>; <a href="#b_72">b</a> = <a href="#dot_78">dot</a> cert.<a href="#cOBJ_164">cOBJ</a>.<a href="#c_93">c</a> sol; <a href="#s_73">s</a> = <a href="#Leq_56">Leq</a> } dc.<a href="#con_142">con</a>) /\
          (cert.<a href="#cOBJ_164">cOBJ</a>.<a href="#sense_94">sense</a> = <a href="#Max_90">Max</a> -&gt; <a href="#con_dom_con_226">con_dom_con</a> { <a href="#a_71">a</a> = cert.<a href="#cOBJ_164">cOBJ</a>.<a href="#c_93">c</a>; <a href="#b_72">b</a> = <a href="#dot_78">dot</a> cert.<a href="#cOBJ_164">cOBJ</a>.<a href="#c_93">c</a> sol; <a href="#s_73">s</a> = <a href="#Geq_57">Geq</a> } dc.<a href="#con_142">con</a>))

  <span class="keyword">lemma</span> <a name="LemmaSOL_valid_OneWay'lemma_1654">LemmaSOL_valid_OneWay</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k: int.
    <a href="#is_cert_179">is_cert</a> cert -&gt; 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a> -&gt;
    cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Sol_122">Sol</a> -&gt;
    (<span class="keyword">forall</span> j: int. 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> j <a href="int.html#infix%20%3C_21">&lt;</a> k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j) -&gt;
    <a href="#valid_DER_k_368">valid_DER_k</a> cert k -&gt; <a href="#phi_DER_k_580">phi_DER_k</a> cert k

  <span class="keyword">lemma</span> <a name="LemmaSOL_valid_OtherWay'lemma_1662">LemmaSOL_valid_OtherWay</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k: int.
    <a href="#is_cert_179">is_cert</a> cert -&gt; 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a> -&gt;
    cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Sol_122">Sol</a> -&gt;
    (<span class="keyword">forall</span> j: int. 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> j <a href="int.html#infix%20%3C_21">&lt;</a> k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j) -&gt;
     <a href="#phi_DER_k_580">phi_DER_k</a> cert k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert k

 <span class="comment">(*############################################### Lemma 12 ################################################################*)</span>

  <span class="keyword">lemma</span> <a name="LemmaSOL_valid'lemma_1671">LemmaSOL_valid</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k: int.
    <a href="#is_cert_179">is_cert</a> cert -&gt; 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a> -&gt;
    cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Sol_122">Sol</a> -&gt;
    (<span class="keyword">forall</span> j: int. 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> j <a href="int.html#infix%20%3C_21">&lt;</a> k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j) -&gt;
    <a href="#valid_DER_k_368">valid_DER_k</a> cert k &lt;-&gt; <a href="#phi_DER_k_580">phi_DER_k</a> cert k

  <span class="comment">(*#########################################################################################################################*)</span>

                                                      <span class="comment">(*helper lemmas*)</span>
  <span class="keyword">lemma</span> <a name="LemmaDER_Oneway_together'lemma_1681">LemmaDER_Oneway_together</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k: int.
    <a href="#is_cert_179">is_cert</a> cert -&gt; 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a> -&gt;
    (cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Sol_122">Sol</a> \/ cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Asm_118">Asm</a> \/ cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Uns_121">Uns</a> \/ cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Lin_119">Lin</a>) -&gt;
    (<span class="keyword">forall</span> j: int. 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> j <a href="int.html#infix%20%3C_21">&lt;</a> k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j) -&gt;
    <a href="#valid_DER_k_368">valid_DER_k</a> cert k -&gt; <a href="#phi_ASM_513">phi_ASM</a> cert k

  <span class="keyword">lemma</span> <a name="LemmaDER_k_OneWay'lemma_1689">LemmaDER_k_OneWay</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k: int.
    <a href="#is_cert_179">is_cert</a> cert -&gt; 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a> -&gt;
    (<span class="keyword">forall</span> j: int. 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> j <a href="int.html#infix%20%3C_21">&lt;</a> k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j) -&gt;
    <a href="#valid_DER_k_368">valid_DER_k</a> cert k -&gt; <a href="#phi_DER_k_580">phi_DER_k</a> cert k

  <span class="keyword">lemma</span> <a name="LemmaDER_helperASM'lemma_1696">LemmaDER_helperASM</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k:int.
    <a href="#is_cert_179">is_cert</a> cert -&gt; 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a> -&gt; cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Asm_118">Asm</a>
    -&gt; (<span class="keyword">forall</span> j: int. 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> j <a href="int.html#infix%20%3C_21">&lt;</a> k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j)
    -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert k -&gt; <a href="#phi_DER_k_580">phi_DER_k</a> cert k

  <span class="keyword">lemma</span> <a name="LemmaDER_helperSol'lemma_1702">LemmaDER_helperSol</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k:int.
    <a href="#is_cert_179">is_cert</a> cert -&gt; 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a> -&gt; cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Sol_122">Sol</a>
    -&gt; (<span class="keyword">forall</span> j: int. 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> j <a href="int.html#infix%20%3C_21">&lt;</a> k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j)
    -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert k -&gt; <a href="#phi_DER_k_580">phi_DER_k</a> cert k

  <span class="keyword">lemma</span> <a name="LemmaDER_helperUns'lemma_1708">LemmaDER_helperUns</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k:int.
    <a href="#is_cert_179">is_cert</a> cert -&gt; 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a> -&gt; cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Uns_121">Uns</a>
    -&gt; (<span class="keyword">forall</span> j: int. 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> j <a href="int.html#infix%20%3C_21">&lt;</a> k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j)
    -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert k -&gt; <a href="#phi_DER_k_580">phi_DER_k</a> cert k

  <span class="keyword">lemma</span> <a name="LemmaDER_helperLin_helper'lemma_1715">LemmaDER_helperLin_helper</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k: int, weights: <a href="array.html#array_15">array</a> real.

    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>
    <span class="keyword">let</span> sgn_prod =
    <span class="keyword">fun</span> i -&gt; weights[i] <a href="real.html#infix%20*._71">*.</a> (<a href="real.html#from_int_129">from_int</a> (<a href="#sign_to_int_60">sign_to_int</a> (<a href="#get_constraint_213">get_constraint</a> cert i).<a href="#s_73">s</a>)) <span class="keyword">in</span>

        <span class="keyword">let</span> all_nonneg : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> -&gt; sgn_prod i <a href="real.html#infix%20%3E=._78">&gt;=.</a> 0.0 <span class="keyword">in</span>
        <span class="keyword">let</span> all_zero   : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> -&gt; sgn_prod i = 0.0 <span class="keyword">in</span>
        <span class="keyword">let</span> all_nonpos : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> -&gt; sgn_prod i <a href="real.html#infix%20%3C=._77">&lt;=.</a> 0.0 <span class="keyword">in</span>

    <span class="keyword">let</span> gen_con : <a href="#generalized_constraint_208">generalized_constraint</a> = <a href="#get_lin_comb_246">get_lin_comb</a> cert weights <span class="keyword">in</span>

        <a href="#is_cert_179">is_cert</a> cert  -&gt; 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a> -&gt;
        (cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Lin_119">Lin</a> /\ dc.<a href="#data_144">data</a> = <a href="#D_lin_comb_126">D_lin_comb</a> weights) -&gt;
        <a href="#gen_con_dom_con_238">gen_con_dom_con</a> gen_con dc.<a href="#con_142">con</a> -&gt; (<a href="#phi_DOM_expanded_539">phi_DOM_expanded</a>
            gen_con.<a href="#lhs_209">lhs</a> dc.<a href="#con_142">con</a>.<a href="#a_71">a</a> gen_con.<a href="#rhs_210">rhs</a> dc.<a href="#con_142">con</a>.<a href="#b_72">b</a> all_zero
            (dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Eq_58">Eq</a>)
            all_nonneg
            (dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Geq_57">Geq</a>)
            all_nonpos
            (dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Leq_56">Leq</a>))

  <span class="keyword">lemma</span> <a name="LemmaDER_helperLin_helper_phiASM'lemma_1740">LemmaDER_helperLin_helper_phiASM</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k: int, weights: <a href="array.html#array_15">array</a> real.

    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>
    <span class="keyword">let</span> sgn_prod =
    <span class="keyword">fun</span> i -&gt; weights[i] <a href="real.html#infix%20*._71">*.</a> (<a href="real.html#from_int_129">from_int</a> (<a href="#sign_to_int_60">sign_to_int</a> (<a href="#get_constraint_213">get_constraint</a> cert i).<a href="#s_73">s</a>)) <span class="keyword">in</span>

        <span class="keyword">let</span> all_nonneg : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> -&gt; sgn_prod i <a href="real.html#infix%20%3E=._78">&gt;=.</a> 0.0 <span class="keyword">in</span>
        <span class="keyword">let</span> all_zero   : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> -&gt; sgn_prod i = 0.0 <span class="keyword">in</span>
        <span class="keyword">let</span> all_nonpos : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> -&gt; sgn_prod i <a href="real.html#infix%20%3C=._77">&lt;=.</a> 0.0 <span class="keyword">in</span>

    <span class="keyword">let</span> gen_con : <a href="#generalized_constraint_208">generalized_constraint</a> = <a href="#get_lin_comb_246">get_lin_comb</a> cert weights <span class="keyword">in</span>

        <a href="#is_cert_179">is_cert</a> cert  -&gt; 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a> -&gt;
        (cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Lin_119">Lin</a> /\ dc.<a href="#data_144">data</a> = <a href="#D_lin_comb_126">D_lin_comb</a> weights) -&gt;
        <a href="#val_ASM_341">val_ASM</a> cert k /\ <a href="#gen_con_dom_con_238">gen_con_dom_con</a> gen_con dc.<a href="#con_142">con</a> /\ (<span class="keyword">forall</span> j: int. 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> j <a href="int.html#infix%20%3C_21">&lt;</a> k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j)-&gt; (<a href="#phi_DOM_expanded_539">phi_DOM_expanded</a>
            gen_con.<a href="#lhs_209">lhs</a> dc.<a href="#con_142">con</a>.<a href="#a_71">a</a> gen_con.<a href="#rhs_210">rhs</a> dc.<a href="#con_142">con</a>.<a href="#b_72">b</a> all_zero
            (dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Eq_58">Eq</a>)
            all_nonneg
            (dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Geq_57">Geq</a>)
            all_nonpos
            (dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Leq_56">Leq</a>)) /\ <a href="#phi_ASM_513">phi_ASM</a> cert k

  <span class="keyword">lemma</span> <a name="LemmaDER_helperLin_helper_phiASM_check'lemma_1765">LemmaDER_helperLin_helper_phiASM_check</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k: int, weights: <a href="array.html#array_15">array</a> real.

    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>
    <span class="keyword">let</span> k_total = (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) <span class="keyword">in</span>
    <span class="keyword">let</span> sgn_prod =
    <span class="keyword">fun</span> i -&gt; weights[i] <a href="real.html#infix%20*._71">*.</a> (<a href="real.html#from_int_129">from_int</a> (<a href="#sign_to_int_60">sign_to_int</a> (<a href="#get_constraint_213">get_constraint</a> cert i).<a href="#s_73">s</a>)) <span class="keyword">in</span>

        <span class="keyword">let</span> all_nonneg : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> -&gt; sgn_prod i <a href="real.html#infix%20%3E=._78">&gt;=.</a> 0.0 <span class="keyword">in</span>
        <span class="keyword">let</span> all_zero   : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> -&gt; sgn_prod i = 0.0 <span class="keyword">in</span>
        <span class="keyword">let</span> all_nonpos : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> -&gt; sgn_prod i <a href="real.html#infix%20%3C=._77">&lt;=.</a> 0.0 <span class="keyword">in</span>

    <span class="keyword">let</span> gen_con : <a href="#generalized_constraint_208">generalized_constraint</a> = <a href="#get_lin_comb_246">get_lin_comb</a> cert weights <span class="keyword">in</span>

        <a href="#is_cert_179">is_cert</a> cert  -&gt; 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a> -&gt;
        (cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Lin_119">Lin</a> /\ dc.<a href="#data_144">data</a> = <a href="#D_lin_comb_126">D_lin_comb</a> weights) -&gt;
        <a href="#val_ASM_341">val_ASM</a> cert k /\ <a href="#gen_con_dom_con_238">gen_con_dom_con</a> gen_con dc.<a href="#con_142">con</a> /\ (<span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ weights[i] &lt;&gt; 0.0 -&gt; (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total)) /\
        (<span class="keyword">forall</span> j: int. 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> j <a href="int.html#infix%20%3C_21">&lt;</a> k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j)  -&gt; (<a href="#phi_DOM_expanded_539">phi_DOM_expanded</a>
            gen_con.<a href="#lhs_209">lhs</a> dc.<a href="#con_142">con</a>.<a href="#a_71">a</a> gen_con.<a href="#rhs_210">rhs</a> dc.<a href="#con_142">con</a>.<a href="#b_72">b</a> all_zero
            (dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Eq_58">Eq</a>)
            all_nonneg
            (dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Geq_57">Geq</a>)
            all_nonpos
            (dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Leq_56">Leq</a>))
            /\ <a href="#phi_ASM_513">phi_ASM</a> cert k
            /\ (<span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ weights[i] &lt;&gt; 0.0 -&gt; (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total))

  <span class="keyword">lemma</span> <a name="LemmaDER_helperLin_helper_phiASM_check_trans'lemma_1794">LemmaDER_helperLin_helper_phiASM_check_trans</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k: int, weights: <a href="array.html#array_15">array</a> real.

    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>

        <a href="#is_cert_179">is_cert</a> cert  -&gt; 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a> -&gt;
        (cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Lin_119">Lin</a> /\ dc.<a href="#data_144">data</a> = <a href="#D_lin_comb_126">D_lin_comb</a> weights)
        -&gt; (<span class="keyword">forall</span> j: int. 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> j <a href="int.html#infix%20%3C_21">&lt;</a> k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j) -&gt;
        <a href="#valid_DER_k_368">valid_DER_k</a> cert k -&gt;  <a href="#phi_DER_k_580">phi_DER_k</a> cert k

  <span class="keyword">lemma</span> <a name="LemmaDER_helperLin'lemma_1805">LemmaDER_helperLin</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k:int.
    <a href="#is_cert_179">is_cert</a> cert -&gt; 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a> -&gt; cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Lin_119">Lin</a>
    -&gt; (<span class="keyword">forall</span> j: int. 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> j <a href="int.html#infix%20%3C_21">&lt;</a> k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j)
    -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert k -&gt; <a href="#phi_DER_k_580">phi_DER_k</a> cert k

  <span class="keyword">lemma</span> <a name="LemmaDER_helperRND_helper'lemma_1813">LemmaDER_helperRND_helper</a>:
  <span class="keyword">forall</span> cert:<a href="#certificate_162">certificate</a>, k:int, weights: <a href="array.html#array_15">array</a> real.

    <span class="keyword">let</span> k_total = (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) <span class="keyword">in</span>
    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>
    <span class="keyword">let</span> sgn_prod =
    <span class="keyword">fun</span> i -&gt; weights[i] <a href="real.html#infix%20*._71">*.</a> (<a href="real.html#from_int_129">from_int</a> (<a href="#sign_to_int_60">sign_to_int</a> (<a href="#get_constraint_213">get_constraint</a> cert i).<a href="#s_73">s</a>)) <span class="keyword">in</span>

        <span class="keyword">let</span> all_nonneg : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> -&gt; sgn_prod i <a href="real.html#infix%20%3E=._78">&gt;=.</a> 0.0 <span class="keyword">in</span>
        <span class="keyword">let</span> all_zero   : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> -&gt; sgn_prod i = 0.0 <span class="keyword">in</span>
        <span class="keyword">let</span> all_nonpos : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> -&gt; sgn_prod i <a href="real.html#infix%20%3C=._77">&lt;=.</a> 0.0 <span class="keyword">in</span>

    <span class="keyword">let</span> gen_con : <a href="#generalized_constraint_208">generalized_constraint</a> = <a href="#get_lin_comb_246">get_lin_comb</a> cert weights <span class="keyword">in</span>

        <a href="#is_cert_179">is_cert</a> cert /\ cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Rnd_120">Rnd</a>
        /\ dc.<a href="#data_144">data</a> = <a href="#D_lin_comb_126">D_lin_comb</a> weights /\ (0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>) /\ (<span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ weights[i] &lt;&gt; 0.0 -&gt; (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total)) /\
        (<span class="keyword">forall</span> j: int. 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> j <a href="int.html#infix%20%3C_21">&lt;</a> k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j) /\
        (<a href="#rnd_gen_con_dom_con_285">rnd_gen_con_dom_con</a> cert (<a href="#get_lin_comb_246">get_lin_comb</a> cert weights) dc.<a href="#con_142">con</a>) /\ <a href="#val_ASM_341">val_ASM</a> cert k -&gt;
        (
        (
        (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j <a href="#n_46">n</a> -&gt; gen_con.<a href="#lhs_209">lhs</a>[j] = 0.0) /\
        (<span class="keyword">if</span> all_nonneg <span class="keyword">then</span> gen_con.<a href="#rhs_210">rhs</a> <a href="real.html#infix%20%3E._80">&gt;.</a> 0.0 <span class="keyword">else</span>
          <span class="keyword">if</span> all_nonpos <span class="keyword">then</span> gen_con.<a href="#rhs_210">rhs</a> <a href="real.html#infix%20%3C._79">&lt;.</a> 0.0 <span class="keyword">else</span> <span class="keyword">false</span>)
        )
        \/
        (
        (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j <a href="#n_46">n</a> -&gt; gen_con.<a href="#lhs_209">lhs</a>[j] = dc.<a href="#con_142">con</a>.<a href="#a_71">a</a>[j]) /\
        (<span class="keyword">if</span> dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Eq_58">Eq</a> <span class="keyword">then</span> <span class="keyword">false</span> <span class="keyword">else</span>
          <span class="keyword">if</span> dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Geq_57">Geq</a> <span class="keyword">then</span> (all_nonneg /\ (<a href="real.html#from_int_129">from_int</a> (<a href="real.html#ceil_184">ceil</a> gen_con.<a href="#rhs_210">rhs</a>)) <a href="real.html#infix%20%3E=._78">&gt;=.</a> dc.<a href="#con_142">con</a>.<a href="#b_72">b</a>) <span class="keyword">else</span>
             (all_nonpos /\ (<a href="real.html#from_int_129">from_int</a> (<a href="real.html#floor_183">floor</a> gen_con.<a href="#rhs_210">rhs</a>)) <a href="real.html#infix%20%3C=._77">&lt;=.</a> dc.<a href="#con_142">con</a>.<a href="#b_72">b</a>))
        )
        ) /\ <a href="#phi_RND_564">phi_RND</a> cert gen_con.<a href="#lhs_209">lhs</a> all_zero /\ (<span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ weights[i] &lt;&gt; 0.0 -&gt; (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total)) /\ <a href="#phi_ASM_513">phi_ASM</a> cert k

  <span class="keyword">lemma</span> <a name="LemmaDER_helperRND_helper_faster'lemma_1848">LemmaDER_helperRND_helper_faster</a>:
  <span class="keyword">forall</span> cert:<a href="#certificate_162">certificate</a>, k:int, weights: <a href="array.html#array_15">array</a> real.

    <span class="keyword">let</span> k_total = (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) <span class="keyword">in</span>
    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>
    <span class="keyword">let</span> sgn_prod =
    <span class="keyword">fun</span> i -&gt; weights[i] <a href="real.html#infix%20*._71">*.</a> (<a href="real.html#from_int_129">from_int</a> (<a href="#sign_to_int_60">sign_to_int</a> (<a href="#get_constraint_213">get_constraint</a> cert i).<a href="#s_73">s</a>)) <span class="keyword">in</span>

        <span class="keyword">let</span> all_nonneg : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> -&gt; sgn_prod i <a href="real.html#infix%20%3E=._78">&gt;=.</a> 0.0 <span class="keyword">in</span>

        <span class="keyword">let</span> all_nonpos : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> -&gt; sgn_prod i <a href="real.html#infix%20%3C=._77">&lt;=.</a> 0.0 <span class="keyword">in</span>

    <span class="keyword">let</span> gen_con : <a href="#generalized_constraint_208">generalized_constraint</a> = <a href="#get_lin_comb_246">get_lin_comb</a> cert weights <span class="keyword">in</span>

        <a href="#is_cert_179">is_cert</a> cert /\ cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Rnd_120">Rnd</a>
        /\ dc.<a href="#data_144">data</a> = <a href="#D_lin_comb_126">D_lin_comb</a> weights /\ (0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>) /\ (<span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ weights[i] &lt;&gt; 0.0 -&gt; (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total)) /\
        (<span class="keyword">forall</span> j: int. 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> j <a href="int.html#infix%20%3C_21">&lt;</a> k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j) /\
        (<a href="#rnd_gen_con_dom_con_285">rnd_gen_con_dom_con</a> cert (<a href="#get_lin_comb_246">get_lin_comb</a> cert weights) dc.<a href="#con_142">con</a>) /\ <a href="#val_ASM_341">val_ASM</a> cert k -&gt;
        (
        (
        (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j <a href="#n_46">n</a> -&gt; gen_con.<a href="#lhs_209">lhs</a>[j] = 0.0) /\
        (<span class="keyword">if</span> all_nonneg <span class="keyword">then</span> gen_con.<a href="#rhs_210">rhs</a> <a href="real.html#infix%20%3E._80">&gt;.</a> 0.0 <span class="keyword">else</span>
          <span class="keyword">if</span> all_nonpos <span class="keyword">then</span> gen_con.<a href="#rhs_210">rhs</a> <a href="real.html#infix%20%3C._79">&lt;.</a> 0.0 <span class="keyword">else</span> <span class="keyword">false</span>)
        )
        \/
        (
        (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j <a href="#n_46">n</a> -&gt; gen_con.<a href="#lhs_209">lhs</a>[j] = dc.<a href="#con_142">con</a>.<a href="#a_71">a</a>[j]) /\
        (<span class="keyword">if</span> dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Eq_58">Eq</a> <span class="keyword">then</span> <span class="keyword">false</span> <span class="keyword">else</span>
          <span class="keyword">if</span> dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Geq_57">Geq</a> <span class="keyword">then</span> (all_nonneg /\ (<a href="real.html#from_int_129">from_int</a> (<a href="real.html#ceil_184">ceil</a> gen_con.<a href="#rhs_210">rhs</a>)) <a href="real.html#infix%20%3E=._78">&gt;=.</a> dc.<a href="#con_142">con</a>.<a href="#b_72">b</a>) <span class="keyword">else</span>
             (all_nonpos /\ (<a href="real.html#from_int_129">from_int</a> (<a href="real.html#floor_183">floor</a> gen_con.<a href="#rhs_210">rhs</a>)) <a href="real.html#infix%20%3C=._77">&lt;=.</a> dc.<a href="#con_142">con</a>.<a href="#b_72">b</a>))
        )
        )

  <span class="keyword">lemma</span> <a name="LemmaDER_helperRND_helper_intermed'lemma_1883">LemmaDER_helperRND_helper_intermed</a>:
  <span class="keyword">forall</span> cert:<a href="#certificate_162">certificate</a>, k:int, weights: <a href="array.html#array_15">array</a> real.

    <span class="keyword">let</span> k_total = (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) <span class="keyword">in</span>
    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>

        <a href="#is_cert_179">is_cert</a> cert /\ cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Rnd_120">Rnd</a>
        /\ dc.<a href="#data_144">data</a> = <a href="#D_lin_comb_126">D_lin_comb</a> weights /\ (0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>) /\ (<span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ weights[i] &lt;&gt; 0.0 -&gt; (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total)) /\
        (<span class="keyword">forall</span> j: int. 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> j <a href="int.html#infix%20%3C_21">&lt;</a> k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j) /\
        <a href="#valid_DER_k_368">valid_DER_k</a> cert k -&gt; (<span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ weights[i] &lt;&gt; 0.0 -&gt; (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total))
        /\ (<a href="#rnd_gen_con_dom_con_285">rnd_gen_con_dom_con</a> cert (<a href="#get_lin_comb_246">get_lin_comb</a> cert weights) dc.<a href="#con_142">con</a>) /\ <a href="#val_ASM_341">val_ASM</a> cert k

  <span class="keyword">lemma</span> <a name="LemmaDER_helperRND_helper_faster_again'lemma_1897">LemmaDER_helperRND_helper_faster_again</a>:
  <span class="keyword">forall</span> cert:<a href="#certificate_162">certificate</a>, k:int, weights: <a href="array.html#array_15">array</a> real.

    <span class="keyword">let</span> k_total = (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) <span class="keyword">in</span>
    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>
    <span class="keyword">let</span> sgn_prod =
    <span class="keyword">fun</span> i -&gt; weights[i] <a href="real.html#infix%20*._71">*.</a> (<a href="real.html#from_int_129">from_int</a> (<a href="#sign_to_int_60">sign_to_int</a> (<a href="#get_constraint_213">get_constraint</a> cert i).<a href="#s_73">s</a>)) <span class="keyword">in</span>

        <span class="keyword">let</span> all_nonneg : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> -&gt; sgn_prod i <a href="real.html#infix%20%3E=._78">&gt;=.</a> 0.0 <span class="keyword">in</span>

        <span class="keyword">let</span> all_nonpos : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> -&gt; sgn_prod i <a href="real.html#infix%20%3C=._77">&lt;=.</a> 0.0 <span class="keyword">in</span>

    <span class="keyword">let</span> gen_con : <a href="#generalized_constraint_208">generalized_constraint</a> = <a href="#get_lin_comb_246">get_lin_comb</a> cert weights <span class="keyword">in</span>

        <a href="#is_cert_179">is_cert</a> cert /\ cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Rnd_120">Rnd</a>
        /\ dc.<a href="#data_144">data</a> = <a href="#D_lin_comb_126">D_lin_comb</a> weights /\ (0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>) /\ (<span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ weights[i] &lt;&gt; 0.0 -&gt; (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total)) /\
        (<span class="keyword">forall</span> j: int. 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> j <a href="int.html#infix%20%3C_21">&lt;</a> k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j) /\
        (<a href="#rnd_gen_con_dom_con_285">rnd_gen_con_dom_con</a> cert (<a href="#get_lin_comb_246">get_lin_comb</a> cert weights) dc.<a href="#con_142">con</a>) -&gt;
        (
        (
        (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j <a href="#n_46">n</a> -&gt; gen_con.<a href="#lhs_209">lhs</a>[j] = 0.0) /\
        (<span class="keyword">if</span> all_nonneg <span class="keyword">then</span> gen_con.<a href="#rhs_210">rhs</a> <a href="real.html#infix%20%3E._80">&gt;.</a> 0.0 <span class="keyword">else</span>
          <span class="keyword">if</span> all_nonpos <span class="keyword">then</span> gen_con.<a href="#rhs_210">rhs</a> <a href="real.html#infix%20%3C._79">&lt;.</a> 0.0 <span class="keyword">else</span> <span class="keyword">false</span>)
        )
        \/
        (
        (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j <a href="#n_46">n</a> -&gt; gen_con.<a href="#lhs_209">lhs</a>[j] = dc.<a href="#con_142">con</a>.<a href="#a_71">a</a>[j]) /\
        (<span class="keyword">if</span> dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Eq_58">Eq</a> <span class="keyword">then</span> <span class="keyword">false</span> <span class="keyword">else</span>
          <span class="keyword">if</span> dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Geq_57">Geq</a> <span class="keyword">then</span> (all_nonneg /\ (<a href="real.html#from_int_129">from_int</a> (<a href="real.html#ceil_184">ceil</a> gen_con.<a href="#rhs_210">rhs</a>)) <a href="real.html#infix%20%3E=._78">&gt;=.</a> dc.<a href="#con_142">con</a>.<a href="#b_72">b</a>) <span class="keyword">else</span>
             (all_nonpos /\ (<a href="real.html#from_int_129">from_int</a> (<a href="real.html#floor_183">floor</a> gen_con.<a href="#rhs_210">rhs</a>)) <a href="real.html#infix%20%3C=._77">&lt;=.</a> dc.<a href="#con_142">con</a>.<a href="#b_72">b</a>))
        )
        )

  <span class="keyword">lemma</span> <a name="LemmaDER_helperRND_helper_intermed_again'lemma_1932">LemmaDER_helperRND_helper_intermed_again</a>:
  <span class="keyword">forall</span> cert:<a href="#certificate_162">certificate</a>, k:int, weights: <a href="array.html#array_15">array</a> real.

    <span class="keyword">let</span> k_total = (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) <span class="keyword">in</span>
    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>

        <a href="#is_cert_179">is_cert</a> cert /\ cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Rnd_120">Rnd</a>
        /\ dc.<a href="#data_144">data</a> = <a href="#D_lin_comb_126">D_lin_comb</a> weights /\ (0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>) /\ (<span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ weights[i] &lt;&gt; 0.0 -&gt; (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total))  /\
        (<span class="keyword">forall</span> j: int. 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> j <a href="int.html#infix%20%3C_21">&lt;</a> k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j) /\
        (<a href="#rnd_gen_con_dom_con_285">rnd_gen_con_dom_con</a> cert (<a href="#get_lin_comb_246">get_lin_comb</a> cert weights) dc.<a href="#con_142">con</a>) /\ <a href="#val_ASM_341">val_ASM</a> cert k   -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert k

  <span class="keyword">lemma</span> <a name="LemmaDER_helperRND_helper_faster_again_val'lemma_1946">LemmaDER_helperRND_helper_faster_again_val</a>:
  <span class="keyword">forall</span> cert:<a href="#certificate_162">certificate</a>, k:int, weights: <a href="array.html#array_15">array</a> real.

    <span class="keyword">let</span> k_total = (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) <span class="keyword">in</span>
    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>
    <span class="keyword">let</span> sgn_prod =
    <span class="keyword">fun</span> i -&gt; weights[i] <a href="real.html#infix%20*._71">*.</a> (<a href="real.html#from_int_129">from_int</a> (<a href="#sign_to_int_60">sign_to_int</a> (<a href="#get_constraint_213">get_constraint</a> cert i).<a href="#s_73">s</a>)) <span class="keyword">in</span>

        <span class="keyword">let</span> all_nonneg : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> -&gt; sgn_prod i <a href="real.html#infix%20%3E=._78">&gt;=.</a> 0.0 <span class="keyword">in</span>

        <span class="keyword">let</span> all_nonpos : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> -&gt; sgn_prod i <a href="real.html#infix%20%3C=._77">&lt;=.</a> 0.0 <span class="keyword">in</span>

    <span class="keyword">let</span> gen_con : <a href="#generalized_constraint_208">generalized_constraint</a> = <a href="#get_lin_comb_246">get_lin_comb</a> cert weights <span class="keyword">in</span>

        <a href="#is_cert_179">is_cert</a> cert /\ cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Rnd_120">Rnd</a>
        /\ dc.<a href="#data_144">data</a> = <a href="#D_lin_comb_126">D_lin_comb</a> weights /\ (0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>) /\ (<span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ weights[i] &lt;&gt; 0.0 -&gt; (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total))  /\
        (<span class="keyword">forall</span> j: int. 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> j <a href="int.html#infix%20%3C_21">&lt;</a> k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j) /\
        (<a href="#rnd_gen_con_dom_con_285">rnd_gen_con_dom_con</a> cert (<a href="#get_lin_comb_246">get_lin_comb</a> cert weights) dc.<a href="#con_142">con</a>) /\ <a href="#valid_DER_k_368">valid_DER_k</a> cert k  -&gt;
        (
        (
        (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j <a href="#n_46">n</a> -&gt; gen_con.<a href="#lhs_209">lhs</a>[j] = 0.0) /\
        (<span class="keyword">if</span> all_nonneg <span class="keyword">then</span> gen_con.<a href="#rhs_210">rhs</a> <a href="real.html#infix%20%3E._80">&gt;.</a> 0.0 <span class="keyword">else</span>
          <span class="keyword">if</span> all_nonpos <span class="keyword">then</span> gen_con.<a href="#rhs_210">rhs</a> <a href="real.html#infix%20%3C._79">&lt;.</a> 0.0 <span class="keyword">else</span> <span class="keyword">false</span>)
        )
        \/
        (
        (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j <a href="#n_46">n</a> -&gt; gen_con.<a href="#lhs_209">lhs</a>[j] = dc.<a href="#con_142">con</a>.<a href="#a_71">a</a>[j]) /\
        (<span class="keyword">if</span> dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Eq_58">Eq</a> <span class="keyword">then</span> <span class="keyword">false</span> <span class="keyword">else</span>
          <span class="keyword">if</span> dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Geq_57">Geq</a> <span class="keyword">then</span> (all_nonneg /\ (<a href="real.html#from_int_129">from_int</a> (<a href="real.html#ceil_184">ceil</a> gen_con.<a href="#rhs_210">rhs</a>)) <a href="real.html#infix%20%3E=._78">&gt;=.</a> dc.<a href="#con_142">con</a>.<a href="#b_72">b</a>) <span class="keyword">else</span>
             (all_nonpos /\ (<a href="real.html#from_int_129">from_int</a> (<a href="real.html#floor_183">floor</a> gen_con.<a href="#rhs_210">rhs</a>)) <a href="real.html#infix%20%3C=._77">&lt;=.</a> dc.<a href="#con_142">con</a>.<a href="#b_72">b</a>))
        )
        )

  <span class="keyword">lemma</span> <a name="LemmaDER_helperRND_helper_faster_faster'lemma_1981">LemmaDER_helperRND_helper_faster_faster</a>:
  <span class="keyword">forall</span> cert:<a href="#certificate_162">certificate</a>, k:int, weights: <a href="array.html#array_15">array</a> real.

    <span class="keyword">let</span> k_total = (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) <span class="keyword">in</span>
    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>
    <span class="keyword">let</span> sgn_prod =
    <span class="keyword">fun</span> i -&gt; weights[i] <a href="real.html#infix%20*._71">*.</a> (<a href="real.html#from_int_129">from_int</a> (<a href="#sign_to_int_60">sign_to_int</a> (<a href="#get_constraint_213">get_constraint</a> cert i).<a href="#s_73">s</a>)) <span class="keyword">in</span>

        <span class="keyword">let</span> all_nonneg : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> -&gt; sgn_prod i <a href="real.html#infix%20%3E=._78">&gt;=.</a> 0.0 <span class="keyword">in</span>
        <span class="keyword">let</span> all_nonpos : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> -&gt; sgn_prod i <a href="real.html#infix%20%3C=._77">&lt;=.</a> 0.0 <span class="keyword">in</span>

    <span class="keyword">let</span> gen_con : <a href="#generalized_constraint_208">generalized_constraint</a> = <a href="#get_lin_comb_246">get_lin_comb</a> cert weights <span class="keyword">in</span>

        <a href="#is_cert_179">is_cert</a> cert /\ cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Rnd_120">Rnd</a>
        /\ dc.<a href="#data_144">data</a> = <a href="#D_lin_comb_126">D_lin_comb</a> weights /\ (0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>) /\
        (<span class="keyword">forall</span> j: int. 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> j <a href="int.html#infix%20%3C_21">&lt;</a> k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j) /\
        <a href="#valid_DER_k_368">valid_DER_k</a> cert k -&gt; (<span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ weights[i] &lt;&gt; 0.0 -&gt; (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total)) /\
        (<a href="#rnd_gen_con_dom_con_285">rnd_gen_con_dom_con</a> cert (<a href="#get_lin_comb_246">get_lin_comb</a> cert weights) dc.<a href="#con_142">con</a>) /\ <a href="#val_ASM_341">val_ASM</a> cert k -&gt;

        (
        (
        (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j <a href="#n_46">n</a> -&gt; gen_con.<a href="#lhs_209">lhs</a>[j] = 0.0) /\
        (<span class="keyword">if</span> all_nonneg <span class="keyword">then</span> gen_con.<a href="#rhs_210">rhs</a> <a href="real.html#infix%20%3E._80">&gt;.</a> 0.0 <span class="keyword">else</span>
          <span class="keyword">if</span> all_nonpos <span class="keyword">then</span> gen_con.<a href="#rhs_210">rhs</a> <a href="real.html#infix%20%3C._79">&lt;.</a> 0.0 <span class="keyword">else</span> <span class="keyword">false</span>)
        )
        \/
        (
        (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j <a href="#n_46">n</a> -&gt; gen_con.<a href="#lhs_209">lhs</a>[j] = dc.<a href="#con_142">con</a>.<a href="#a_71">a</a>[j]) /\
        (<span class="keyword">if</span> dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Eq_58">Eq</a> <span class="keyword">then</span> <span class="keyword">false</span> <span class="keyword">else</span>
          <span class="keyword">if</span> dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Geq_57">Geq</a> <span class="keyword">then</span> (all_nonneg /\ (<a href="real.html#from_int_129">from_int</a> (<a href="real.html#ceil_184">ceil</a> gen_con.<a href="#rhs_210">rhs</a>)) <a href="real.html#infix%20%3E=._78">&gt;=.</a> dc.<a href="#con_142">con</a>.<a href="#b_72">b</a>) <span class="keyword">else</span>
             (all_nonpos /\ (<a href="real.html#from_int_129">from_int</a> (<a href="real.html#floor_183">floor</a> gen_con.<a href="#rhs_210">rhs</a>)) <a href="real.html#infix%20%3C=._77">&lt;=.</a> dc.<a href="#con_142">con</a>.<a href="#b_72">b</a>))
        )
        )

  <span class="keyword">lemma</span> <a name="LemmaDER_helperRnd'lemma_2018">LemmaDER_helperRnd</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k:int.
    <a href="#is_cert_179">is_cert</a> cert -&gt; 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a> -&gt; cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Rnd_120">Rnd</a>
    -&gt; (<span class="keyword">forall</span> j: int. 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> j <a href="int.html#infix%20%3C_21">&lt;</a> k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j)
    -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert k -&gt; <a href="#phi_DER_k_580">phi_DER_k</a> cert k

  <span class="keyword">lemma</span> <a name="LemmaDER_helperRndAltogether'lemma_2025">LemmaDER_helperRndAltogether</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k:int.
    <a href="#is_cert_179">is_cert</a> cert -&gt; 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a> -&gt; (cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Asm_118">Asm</a> \/ cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Rnd_120">Rnd</a> \/ cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Uns_121">Uns</a> \/ cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Lin_119">Lin</a> \/ cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Sol_122">Sol</a>)
    -&gt; (<span class="keyword">forall</span> j: int. 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> j <a href="int.html#infix%20%3C_21">&lt;</a> k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j) -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert k -&gt; <a href="#phi_DER_k_580">phi_DER_k</a> cert k

  <span class="keyword">lemma</span> <a name="LemmaDER_helperRndAltogether_Altogether'lemma_2031">LemmaDER_helperRndAltogether_Altogether</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k:int.
    <a href="#is_cert_179">is_cert</a> cert -&gt; 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a> -&gt; (<span class="keyword">forall</span> j: int. 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> j <a href="int.html#infix%20%3C_21">&lt;</a> k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j) -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert k -&gt; <a href="#phi_DER_k_580">phi_DER_k</a> cert k

  <span class="keyword">lemma</span> <a name="LemmaDER_k_OtherWay_Together'lemma_2036">LemmaDER_k_OtherWay_Together</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k: int.
    <a href="#is_cert_179">is_cert</a> cert -&gt; 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a> -&gt;
    (<span class="keyword">forall</span> j: int. 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> j <a href="int.html#infix%20%3C_21">&lt;</a> k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j) -&gt;
    <a href="#phi_DER_k_580">phi_DER_k</a> cert k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert k

<span class="comment">(*################################################# Corollary 1 ######################################################################*)</span>

  <span class="keyword">lemma</span> <a name="LemmaDER_k'lemma_2044">LemmaDER_k</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k: int.
    <a href="#is_cert_179">is_cert</a> cert -&gt; 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a> -&gt;
    (<span class="keyword">forall</span> j: int. 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> j <a href="int.html#infix%20%3C_21">&lt;</a> k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert j) -&gt;
    <a href="#valid_DER_k_368">valid_DER_k</a> cert k &lt;-&gt; <a href="#phi_DER_k_580">phi_DER_k</a> cert k

 <span class="comment">(*#################################################################################################################################*)</span>

                                                <span class="comment">(*helper lemmas*)</span>

  <span class="keyword">lemma</span> <a name="LemmaDER_HelperAnother'lemma_2054">LemmaDER_HelperAnother</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>.
    <a href="#is_cert_179">is_cert</a> cert -&gt; (<span class="keyword">forall</span> k: int. <a href="#in_range_130">in_range</a> k (<a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>) -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert k)
     -&gt; (<span class="keyword">forall</span> k: int. <a href="#in_range_130">in_range</a> k (<a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>) -&gt; <a href="#phi_DER_k_580">phi_DER_k</a> cert k)

  <span class="keyword">lemma</span> <a name="LemmaDER_forward'lemma_2060">LemmaDER_forward</a>: <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>. <a href="#is_cert_179">is_cert</a> cert -&gt; (<a href="#valid_DER_406">valid_DER</a> cert -&gt; <a href="#phi_DER_643">phi_DER</a> cert)

  <span class="keyword">lemma</span> <a name="LemmaDER_helperASM_OtherDirection'lemma_2063">LemmaDER_helperASM_OtherDirection</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k:int.
    <a href="#is_cert_179">is_cert</a> cert -&gt; 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a> -&gt; cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Asm_118">Asm</a> -&gt;
    (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j k -&gt; <a href="#phi_DER_k_580">phi_DER_k</a> cert j)
    -&gt; <a href="#phi_DER_k_580">phi_DER_k</a> cert k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert k

  <span class="keyword">lemma</span> <a name="LemmaDER_helperSol_OtherDirection'lemma_2070">LemmaDER_helperSol_OtherDirection</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k:int.
    <a href="#is_cert_179">is_cert</a> cert -&gt; 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a> -&gt; cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Sol_122">Sol</a> -&gt;
    (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j k -&gt; <a href="#phi_DER_k_580">phi_DER_k</a> cert j)
    -&gt; <a href="#phi_DER_k_580">phi_DER_k</a> cert k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert k

  <span class="keyword">lemma</span> <a name="OtherASM_Helper_Other_Help_anotherx'lemma_2077">OtherASM_Helper_Other_Help_anotherx</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k:int, indices: <a href="array.html#array_15">array</a> int.

    <span class="keyword">let</span> k_total = (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) <span class="keyword">in</span>
    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>
    <a href="#is_cert_179">is_cert</a> cert /\  cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Uns_121">Uns</a> /\ dc.<a href="#data_144">data</a> = <a href="#D_uns_127">D_uns</a> indices
    /\ (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j k -&gt; <a href="#phi_DER_k_580">phi_DER_k</a> cert j) /\ <a href="#in_range_130">in_range</a> k (<a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>) /\ <a href="#phi_DER_k_580">phi_DER_k</a> cert k
    -&gt;
       <span class="keyword">let</span> i1 = indices[0] <span class="keyword">in</span>
       <span class="keyword">let</span> l1 = indices[1] <span class="keyword">in</span>
       <span class="keyword">let</span> i2 = indices[2] <span class="keyword">in</span>
       <span class="keyword">let</span> l2 = indices[3] <span class="keyword">in</span>
       <span class="keyword">forall</span> j: int.
          <a href="#is_asm_of_302">is_asm_of</a> cert j k_total &lt;-&gt; (
            (<a href="#is_asm_of_302">is_asm_of</a> cert j i1 /\ j &lt;&gt; l1) \/
            (<a href="#is_asm_of_302">is_asm_of</a> cert j i2 /\ j &lt;&gt; l2)
          )

  <span class="keyword">lemma</span> <a name="OtherASM_Helper_Other_Help_another_xx'lemma_2096">OtherASM_Helper_Other_Help_another_xx</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k:int, indices: <a href="array.html#array_15">array</a> int.

    <span class="keyword">let</span> k_total = (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) <span class="keyword">in</span>
    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>
    <a href="#is_cert_179">is_cert</a> cert /\  cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Uns_121">Uns</a> /\ dc.<a href="#data_144">data</a> = <a href="#D_uns_127">D_uns</a> indices /\
    (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j k -&gt; <a href="#phi_DER_k_580">phi_DER_k</a> cert j) /\ <a href="#in_range_130">in_range</a> k (<a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>) /\ <a href="#phi_DER_k_580">phi_DER_k</a> cert k
    -&gt;
       <span class="keyword">let</span> i1 = indices[0] <span class="keyword">in</span>
       <span class="keyword">let</span> l1 = indices[1] <span class="keyword">in</span>
       <span class="keyword">let</span> i2 = indices[2] <span class="keyword">in</span>
       <span class="keyword">let</span> l2 = indices[3] <span class="keyword">in</span>
       <span class="keyword">forall</span> j: int.
          <a href="#is_asm_of_302">is_asm_of</a> cert j k_total &lt;-&gt; (
            (<a href="#is_asm_of_302">is_asm_of</a> cert j i1 /\ j &lt;&gt; l1) \/
            (<a href="#is_asm_of_302">is_asm_of</a> cert j i2 /\ j &lt;&gt; l2)
          )
        /\   (<span class="keyword">forall</span> i: int. <a href="set.html#mem_33">mem</a> i dc.<a href="#a_set_145">a_set</a> -&gt; Int.(<a href="int.html#infix%20%3C=_25">&lt;=</a>) (Int.(<a href="int.html#infix%20-_23">-</a>) i <a href="#m_47">m</a>) k)

  <span class="keyword">lemma</span> <a name="OtherASM_Helper_Other_Help_another_fin_xx'lemma_2116">OtherASM_Helper_Other_Help_another_fin_xx</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k:int, indices: <a href="array.html#array_15">array</a> int.

    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>
    <a href="#is_cert_179">is_cert</a> cert /\  cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Uns_121">Uns</a> /\ dc.<a href="#data_144">data</a> = <a href="#D_uns_127">D_uns</a> indices
    /\ (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j k -&gt; <a href="#phi_DER_k_580">phi_DER_k</a> cert j) /\ <a href="#in_range_130">in_range</a> k (<a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>) /\ <a href="#phi_DER_k_580">phi_DER_k</a> cert k
    -&gt;
      <a href="#val_ASM_341">val_ASM</a> cert k

  <span class="keyword">lemma</span> <a name="OtherASM_Helper_Other_Help_another_finx'lemma_2126">OtherASM_Helper_Other_Help_another_finx</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k:int, indices: <a href="array.html#array_15">array</a> int.

    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>
    <a href="#is_cert_179">is_cert</a> cert /\  cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Uns_121">Uns</a> /\ dc.<a href="#data_144">data</a> = <a href="#D_uns_127">D_uns</a> indices /\
    (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j k -&gt; <a href="#phi_DER_k_580">phi_DER_k</a> cert j) /\ <a href="#in_range_130">in_range</a> k (<a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>) /\ <a href="#phi_DER_k_580">phi_DER_k</a> cert k
    -&gt;
      <a href="#valid_DER_k_368">valid_DER_k</a> cert k

  <span class="keyword">lemma</span> <a name="LemmaDER_helperUns_OtherDirection'lemma_2136">LemmaDER_helperUns_OtherDirection</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k:int.
    <a href="#is_cert_179">is_cert</a> cert -&gt; 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a> -&gt; cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Uns_121">Uns</a>
    -&gt;(<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j k -&gt; <a href="#phi_DER_k_580">phi_DER_k</a> cert j)
    -&gt; <a href="#phi_DER_k_580">phi_DER_k</a> cert k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert k

  <span class="keyword">lemma</span> <a name="LemmaDER_helperLin_OtherDir_help'lemma_2143">LemmaDER_helperLin_OtherDir_help</a>:
  <span class="keyword">forall</span> cert:<a href="#certificate_162">certificate</a>, k:int, weights: <a href="array.html#array_15">array</a> real.

    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>
    <span class="keyword">let</span> sgn_prod =
    <span class="keyword">fun</span> i -&gt; weights[i] <a href="real.html#infix%20*._71">*.</a> (<a href="real.html#from_int_129">from_int</a> (<a href="#sign_to_int_60">sign_to_int</a> (<a href="#get_constraint_213">get_constraint</a> cert i).<a href="#s_73">s</a>)) <span class="keyword">in</span>

        <span class="keyword">let</span> all_nonneg : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i <a href="real.html#infix%20%3E=._78">&gt;=.</a> 0.0 <span class="keyword">in</span>
        <span class="keyword">let</span> all_zero   : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i = 0.0 <span class="keyword">in</span>
        <span class="keyword">let</span> all_nonpos : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i <a href="real.html#infix%20%3C=._77">&lt;=.</a> 0.0 <span class="keyword">in</span>

    <span class="keyword">let</span> gen_con : <a href="#generalized_constraint_208">generalized_constraint</a> = <a href="#get_lin_comb_246">get_lin_comb</a> cert weights <span class="keyword">in</span>

        <a href="#is_cert_179">is_cert</a> cert  /\ cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Lin_119">Lin</a>
        /\ dc.<a href="#data_144">data</a> = <a href="#D_lin_comb_126">D_lin_comb</a> weights /\ (0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>) /\
        (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j k -&gt; <a href="#phi_DER_k_580">phi_DER_k</a> cert j) /\
        <a href="#phi_DOM_expanded_539">phi_DOM_expanded</a>
        gen_con.<a href="#lhs_209">lhs</a> dc.<a href="#con_142">con</a>.<a href="#a_71">a</a> gen_con.<a href="#rhs_210">rhs</a> dc.<a href="#con_142">con</a>.<a href="#b_72">b</a> all_zero
        (dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Eq_58">Eq</a>)
        all_nonneg
        (dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Geq_57">Geq</a>)
        all_nonpos
        (dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Leq_56">Leq</a>)  -&gt; (<a href="#gen_con_dom_con_238">gen_con_dom_con</a> (<a href="#get_lin_comb_246">get_lin_comb</a> cert weights) dc.<a href="#con_142">con</a>)

  <span class="keyword">lemma</span> <a name="Other_Direction_X'lemma_2168">Other_Direction_X</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k:int, weights: <a href="array.html#array_15">array</a> real.

    <span class="keyword">let</span> k_total = (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) <span class="keyword">in</span>
    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>

        <a href="#is_cert_179">is_cert</a> cert /\ (cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Lin_119">Lin</a> \/ cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Rnd_120">Rnd</a>)
        /\ dc.<a href="#data_144">data</a> = <a href="#D_lin_comb_126">D_lin_comb</a> weights  /\ <a href="#in_range_130">in_range</a> k (<a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>)
        /\ (<span class="keyword">forall</span> j: int. ((<a href="#is_asm_index_171">is_asm_index</a> cert j /\ (k_total <a href="int.html#infix%20%3C_21">&lt;</a> j)) -&gt; <span class="keyword">not</span> <a href="#is_asm_of_302">is_asm_of</a> cert j k_total))
        /\ (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j k -&gt; <a href="#phi_DER_k_580">phi_DER_k</a> cert j)
        /\ (<span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ weights[i] &lt;&gt; 0.0 -&gt; (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total)) -&gt;
        (<span class="keyword">forall</span> j: int. (<a href="#is_asm_index_171">is_asm_index</a> cert j /\ (j <a href="int.html#infix%20%3C_21">&lt;</a> k_total)) -&gt;
        (<a href="#is_asm_of_302">is_asm_of</a> cert j k_total &lt;-&gt;  <span class="keyword">exists</span> i: int.
        (weights[i] &lt;&gt; 0.0 /\ (j <a href="int.html#infix%20%3C=_25">&lt;=</a> i) /\ (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total) /\ <a href="#is_asm_of_302">is_asm_of</a> cert j i)))  -&gt;
        ( (<span class="keyword">forall</span> j: int. <a href="set.html#mem_33">mem</a> j dc.<a href="#a_set_145">a_set</a> &lt;-&gt; <span class="keyword">exists</span> i:int. weights[i] &lt;&gt; 0.0 /\ (<a href="#m_47">m</a> <a href="int.html#infix%20%3C=_25">&lt;=</a> i) /\ (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total) /\
         <a href="set.html#mem_33">mem</a> j cert.<a href="#cDER_168">cDER</a>[i <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>].<a href="#a_set_145">a_set</a>)
        /\
        (<span class="keyword">forall</span> i: int. weights[i] &lt;&gt; 0.0 /\ (<a href="#m_47">m</a> <a href="int.html#infix%20%3C=_25">&lt;=</a> i) /\ (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total) -&gt;
        <span class="keyword">forall</span> j: int. <a href="set.html#mem_33">mem</a> j cert.<a href="#cDER_168">cDER</a>[i <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>].<a href="#a_set_145">a_set</a> -&gt; <a href="set.html#mem_33">mem</a> j dc.<a href="#a_set_145">a_set</a>) )

  <span class="keyword">lemma</span> <a name="LemmaDER_helperLin_OtherDir_help_help'lemma_2189">LemmaDER_helperLin_OtherDir_help_help</a>:
  <span class="keyword">forall</span> cert:<a href="#certificate_162">certificate</a>, k:int, weights: <a href="array.html#array_15">array</a> real.

    <span class="keyword">let</span> k_total = (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) <span class="keyword">in</span>
    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>
    <span class="keyword">let</span> sgn_prod =
    <span class="keyword">fun</span> i -&gt; weights[i] <a href="real.html#infix%20*._71">*.</a> (<a href="real.html#from_int_129">from_int</a> (<a href="#sign_to_int_60">sign_to_int</a> (<a href="#get_constraint_213">get_constraint</a> cert i).<a href="#s_73">s</a>)) <span class="keyword">in</span>

        <span class="keyword">let</span> all_nonneg : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i <a href="real.html#infix%20%3E=._78">&gt;=.</a> 0.0 <span class="keyword">in</span>
        <span class="keyword">let</span> all_zero   : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i = 0.0 <span class="keyword">in</span>
        <span class="keyword">let</span> all_nonpos : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i <a href="real.html#infix%20%3C=._77">&lt;=.</a> 0.0 <span class="keyword">in</span>

    <span class="keyword">let</span> gen_con : <a href="#generalized_constraint_208">generalized_constraint</a> = <a href="#get_lin_comb_246">get_lin_comb</a> cert weights <span class="keyword">in</span>
        <a href="#is_cert_179">is_cert</a> cert  /\ cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Lin_119">Lin</a>
        /\ dc.<a href="#data_144">data</a> = <a href="#D_lin_comb_126">D_lin_comb</a> weights /\ (0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>) /\
        (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j k -&gt; <a href="#phi_DER_k_580">phi_DER_k</a> cert j) /\
        <a href="#phi_DOM_expanded_539">phi_DOM_expanded</a>
        gen_con.<a href="#lhs_209">lhs</a> dc.<a href="#con_142">con</a>.<a href="#a_71">a</a> gen_con.<a href="#rhs_210">rhs</a> dc.<a href="#con_142">con</a>.<a href="#b_72">b</a> all_zero
        (dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Eq_58">Eq</a>)
        all_nonneg
        (dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Geq_57">Geq</a>)
        all_nonpos
        (dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Leq_56">Leq</a>) /\ (<span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ weights[i] &lt;&gt; 0.0 -&gt; (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total))
        -&gt; (<a href="#gen_con_dom_con_238">gen_con_dom_con</a> (<a href="#get_lin_comb_246">get_lin_comb</a> cert weights) dc.<a href="#con_142">con</a>)
        /\ (<span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ weights[i] &lt;&gt; 0.0 -&gt; (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total))

  <span class="keyword">lemma</span> <a name="LemmaDER_helperLin_OtherDir_help_help_help'lemma_2217">LemmaDER_helperLin_OtherDir_help_help_help</a>:
  <span class="keyword">forall</span> cert:<a href="#certificate_162">certificate</a>, k:int, weights: <a href="array.html#array_15">array</a> real.

     <span class="keyword">let</span> k_total = (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) <span class="keyword">in</span>
     <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>
     <span class="keyword">let</span> sgn_prod =
     <span class="keyword">fun</span> i -&gt; weights[i] <a href="real.html#infix%20*._71">*.</a> (<a href="real.html#from_int_129">from_int</a> (<a href="#sign_to_int_60">sign_to_int</a> (<a href="#get_constraint_213">get_constraint</a> cert i).<a href="#s_73">s</a>)) <span class="keyword">in</span>

        <span class="keyword">let</span> all_nonneg : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a>  /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i <a href="real.html#infix%20%3E=._78">&gt;=.</a> 0.0 <span class="keyword">in</span>
        <span class="keyword">let</span> all_zero   : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a>  /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i = 0.0 <span class="keyword">in</span>
        <span class="keyword">let</span> all_nonpos : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a>  /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i <a href="real.html#infix%20%3C=._77">&lt;=.</a> 0.0 <span class="keyword">in</span>

     <span class="keyword">let</span> gen_con : <a href="#generalized_constraint_208">generalized_constraint</a> = <a href="#get_lin_comb_246">get_lin_comb</a> cert weights <span class="keyword">in</span>
         <a href="#is_cert_179">is_cert</a> cert  /\ cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Lin_119">Lin</a>
         /\ dc.<a href="#data_144">data</a> = <a href="#D_lin_comb_126">D_lin_comb</a> weights /\ (0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>) /\
         (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j k -&gt; <a href="#phi_DER_k_580">phi_DER_k</a> cert j) /\
         <a href="#phi_DOM_expanded_539">phi_DOM_expanded</a>
         gen_con.<a href="#lhs_209">lhs</a> dc.<a href="#con_142">con</a>.<a href="#a_71">a</a> gen_con.<a href="#rhs_210">rhs</a> dc.<a href="#con_142">con</a>.<a href="#b_72">b</a> all_zero
         (dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Eq_58">Eq</a>)
         all_nonneg
         (dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Geq_57">Geq</a>)
         all_nonpos
         (dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Leq_56">Leq</a>) /\ (<span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ weights[i] &lt;&gt; 0.0 -&gt; (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total)) /\ <a href="#phi_ASM_513">phi_ASM</a> cert k
         -&gt; (<a href="#gen_con_dom_con_238">gen_con_dom_con</a> (<a href="#get_lin_comb_246">get_lin_comb</a> cert weights) dc.<a href="#con_142">con</a>)
         /\ (<span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ weights[i] &lt;&gt; 0.0 -&gt; (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total)) /\ <a href="#val_ASM_341">val_ASM</a> cert k

  <span class="keyword">lemma</span> <a name="LemmaDER_helperLin_OtherDir_help_help_help_extra'lemma_2245">LemmaDER_helperLin_OtherDir_help_help_help_extra</a> :
  <span class="keyword">forall</span> cert:<a href="#certificate_162">certificate</a>, k:int, weights: <a href="array.html#array_15">array</a> real.

    <span class="keyword">let</span> k_total = (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) <span class="keyword">in</span>
    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>
    <span class="keyword">let</span> sgn_prod =
    <span class="keyword">fun</span> i -&gt; weights[i] <a href="real.html#infix%20*._71">*.</a> (<a href="real.html#from_int_129">from_int</a> (<a href="#sign_to_int_60">sign_to_int</a> (<a href="#get_constraint_213">get_constraint</a> cert i).<a href="#s_73">s</a>)) <span class="keyword">in</span>

        <span class="keyword">let</span> all_nonneg : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a>  /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i <a href="real.html#infix%20%3E=._78">&gt;=.</a> 0.0 <span class="keyword">in</span>
        <span class="keyword">let</span> all_zero   : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a>  /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i = 0.0 <span class="keyword">in</span>
        <span class="keyword">let</span> all_nonpos : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a>  /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i <a href="real.html#infix%20%3C=._77">&lt;=.</a> 0.0 <span class="keyword">in</span>

    <span class="keyword">let</span> gen_con : <a href="#generalized_constraint_208">generalized_constraint</a> = <a href="#get_lin_comb_246">get_lin_comb</a> cert weights <span class="keyword">in</span>

        <a href="#is_cert_179">is_cert</a> cert  /\ cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Lin_119">Lin</a>
        /\ dc.<a href="#data_144">data</a> = <a href="#D_lin_comb_126">D_lin_comb</a> weights /\ (0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>) /\
         (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j k -&gt; <a href="#phi_DER_k_580">phi_DER_k</a> cert j)
        /\ <a href="#phi_DER_k_580">phi_DER_k</a> cert k
        -&gt;  <a href="#phi_DOM_expanded_539">phi_DOM_expanded</a>
        gen_con.<a href="#lhs_209">lhs</a> dc.<a href="#con_142">con</a>.<a href="#a_71">a</a> gen_con.<a href="#rhs_210">rhs</a> dc.<a href="#con_142">con</a>.<a href="#b_72">b</a> all_zero
        (dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Eq_58">Eq</a>)
        all_nonneg
        (dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Geq_57">Geq</a>)
        all_nonpos
        (dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Leq_56">Leq</a>) /\ (<span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ weights[i] &lt;&gt; 0.0 -&gt; (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total)) /\ <a href="#phi_ASM_513">phi_ASM</a> cert k

  <span class="keyword">lemma</span> <a name="LemmaDER_helperLin_OtherDir_help_help_help_extra_extra'lemma_2273">LemmaDER_helperLin_OtherDir_help_help_help_extra_extra</a> :
  <span class="keyword">forall</span> cert:<a href="#certificate_162">certificate</a>, k:int, weights: <a href="array.html#array_15">array</a> real.

    <span class="keyword">let</span> k_total = (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) <span class="keyword">in</span>
    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>

        <a href="#is_cert_179">is_cert</a> cert  /\ cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Lin_119">Lin</a>
        /\ dc.<a href="#data_144">data</a> = <a href="#D_lin_comb_126">D_lin_comb</a> weights /\ (0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>) /\ <a href="#phi_DER_k_580">phi_DER_k</a> cert k
        /\ (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j k -&gt; <a href="#phi_DER_k_580">phi_DER_k</a> cert j)
        -&gt; (<a href="#gen_con_dom_con_238">gen_con_dom_con</a> (<a href="#get_lin_comb_246">get_lin_comb</a> cert weights) dc.<a href="#con_142">con</a>)
        /\ (<span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ weights[i] &lt;&gt; 0.0 -&gt; (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total)) /\ <a href="#val_ASM_341">val_ASM</a> cert k

  <span class="keyword">lemma</span> <a name="LemmaDER_helperLin_OtherDir_help_help_help_fin'lemma_2287">LemmaDER_helperLin_OtherDir_help_help_help_fin</a>:
  <span class="keyword">forall</span> cert:<a href="#certificate_162">certificate</a>, k:int, weights: <a href="array.html#array_15">array</a> real.

    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>

        <a href="#is_cert_179">is_cert</a> cert  /\ cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Lin_119">Lin</a>
        /\ dc.<a href="#data_144">data</a> = <a href="#D_lin_comb_126">D_lin_comb</a> weights /\ (0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>) /\
        (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j k -&gt; <a href="#phi_DER_k_580">phi_DER_k</a> cert j) /\
        <a href="#phi_DER_k_580">phi_DER_k</a> cert k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert k

  <span class="keyword">lemma</span> <a name="LemmaDER_helperLin_OtherDirection'lemma_2298">LemmaDER_helperLin_OtherDirection</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k:int.
    <a href="#is_cert_179">is_cert</a> cert -&gt; 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a> -&gt; cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Lin_119">Lin</a>
    -&gt;  (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j k -&gt; <a href="#phi_DER_k_580">phi_DER_k</a> cert j)
    -&gt; <a href="#phi_DER_k_580">phi_DER_k</a> cert k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert k

  <span class="keyword">lemma</span> <a name="LemmaRND_OtherWay_Next_Check_Next_Next_xx'lemma_2305">LemmaRND_OtherWay_Next_Check_Next_Next_xx</a>:
  <span class="keyword">forall</span> cert:<a href="#certificate_162">certificate</a>, k:int, weights: <a href="array.html#array_15">array</a> real.

    <span class="keyword">let</span> k_total = (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) <span class="keyword">in</span>
    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>
    <span class="keyword">let</span> sgn_prod =
        <span class="keyword">fun</span> i -&gt; weights[i] <a href="real.html#infix%20*._71">*.</a> (<a href="real.html#from_int_129">from_int</a> (<a href="#sign_to_int_60">sign_to_int</a> (<a href="#get_constraint_213">get_constraint</a> cert i).<a href="#s_73">s</a>)) <span class="keyword">in</span>

            <span class="keyword">let</span> all_nonneg : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i <a href="real.html#infix%20%3E=._78">&gt;=.</a> 0.0 <span class="keyword">in</span>
            <span class="keyword">let</span> all_zero   : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i = 0.0 <span class="keyword">in</span>
            <span class="keyword">let</span> all_nonpos : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i <a href="real.html#infix%20%3C=._77">&lt;=.</a> 0.0 <span class="keyword">in</span>

        <span class="keyword">let</span> gen_con : <a href="#generalized_constraint_208">generalized_constraint</a> = <a href="#get_lin_comb_246">get_lin_comb</a> cert weights <span class="keyword">in</span>

        <a href="#is_cert_179">is_cert</a> cert /\ <a href="#phi_ASM_513">phi_ASM</a> cert k /\ cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Rnd_120">Rnd</a>  /\ dc.<a href="#data_144">data</a> = <a href="#D_lin_comb_126">D_lin_comb</a> weights /\ <a href="#in_range_130">in_range</a> k (<a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>)
        /\ (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j k -&gt; <a href="#phi_DER_k_580">phi_DER_k</a> cert j)
        /\ (<span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ weights[i] &lt;&gt; 0.0 -&gt; (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total)) /\
        <a href="#phi_RND_564">phi_RND</a> cert gen_con.<a href="#lhs_209">lhs</a> all_zero /\
        (
        (
        (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j <a href="#n_46">n</a> -&gt; gen_con.<a href="#lhs_209">lhs</a>[j] = 0.0) /\
        (<span class="keyword">if</span> all_nonneg <span class="keyword">then</span> gen_con.<a href="#rhs_210">rhs</a> <a href="real.html#infix%20%3E._80">&gt;.</a> 0.0 <span class="keyword">else</span>
          <span class="keyword">if</span> all_nonpos <span class="keyword">then</span> gen_con.<a href="#rhs_210">rhs</a> <a href="real.html#infix%20%3C._79">&lt;.</a> 0.0 <span class="keyword">else</span> <span class="keyword">false</span>)
        )
        \/
        (
        (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j <a href="#n_46">n</a> -&gt; gen_con.<a href="#lhs_209">lhs</a>[j] = dc.<a href="#con_142">con</a>.<a href="#a_71">a</a>[j]) /\
        (<span class="keyword">if</span> dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Eq_58">Eq</a> <span class="keyword">then</span> <span class="keyword">false</span> <span class="keyword">else</span>
          <span class="keyword">if</span> dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Geq_57">Geq</a> <span class="keyword">then</span> (all_nonneg /\ (<a href="real.html#from_int_129">from_int</a> (<a href="real.html#ceil_184">ceil</a> gen_con.<a href="#rhs_210">rhs</a>)) <a href="real.html#infix%20%3E=._78">&gt;=.</a> dc.<a href="#con_142">con</a>.<a href="#b_72">b</a>) <span class="keyword">else</span>
             (all_nonpos /\ (<a href="real.html#from_int_129">from_int</a> (<a href="real.html#floor_183">floor</a> gen_con.<a href="#rhs_210">rhs</a>)) <a href="real.html#infix%20%3C=._77">&lt;=.</a> dc.<a href="#con_142">con</a>.<a href="#b_72">b</a>))
        )
        ) -&gt; (<a href="#rnd_gen_con_dom_con_285">rnd_gen_con_dom_con</a> cert (<a href="#get_lin_comb_246">get_lin_comb</a> cert weights) dc.<a href="#con_142">con</a>)

  <span class="keyword">lemma</span> <a name="LemmaRND_OtherWay_Next_Check_XX'lemma_2340">LemmaRND_OtherWay_Next_Check_XX</a>:
  <span class="keyword">forall</span> cert:<a href="#certificate_162">certificate</a>, k:int, weights: <a href="array.html#array_15">array</a> real.

    <span class="keyword">let</span> k_total = (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) <span class="keyword">in</span>
    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>
    <span class="keyword">let</span> sgn_prod =
    <span class="keyword">fun</span> i -&gt; weights[i] <a href="real.html#infix%20*._71">*.</a> (<a href="real.html#from_int_129">from_int</a> (<a href="#sign_to_int_60">sign_to_int</a> (<a href="#get_constraint_213">get_constraint</a> cert i).<a href="#s_73">s</a>)) <span class="keyword">in</span>

        <span class="keyword">let</span> all_nonneg : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a>  /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i <a href="real.html#infix%20%3E=._78">&gt;=.</a> 0.0 <span class="keyword">in</span>
        <span class="keyword">let</span> all_zero   : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a>  /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i = 0.0 <span class="keyword">in</span>
        <span class="keyword">let</span> all_nonpos : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a>  /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i <a href="real.html#infix%20%3C=._77">&lt;=.</a> 0.0 <span class="keyword">in</span>

    <span class="keyword">let</span> gen_con : <a href="#generalized_constraint_208">generalized_constraint</a> = <a href="#get_lin_comb_246">get_lin_comb</a> cert weights <span class="keyword">in</span>

        <a href="#is_cert_179">is_cert</a> cert /\ <a href="#phi_ASM_513">phi_ASM</a> cert k /\ cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Rnd_120">Rnd</a>  /\ dc.<a href="#data_144">data</a> = <a href="#D_lin_comb_126">D_lin_comb</a> weights /\ <a href="#in_range_130">in_range</a> k (<a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>)
        /\ (<span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ weights[i] &lt;&gt; 0.0 -&gt; (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total)) /\
       (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j k -&gt; <a href="#phi_DER_k_580">phi_DER_k</a> cert j) /\
        <a href="#phi_RND_564">phi_RND</a> cert gen_con.<a href="#lhs_209">lhs</a> all_zero /\
        (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j k -&gt; <a href="#phi_DER_k_580">phi_DER_k</a> cert j) /\
        (
        (
        (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j <a href="#n_46">n</a> -&gt; gen_con.<a href="#lhs_209">lhs</a>[j] = 0.0) /\
        (<span class="keyword">if</span> all_nonneg <span class="keyword">then</span> gen_con.<a href="#rhs_210">rhs</a> <a href="real.html#infix%20%3E._80">&gt;.</a> 0.0 <span class="keyword">else</span>
          <span class="keyword">if</span> all_nonpos <span class="keyword">then</span> gen_con.<a href="#rhs_210">rhs</a> <a href="real.html#infix%20%3C._79">&lt;.</a> 0.0 <span class="keyword">else</span> <span class="keyword">false</span>)
        )
        \/
        (
        (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j <a href="#n_46">n</a> -&gt; gen_con.<a href="#lhs_209">lhs</a>[j] = dc.<a href="#con_142">con</a>.<a href="#a_71">a</a>[j]) /\
        (<span class="keyword">if</span> dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Eq_58">Eq</a> <span class="keyword">then</span> <span class="keyword">false</span> <span class="keyword">else</span>
          <span class="keyword">if</span> dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Geq_57">Geq</a> <span class="keyword">then</span> (all_nonneg /\ (<a href="real.html#from_int_129">from_int</a> (<a href="real.html#ceil_184">ceil</a> gen_con.<a href="#rhs_210">rhs</a>)) <a href="real.html#infix%20%3E=._78">&gt;=.</a> dc.<a href="#con_142">con</a>.<a href="#b_72">b</a>) <span class="keyword">else</span>
             (all_nonpos /\ (<a href="real.html#from_int_129">from_int</a> (<a href="real.html#floor_183">floor</a> gen_con.<a href="#rhs_210">rhs</a>)) <a href="real.html#infix%20%3C=._77">&lt;=.</a> dc.<a href="#con_142">con</a>.<a href="#b_72">b</a>))
        )
        ) -&gt; <a href="#val_ASM_341">val_ASM</a> cert k

 <span class="keyword">lemma</span> <a name="LemmaRND_OtherWay_Next_Check_Next_XXX'lemma_2376">LemmaRND_OtherWay_Next_Check_Next_XXX</a>:
  <span class="keyword">forall</span> cert:<a href="#certificate_162">certificate</a>, k:int, weights: <a href="array.html#array_15">array</a> real.

     <span class="keyword">let</span> k_total = (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) <span class="keyword">in</span>
     <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>

     <span class="keyword">let</span> sgn_prod =
        <span class="keyword">fun</span> i -&gt; weights[i] <a href="real.html#infix%20*._71">*.</a> (<a href="real.html#from_int_129">from_int</a> (<a href="#sign_to_int_60">sign_to_int</a> (<a href="#get_constraint_213">get_constraint</a> cert i).<a href="#s_73">s</a>)) <span class="keyword">in</span>

            <span class="keyword">let</span> all_nonneg : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i <a href="real.html#infix%20%3E=._78">&gt;=.</a> 0.0 <span class="keyword">in</span>
            <span class="keyword">let</span> all_zero   : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i = 0.0 <span class="keyword">in</span>
            <span class="keyword">let</span> all_nonpos : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i <a href="real.html#infix%20%3C=._77">&lt;=.</a> 0.0 <span class="keyword">in</span>

        <span class="keyword">let</span> gen_con : <a href="#generalized_constraint_208">generalized_constraint</a> = <a href="#get_lin_comb_246">get_lin_comb</a> cert weights <span class="keyword">in</span>

        <a href="#is_cert_179">is_cert</a> cert /\ <a href="#phi_ASM_513">phi_ASM</a> cert k /\ cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Rnd_120">Rnd</a>  /\ dc.<a href="#data_144">data</a> = <a href="#D_lin_comb_126">D_lin_comb</a> weights /\ <a href="#in_range_130">in_range</a> k (<a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>)
        /\ (<span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ weights[i] &lt;&gt; 0.0 -&gt; (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total)) /\
        <a href="#phi_RND_564">phi_RND</a> cert gen_con.<a href="#lhs_209">lhs</a> all_zero /\ (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j k -&gt; <a href="#phi_DER_k_580">phi_DER_k</a> cert j) /\
        (
        (
        (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j <a href="#n_46">n</a> -&gt; gen_con.<a href="#lhs_209">lhs</a>[j] = 0.0) /\
        (<span class="keyword">if</span> all_nonneg <span class="keyword">then</span> gen_con.<a href="#rhs_210">rhs</a> <a href="real.html#infix%20%3E._80">&gt;.</a> 0.0 <span class="keyword">else</span>
          <span class="keyword">if</span> all_nonpos <span class="keyword">then</span> gen_con.<a href="#rhs_210">rhs</a> <a href="real.html#infix%20%3C._79">&lt;.</a> 0.0 <span class="keyword">else</span> <span class="keyword">false</span>)
        )
        \/
        (
        (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j <a href="#n_46">n</a> -&gt; gen_con.<a href="#lhs_209">lhs</a>[j] = dc.<a href="#con_142">con</a>.<a href="#a_71">a</a>[j]) /\
        (<span class="keyword">if</span> dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Eq_58">Eq</a> <span class="keyword">then</span> <span class="keyword">false</span> <span class="keyword">else</span>
          <span class="keyword">if</span> dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Geq_57">Geq</a> <span class="keyword">then</span> (all_nonneg /\ (<a href="real.html#from_int_129">from_int</a> (<a href="real.html#ceil_184">ceil</a> gen_con.<a href="#rhs_210">rhs</a>)) <a href="real.html#infix%20%3E=._78">&gt;=.</a> dc.<a href="#con_142">con</a>.<a href="#b_72">b</a>) <span class="keyword">else</span>
             (all_nonpos /\ (<a href="real.html#from_int_129">from_int</a> (<a href="real.html#floor_183">floor</a> gen_con.<a href="#rhs_210">rhs</a>)) <a href="real.html#infix%20%3C=._77">&lt;=.</a> dc.<a href="#con_142">con</a>.<a href="#b_72">b</a>))
        )
        ) -&gt; (<a href="#rnd_gen_con_dom_con_285">rnd_gen_con_dom_con</a> cert (<a href="#get_lin_comb_246">get_lin_comb</a> cert weights) dc.<a href="#con_142">con</a>) /\ <a href="#val_ASM_341">val_ASM</a> cert k

 <span class="keyword">lemma</span> <a name="LemmaRND_OtherWay_Next_Check_Next_extra_x'lemma_2409">LemmaRND_OtherWay_Next_Check_Next_extra_x</a>:
  <span class="keyword">forall</span> cert:<a href="#certificate_162">certificate</a>, k:int, weights: <a href="array.html#array_15">array</a> real.

    <span class="keyword">let</span> k_total = (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) <span class="keyword">in</span>
    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>
    <span class="keyword">let</span> sgn_prod =
    <span class="keyword">fun</span> i -&gt; weights[i] <a href="real.html#infix%20*._71">*.</a> (<a href="real.html#from_int_129">from_int</a> (<a href="#sign_to_int_60">sign_to_int</a> (<a href="#get_constraint_213">get_constraint</a> cert i).<a href="#s_73">s</a>)) <span class="keyword">in</span>

        <span class="keyword">let</span> all_nonneg : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i <a href="real.html#infix%20%3E=._78">&gt;=.</a> 0.0 <span class="keyword">in</span>
        <span class="keyword">let</span> all_zero   : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0)  -&gt; sgn_prod i = 0.0 <span class="keyword">in</span>
        <span class="keyword">let</span> all_nonpos : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i <a href="real.html#infix%20%3C=._77">&lt;=.</a> 0.0 <span class="keyword">in</span>

    <span class="keyword">let</span> gen_con : <a href="#generalized_constraint_208">generalized_constraint</a> = <a href="#get_lin_comb_246">get_lin_comb</a> cert weights <span class="keyword">in</span>

        <a href="#is_cert_179">is_cert</a> cert /\ <a href="#phi_ASM_513">phi_ASM</a> cert k /\ cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Rnd_120">Rnd</a>  /\ dc.<a href="#data_144">data</a> = <a href="#D_lin_comb_126">D_lin_comb</a> weights /\ <a href="#in_range_130">in_range</a> k (<a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>)
        /\ (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j k -&gt; <a href="#phi_DER_k_580">phi_DER_k</a> cert j)
        /\ <a href="#phi_DER_k_580">phi_DER_k</a> cert k
        -&gt; (<span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ weights[i] &lt;&gt; 0.0 -&gt; (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total)) /\
        <a href="#phi_RND_564">phi_RND</a> cert gen_con.<a href="#lhs_209">lhs</a> all_zero /\
        (
        (
        (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j <a href="#n_46">n</a> -&gt; gen_con.<a href="#lhs_209">lhs</a>[j] = 0.0) /\
        (<span class="keyword">if</span> all_nonneg <span class="keyword">then</span> gen_con.<a href="#rhs_210">rhs</a> <a href="real.html#infix%20%3E._80">&gt;.</a> 0.0 <span class="keyword">else</span>
          <span class="keyword">if</span> all_nonpos <span class="keyword">then</span> gen_con.<a href="#rhs_210">rhs</a> <a href="real.html#infix%20%3C._79">&lt;.</a> 0.0 <span class="keyword">else</span> <span class="keyword">false</span>)
        )
        \/
        (
        (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j <a href="#n_46">n</a> -&gt; gen_con.<a href="#lhs_209">lhs</a>[j] = dc.<a href="#con_142">con</a>.<a href="#a_71">a</a>[j]) /\
        (<span class="keyword">if</span> dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Eq_58">Eq</a> <span class="keyword">then</span> <span class="keyword">false</span> <span class="keyword">else</span>
          <span class="keyword">if</span> dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Geq_57">Geq</a> <span class="keyword">then</span> (all_nonneg /\ (<a href="real.html#from_int_129">from_int</a> (<a href="real.html#ceil_184">ceil</a> gen_con.<a href="#rhs_210">rhs</a>)) <a href="real.html#infix%20%3E=._78">&gt;=.</a> dc.<a href="#con_142">con</a>.<a href="#b_72">b</a>) <span class="keyword">else</span>
             (all_nonpos /\ (<a href="real.html#from_int_129">from_int</a> (<a href="real.html#floor_183">floor</a> gen_con.<a href="#rhs_210">rhs</a>)) <a href="real.html#infix%20%3C=._77">&lt;=.</a> dc.<a href="#con_142">con</a>.<a href="#b_72">b</a>))
        )
        )

  <span class="keyword">lemma</span> <a name="LemmaRND_OtherWay_Next_Check_Next_extra_extra_xx'lemma_2445">LemmaRND_OtherWay_Next_Check_Next_extra_extra_xx</a>:
  <span class="keyword">forall</span> cert:<a href="#certificate_162">certificate</a>, k:int, weights: <a href="array.html#array_15">array</a> real.

    <span class="keyword">let</span> k_total = (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) <span class="keyword">in</span>
    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>
    <span class="keyword">let</span> sgn_prod =
    <span class="keyword">fun</span> i -&gt; weights[i] <a href="real.html#infix%20*._71">*.</a> (<a href="real.html#from_int_129">from_int</a> (<a href="#sign_to_int_60">sign_to_int</a> (<a href="#get_constraint_213">get_constraint</a> cert i).<a href="#s_73">s</a>)) <span class="keyword">in</span>

        <span class="keyword">let</span> all_nonneg : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i <a href="real.html#infix%20%3E=._78">&gt;=.</a> 0.0 <span class="keyword">in</span>
        <span class="keyword">let</span> all_zero   : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i = 0.0 <span class="keyword">in</span>
        <span class="keyword">let</span> all_nonpos : bool = <span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ (weights[i] &lt;&gt; 0.0) -&gt; sgn_prod i <a href="real.html#infix%20%3C=._77">&lt;=.</a> 0.0 <span class="keyword">in</span>

    <span class="keyword">let</span> gen_con : <a href="#generalized_constraint_208">generalized_constraint</a> = <a href="#get_lin_comb_246">get_lin_comb</a> cert weights <span class="keyword">in</span>

        <a href="#is_cert_179">is_cert</a> cert /\ cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Rnd_120">Rnd</a>  /\ dc.<a href="#data_144">data</a> = <a href="#D_lin_comb_126">D_lin_comb</a> weights /\ <a href="#in_range_130">in_range</a> k (<a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>) /\
         (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j k -&gt; <a href="#phi_DER_k_580">phi_DER_k</a> cert j) /\
         <a href="#phi_DER_k_580">phi_DER_k</a> cert k
          -&gt; (<span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ weights[i] &lt;&gt; 0.0 -&gt; (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total)) /\
        <a href="#phi_RND_564">phi_RND</a> cert gen_con.<a href="#lhs_209">lhs</a> all_zero /\
        (
        (
        (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j <a href="#n_46">n</a> -&gt; gen_con.<a href="#lhs_209">lhs</a>[j] = 0.0) /\
        (<span class="keyword">if</span> all_nonneg <span class="keyword">then</span> gen_con.<a href="#rhs_210">rhs</a> <a href="real.html#infix%20%3E._80">&gt;.</a> 0.0 <span class="keyword">else</span>
          <span class="keyword">if</span> all_nonpos <span class="keyword">then</span> gen_con.<a href="#rhs_210">rhs</a> <a href="real.html#infix%20%3C._79">&lt;.</a> 0.0 <span class="keyword">else</span> <span class="keyword">false</span>)
        )
        \/
        (
        (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j <a href="#n_46">n</a> -&gt; gen_con.<a href="#lhs_209">lhs</a>[j] = dc.<a href="#con_142">con</a>.<a href="#a_71">a</a>[j]) /\
        (<span class="keyword">if</span> dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Eq_58">Eq</a> <span class="keyword">then</span> <span class="keyword">false</span> <span class="keyword">else</span>
          <span class="keyword">if</span> dc.<a href="#con_142">con</a>.<a href="#s_73">s</a> = <a href="#Geq_57">Geq</a> <span class="keyword">then</span> (all_nonneg /\ (<a href="real.html#from_int_129">from_int</a> (<a href="real.html#ceil_184">ceil</a> gen_con.<a href="#rhs_210">rhs</a>)) <a href="real.html#infix%20%3E=._78">&gt;=.</a> dc.<a href="#con_142">con</a>.<a href="#b_72">b</a>) <span class="keyword">else</span>
             (all_nonpos /\ (<a href="real.html#from_int_129">from_int</a> (<a href="real.html#floor_183">floor</a> gen_con.<a href="#rhs_210">rhs</a>)) <a href="real.html#infix%20%3C=._77">&lt;=.</a> dc.<a href="#con_142">con</a>.<a href="#b_72">b</a>))
        )
        ) /\ <a href="#phi_ASM_513">phi_ASM</a> cert k

  <span class="keyword">lemma</span> <a name="LemmaRND_OtherWay_Next_Check_Next_phi_xxxx'lemma_2480">LemmaRND_OtherWay_Next_Check_Next_phi_xxxx</a>:
  <span class="keyword">forall</span> cert:<a href="#certificate_162">certificate</a>, k:int, weights: <a href="array.html#array_15">array</a> real.

    <span class="keyword">let</span> k_total = (k <a href="int.html#infix%20+_19">+</a> <a href="#m_47">m</a>) <span class="keyword">in</span>
    <span class="keyword">let</span> dc = cert.<a href="#cDER_168">cDER</a>[k] <span class="keyword">in</span>

        <a href="#is_cert_179">is_cert</a> cert /\ cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Rnd_120">Rnd</a>  /\ dc.<a href="#data_144">data</a> = <a href="#D_lin_comb_126">D_lin_comb</a> weights /\  <a href="#in_range_130">in_range</a> k (<a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>)
        /\ (<span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ weights[i] &lt;&gt; 0.0 -&gt; (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total)) /\ (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j k -&gt; <a href="#phi_DER_k_580">phi_DER_k</a> cert j) /\
        <a href="#phi_DER_k_580">phi_DER_k</a> cert k
         -&gt; (<span class="keyword">forall</span> i: int. <a href="#in_range_130">in_range</a> i <a href="#d_48">d</a> /\ weights[i] &lt;&gt; 0.0 -&gt; (i <a href="int.html#infix%20%3C_21">&lt;</a> k_total)) /\
         (<a href="#rnd_gen_con_dom_con_285">rnd_gen_con_dom_con</a> cert (<a href="#get_lin_comb_246">get_lin_comb</a> cert weights) dc.<a href="#con_142">con</a>) /\ <a href="#val_ASM_341">val_ASM</a> cert k

  <span class="keyword">lemma</span> <a name="LemmaRND_OneWay_phi'lemma_2493">LemmaRND_OneWay_phi</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k: int.
    <a href="#is_cert_179">is_cert</a> cert -&gt; 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a> -&gt;
    cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Rnd_120">Rnd</a> -&gt;
    (<span class="keyword">forall</span> j: int. 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> j <a href="int.html#infix%20%3C_21">&lt;</a> k -&gt; <a href="#phi_DER_k_580">phi_DER_k</a> cert j) -&gt;
    <a href="#phi_DER_k_580">phi_DER_k</a> cert k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert k

  <span class="keyword">lemma</span> <a name="LemmaDER_k_Phi_oneway'lemma_2501">LemmaDER_k_Phi_oneway</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k: int.
    <a href="#is_cert_179">is_cert</a> cert -&gt; 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a> -&gt;
    (<span class="keyword">forall</span> j: int. 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> j <a href="int.html#infix%20%3C_21">&lt;</a> k -&gt; <a href="#phi_DER_k_580">phi_DER_k</a> cert j) -&gt;
    <a href="#phi_DER_k_580">phi_DER_k</a> cert k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert k

  <span class="keyword">lemma</span> <a name="LemmaDER_helperRnd_OtherDirection'lemma_2508">LemmaDER_helperRnd_OtherDirection</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k:int.
    <a href="#is_cert_179">is_cert</a> cert -&gt; 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a> -&gt; cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Rnd_120">Rnd</a>
    -&gt; (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j k -&gt; <a href="#phi_DER_k_580">phi_DER_k</a> cert j)
    -&gt;  <a href="#phi_DER_k_580">phi_DER_k</a> cert k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert k

  <span class="keyword">lemma</span> <a name="LemmaDER_helperRndAltogether_OtherDirection'lemma_2515">LemmaDER_helperRndAltogether_OtherDirection</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k:int.
    <a href="#is_cert_179">is_cert</a> cert -&gt; 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>
    -&gt; (cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Asm_118">Asm</a> \/ cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Rnd_120">Rnd</a> \/ cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Uns_121">Uns</a> \/ cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Lin_119">Lin</a> \/ cert.<a href="#cDER_168">cDER</a>[k].<a href="#rsn_143">rsn</a> = <a href="#Sol_122">Sol</a>)
    -&gt;  (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j k -&gt; <a href="#phi_DER_k_580">phi_DER_k</a> cert j) -&gt; <a href="#phi_DER_k_580">phi_DER_k</a> cert k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert k

  <span class="keyword">lemma</span> <a name="LemmaDER_helperRnd_OtherDirectionFinal'lemma_2522">LemmaDER_helperRnd_OtherDirectionFinal</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>, k: int.
    <a href="#is_cert_179">is_cert</a> cert -&gt; 0 <a href="int.html#infix%20%3C=_25">&lt;=</a> k <a href="int.html#infix%20%3C_21">&lt;</a> <a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>
    -&gt; (<span class="keyword">forall</span> j: int. <a href="#in_range_130">in_range</a> j k -&gt; <a href="#phi_DER_k_580">phi_DER_k</a> cert j)
    -&gt; <a href="#phi_DER_k_580">phi_DER_k</a> cert k -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert k

  <span class="keyword">lemma</span> <a name="LemmaDER_HelperOtherDirection'lemma_2529">LemmaDER_HelperOtherDirection</a>:
  <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>.
    <a href="#is_cert_179">is_cert</a> cert -&gt; (<span class="keyword">forall</span> k: int. <a href="#in_range_130">in_range</a> k (<a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>) -&gt; <a href="#phi_DER_k_580">phi_DER_k</a> cert k)
    -&gt; (<span class="keyword">forall</span> k: int. <a href="#in_range_130">in_range</a> k (<a href="#d_48">d</a> <a href="int.html#infix%20-_23">-</a> <a href="#m_47">m</a>) -&gt; <a href="#valid_DER_k_368">valid_DER_k</a> cert k)

  <span class="keyword">lemma</span> <a name="LemmaDER_OtherWay'lemma_2534">LemmaDER_OtherWay</a>: <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>. <a href="#is_cert_179">is_cert</a> cert -&gt; (<a href="#phi_DER_643">phi_DER</a> cert -&gt; <a href="#valid_DER_406">valid_DER</a> cert)

  <span class="comment">(*######################################## Lemma 13 #################################################################*)</span>

  <span class="keyword">lemma</span> <a name="LemmaDER'lemma_2538">LemmaDER</a>: <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>. <a href="#is_cert_179">is_cert</a> cert -&gt; (<a href="#valid_DER_406">valid_DER</a> cert &lt;-&gt; <a href="#phi_DER_643">phi_DER</a> cert)

  <span class="comment">(*###################################################################################################################*)</span>

                                           <span class="comment">(*helper lemmas*)</span>
  <span class="keyword">lemma</span> <a name="MainTheorem_OneWay'lemma_2543">MainTheorem_OneWay</a>: <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>. <a href="#is_cert_179">is_cert</a> cert -&gt; (<a href="#valid_428">valid</a> cert -&gt; <a href="#phi_667">phi</a> cert)

  <span class="keyword">lemma</span> <a name="MainTheorem_OtherWay'lemma_2545">MainTheorem_OtherWay</a>: <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>. <a href="#is_cert_179">is_cert</a> cert -&gt; (<a href="#phi_667">phi</a> cert -&gt; <a href="#valid_428">valid</a> cert)

 <span class="comment">(*######################################### Equivalence Theorem ######################################################*)</span>

  <span class="keyword">goal</span> <a name="MainTheorem_2549">MainTheorem</a>: <span class="keyword">forall</span> cert: <a href="#certificate_162">certificate</a>. <a href="#is_cert_179">is_cert</a> cert -&gt; (<a href="#valid_428">valid</a> cert &lt;-&gt; <a href="#phi_667">phi</a> cert)

 <span class="comment">(*####################################################################################################################*)</span>

<span class="keyword">end</span>
</pre>

</div>
<hr>
<p>Generated by why3doc 1.7.2</p>
</body>
</html>
